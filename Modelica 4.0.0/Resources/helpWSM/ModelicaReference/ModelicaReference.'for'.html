
<html>
<head>
  <meta charset="UTF-8">
  <title>ModelicaReference: 'for'</title>
  <link rel=stylesheet type=text/css href="resources/documentation.css">
  <script src="resources/jquery.min.js"></script>
  <script src="resources/scripts.js"></script>
</head>
<body>
<div class="wrapper">
<nav>
  <ul class="cf">
    <li><a href="https://www.wolfram.com/system-modeler/">System Modeler</a></li>
  <li><a href="ModelicaReference.html">ModelicaReference</a></li>
  <li><a href="ModelicaReference.'for'.html">'for'</a></li>
  </ul>
</nav>
<header>
  <table><tr><td>
    <h1>'for'</h1>
    <p>for</p>
  </td><td>
    <div><img width="60" height="60" src="resources/icons/ModelicaReference.'for'_60x60.png"></div>
  </td></tr></table>
</header>
<section id="information">
<h1>Information</h1>
<div class="hideable">
<p class="aside">This information is part of the Modelica Standard Library maintained by the Modelica Association.</p>
<p>
Repeat equations or statements a specific number of times
</p>
<h4>Examples</h4>
<p>
<strong>for</strong> clauses are mostly used in algorithm sections, such as
</p>
<blockquote><pre>
    <strong>parameter</strong> Integer np=10;
    Real p[np], x, y;
  <strong>algorithm</strong>
     y := p[1];
     <strong>for</strong> i <strong>in</strong> 2:np <strong>loop</strong>   // i shall not be declared
        y := y*x + p[i];
     <strong>end for</strong>;
</pre></blockquote>
<p>
Other forms of the <strong>for</strong> condition:
</p>
<blockquote><pre>
    <strong>for</strong> i <strong>in</strong> 1:10 <strong>loop</strong>            // i takes the values 1,2,3,...,10
    <strong>for</strong> r <strong>in</strong> 1.0 : 1.5 : 5.5 <strong>loop</strong> // r takes the values 1.0, 2.5, 4.0, 5.5
    <strong>for</strong> i <strong>in</strong> {1,3,6,7} <strong>loop</strong>       // i takes the values 1, 3, 6, 7
</pre></blockquote>
<p>
In equation sections, <strong>for</strong> clauses are expanded at translation time
in order that symbolic transformations can be applied. Typically, a
<strong>for</strong> clause in an equation section is used on component arrays,
e.g., to connect elements of an array of components together:
</p>
<blockquote><pre>
    <strong>parameter</strong> Integer nR=10 "Number of resistances";
    Modelica.Electrical.Analog.Basic.Resistor R[nR];
  <strong>equation</strong>
     <strong>for</strong> i <strong>in</strong> 1:nR-1 <strong>loop</strong>
        <strong>connect</strong>(R[i].p R[i+1].n);   // 9 connect equations
     <strong>end for</strong>;
</pre></blockquote>
<h4>Syntax</h4>
<p>
In equation sections:
</p>
<blockquote><pre>
  <strong>for</strong> for_indices <strong>loop</strong>
     { equation ";" }
  <strong>end for</strong>;
  for_indices : for_index {"," for_index}
  for_index   : IDENT [ in expression ]
</pre></blockquote>
<p>
In algorithm sections:
</p>
<blockquote><pre>
  <strong>for</strong> for_indices <strong>loop</strong>
     { algorithm ";" }
  <strong>end for</strong>;
  for_indices : for_index {"," for_index}
  for_index   : IDENT [ in expression ]
</pre></blockquote>
<h4>Description</h4>
<p>A clause</p>
<blockquote><pre>    <strong>for</strong> IDENT <strong>in</strong> expression <strong>loop</strong></pre></blockquote>
<p>is one example of a for clause.</p>
<p>The expression of a for clause shall be a vector expression. It is
evaluated once for each for clause, and is evaluated in the scope
immediately enclosing the for clause. In an equation section,
the expression of a for clause shall be a parameter expression (in order
that the for clause can be expanded into equations during translation).
The loop-variable is in scope inside the loop-construct and shall not be assigned
to.</p>
<p><em>[Example:</em></p>
<p><em>The loop-variable may hide other variables as in the following example.
Using another name for the loop-variable
is, however, strongly recommended.</em></p>
<blockquote><pre>    <strong>constant</strong> Integer j=4;
    Real x[j];
  <strong>equation</strong>
    <strong>for</strong> j <strong>in</strong> 1:j <strong>loop</strong> // The loop-variable j takes the values 1,2,3,4
      x[j]=j; // Uses the loop-variable j
    <strong>end for</strong>;</pre></blockquote>
<p><em>]</em></p>
<h4>Several iterators</h4>
<p>The notation with several iterators is a shorthand notation for nested for-clauses (or reduction-expressions). For
for-clauses it can be expanded into the usual form by replacing each "," by <code>'loop for'</code> and adding extra <code>'end
for'</code>. For reduction-expressions it can be expanded into the usual form by replacing each ',' by <code>') for'</code> and
prepending the reduction-expression with <code>'function-name('</code>.</p>
<p><em>[Example:</em></p>
<blockquote><pre>    Real x[4,3];
  <strong>equation</strong>
    <strong>for</strong> j, i in 1:2 <strong>loop</strong>
      // The loop-variable j takes the values 1,2,3,4 (due to use)
      // The loop-variable i takes the values 1,2 (given range)
      x[j,i]=j+i;
    <strong>end for</strong>;</pre></blockquote>
<p><em>]</em></p>
</div>
</section>
</div>
</body>
</html>