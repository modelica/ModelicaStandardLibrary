<HTML>
<HEAD>
<TITLE>Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;transport properties for water according to IAPWS/IF97&quot;">
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Transport<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport"></A><A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97.html#Modelica.Media.Water.IF97_Utilities.BaseIF97"
>Modelica.Media.Water.IF97_Utilities.BaseIF97</A>.Transport</H2>
<B>transport properties for water according to IAPWS/IF97</B>
<P>
<H3>Information</H3>
<PRE></pre><h4>Package description</h4>
          <p></p>
          <h4>Package contents</h4>
          <p>
          <ul>
          <li>Function <b>visc_dTp</b> implements a function to compute the industrial formulation of the
          dynamic viscosity of water as a function of density and temperature.
          The details are described in the document <a href="IF97documentation/visc.pdf">visc.pdf</a>.</li>
          <li>Function <b>cond_dTp</b> implements a function to compute  the industrial formulation of the thermal conductivity of water as
          a function of density, temperature and pressure. <b>Important note</b>: Obviously only two of the three
          inputs are really needed, but using three inputs speeds up the computation and the three variables are known in most models anyways.
          The inputs d,T and p have to be consistent.
          The details are described in the document <a href="IF97documentation/surf.pdf">surf.pdf</a>.</li>
          <li>Function <b>surfaceTension</b> implements a function to compute the surface tension between vapour
          and liquid water as a function of temperature.
          The details are described in the document <a href="IF97documentation/thcond.pdf">thcond.pdf</a>.</li>
          </ul>
          </p>
          <h4>Version Info and Revision history
          </h4>
          <ul>
          <li>First implemented: <i>October, 2002</i>
          by <a href="http://www.control.lth.se/~hubertus/">Hubertus Tummescheit</a>
          </li>
          </ul>
          <address>Authors: Hubertus Tummescheit and Jonas Eborn<br>
          Lund University<br>
          Department of Automatic Control<br>
          Box 118, 22100 Lund, Sweden<br>
          email: hubertus@control.lth.se
          </address>
          <ul>
          <li>Initial version: October 2002</li>
          </ul>
          <pre>
          </PRE><P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.extraDerivs_phS.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTp"
>visc_dTp</A>
</TD><TD>dynamic viscosity eta(d,T,p), industrial formulation</TD></TR>
<TR><TD><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.extraDerivs_phS.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.cond_dTp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.cond_dTp"
>cond_dTp</A>
</TD><TD>Thermal conductivity lam(d,T,p) (industrial use version) only in one-phase region</TD></TR>
<TR><TD><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.extraDerivs_phS.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.surfaceTension" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.surfaceTension"
>surfaceTension</A>
</TD><TD>surface tension in region 4 between steam and water</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE visc_dTp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTpI.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTp" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTp"></A><A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport"
>Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport</A>.visc_dTp</H2>
<B>dynamic viscosity eta(d,T,p), industrial formulation</B><p>
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>d</TD><TD>&nbsp;</TD><TD>density [kg/m3]</TD></TR>
<TR><TD>&nbsp;</TD><TD>T</TD><TD>&nbsp;</TD><TD>temperature (K) [K]</TD></TR>
<TR><TD>&nbsp;</TD><TD>p</TD><TD>&nbsp;</TD><TD>pressure (only needed for region of validity) [Pa]</TD></TR>
<TR><TD>&nbsp;</TD><TD>phase</TD><TD>0</TD><TD>2 for two-phase, 1 for one-phase, 0 if not known</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>eta</TD><TD>dynamic viscosity [Pa.s]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> visc_dTp <font color="darkgreen">
  &quot;dynamic viscosity eta(d,T,p), industrial formulation&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> d <font color="darkgreen">&quot;density&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T <font color="darkgreen">&quot;temperature (K)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> p <font color="darkgreen">&quot;pressure (only needed for region of validity)&quot;</font>;
  <font color="blue">input </font>Integer phase=0 <font color="darkgreen">&quot;2 for two-phase, 1 for one-phase, 0 if not known&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> eta <font color="darkgreen">&quot;dynamic viscosity&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">constant </font>Real n0=1.0 <font color="darkgreen">&quot;viscosity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n1=0.978197 <font color="darkgreen">&quot;viscosity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n2=0.579829 <font color="darkgreen">&quot;viscosity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n3=-0.202354 <font color="darkgreen">&quot;viscosity coefficient&quot;</font>;
  <font color="blue">constant </font>Real[42] nn=<font color="red">array</font>(.5132047, 0.3205656, 0.0, 0.0, -0.7782567,
      0.1885447, 0.2151778, 0.7317883, 1.241044, 1.476783, 0.0, 0.0, -0.2818107,
       -1.070786, -1.263184, 0.0, 0.0, 0.0, 0.1778064, 0.460504,
      0.2340379, -0.4924179, 0.0, 0.0, -0.0417661, 0.0, 0.0, 0.1600435,
      0.0, 0.0, 0.0, -0.01578386, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, -0.003629481,
       0.0, 0.0) <font color="darkgreen">&quot;viscosity coefficients&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rhostar=317.763 <font color="darkgreen">&quot;scaling density&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> etastar=55.071e-6 <font color="darkgreen">&quot;scaling viscosity&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> tstar=647.226 <font color="darkgreen">&quot;scaling temperature&quot;</font>;
  Integer i <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Integer j <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real delta <font color="darkgreen">&quot;dimensionless density&quot;</font>;
  Real deltam1 <font color="darkgreen">&quot;dimensionless density&quot;</font>;
  Real tau <font color="darkgreen">&quot;dimensionless temperature&quot;</font>;
  Real taum1 <font color="darkgreen">&quot;dimensionless temperature&quot;</font>;
  Real Psi0 <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real Psi1 <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real tfun <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real rhofun <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real Tc=T - 273.15 <font color="darkgreen">&quot;Celsius temperature for region check&quot;</font>;
  <font color="darkgreen">//      Integer region &quot;region of IF97&quot;;</font>
<font color="blue">algorithm </font>
  <font color="darkgreen">//      if phase == 0 then</font>
  <font color="darkgreen">//        region := BaseIF97.Regions.region_dT(d,T,0);</font>
  <font color="darkgreen">//      end if;</font>
  <font color="darkgreen">//      if phase == 2 then</font>
  <font color="darkgreen">//        region := 4;</font>
  <font color="darkgreen">//      end if;</font>
  <font color="darkgreen">// assert(phase &lt;&gt; 2, &quot;viscosity can not be computed for two-phase states&quot;);</font>
  delta := d/rhostar;
  <font color="red">assert</font>(d &gt; triple.dvtriple,
    &quot;IF97 medium function visc_dTp for viscosity called with too low density\n&quot; +
    &quot;d = &quot; +<font color="red"> String</font>(d) + &quot; &lt;= &quot; +<font color="red"> String</font>(triple.dvtriple) + &quot; (triple point density)&quot;);
  <font color="red">assert</font>((p &lt;= 500e6<font color="blue"> and </font>(Tc &gt;= 0.0<font color="blue"> and </font>Tc &lt;= 150))<font color="blue"> or </font>(p &lt;= 350e6<font color="blue"> and </font>(
    Tc &gt; 150.0<font color="blue"> and </font>Tc &lt;= 600))<font color="blue"> or </font>(p &lt;= 300e6<font color="blue"> and </font>(Tc &gt; 600.0<font color="blue"> and </font>Tc &lt;=
    900)),
    &quot;IF97 medium function visc_dTp: viscosity computed outside the range\n&quot; +
    &quot;of validity of the IF97 formulation: p = &quot; +<font color="red"> String</font>(p) + &quot; Pa, Tc = &quot; +<font color="red"> String</font>(Tc) + &quot; K&quot;);
  deltam1 := delta - 1.0;
  tau := tstar/T;
  taum1 := tau - 1.0;
  Psi0 := 1/(n0 + (n1 + (n2 + n3*tau)*tau)*tau)/(tau^0.5);
  Psi1 := 0.0;
  tfun := 1.0;
  <font color="blue">for </font>i<font color="blue"> in </font>1:6<font color="blue"> loop</font>
    <font color="blue">if </font>(i &lt;&gt; 1)<font color="blue"> then</font>
      tfun := tfun*taum1;
    <font color="blue">end if</font>;
    rhofun := 1.;
    <font color="blue">for </font>j<font color="blue"> in </font>0:6<font color="blue"> loop</font>
      <font color="blue">if </font>(j &lt;&gt; 0)<font color="blue"> then</font>
        rhofun := rhofun*deltam1;
      <font color="blue">end if</font>;
      Psi1 := Psi1 + nn[i + j*6]*tfun*rhofun;
    <font color="blue">end for</font>;
  <font color="blue">end for</font>;
  eta := etastar*Psi0*<font color="red">Modelica.Math.exp</font>(delta*Psi1);
<font color="blue">end </font>visc_dTp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE cond_dTp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTpI.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.cond_dTp" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.cond_dTp"></A><A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport"
>Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport</A>.cond_dTp</H2>
<B>Thermal conductivity lam(d,T,p) (industrial use version) only in one-phase region</B><p>
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>d</TD><TD>&nbsp;</TD><TD>density [kg/m3]</TD></TR>
<TR><TD>&nbsp;</TD><TD>T</TD><TD>&nbsp;</TD><TD>temperature (K) [K]</TD></TR>
<TR><TD>&nbsp;</TD><TD>p</TD><TD>&nbsp;</TD><TD>pressure [Pa]</TD></TR>
<TR><TD>&nbsp;</TD><TD>phase</TD><TD>0</TD><TD>2 for two-phase, 1 for one-phase, 0 if not known</TD></TR>
<TR><TD>&nbsp;</TD><TD>industrialMethod</TD><TD>true</TD><TD>if true, the industrial method is used, otherwise the scientific one</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>lambda</TD><TD>thermal conductivity [W/(m.K)]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> cond_dTp <font color="darkgreen">
  &quot;Thermal conductivity lam(d,T,p) (industrial use version) only in one-phase region&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> d <font color="darkgreen">&quot;density&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T <font color="darkgreen">&quot;temperature (K)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> p <font color="darkgreen">&quot;pressure&quot;</font>;
  <font color="blue">input </font>Integer phase=0 <font color="darkgreen">&quot;2 for two-phase, 1 for one-phase, 0 if not known&quot;</font>;
  <font color="blue">input </font>Boolean industrialMethod=true <font color="darkgreen">
    &quot;if true, the industrial method is used, otherwise the scientific one&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>SI.ThermalConductivity</A> lambda <font color="darkgreen">&quot;thermal conductivity&quot;</font>;
<font color="blue">protected </font>
  Integer region(min=1, max=5) <font color="darkgreen">&quot;IF97 region, valid values:1,2,3, and 5&quot;</font>;
  <font color="blue">constant </font>Real n0=1.0 <font color="darkgreen">&quot;conductivity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n1=6.978267 <font color="darkgreen">&quot;conductivity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n2=2.599096 <font color="darkgreen">&quot;conductivity coefficient&quot;</font>;
  <font color="blue">constant </font>Real n3=-0.998254 <font color="darkgreen">&quot;conductivity coefficient&quot;</font>;
  <font color="blue">constant </font>Real[30] nn=<font color="red">array</font>(1.3293046, 1.7018363, 5.2246158, 8.7127675,
      -1.8525999, -0.40452437, -2.2156845, -10.124111, -9.5000611,
      0.9340469, 0.2440949, 1.6511057, 4.9874687, 4.3786606, 0.0,
      0.018660751, -0.76736002, -0.27297694, -0.91783782, 0.0, -0.12961068,
       0.37283344, -0.43083393, 0.0, 0.0, 0.044809953, -0.1120316,
      0.13333849, 0.0, 0.0) <font color="darkgreen">&quot;conductivity coefficient&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>SI.ThermalConductivity</A> lamstar=0.4945 <font color="darkgreen">&quot;scaling conductivity&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rhostar=317.763 <font color="darkgreen">&quot;scaling density&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> tstar=647.226 <font color="darkgreen">&quot;scaling temperature&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> pstar=22.115e6 <font color="darkgreen">&quot;scaling pressure&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> etastar=55.071e-6 <font color="darkgreen">&quot;scaling viscosity&quot;</font>;
  Integer i <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Integer j <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real delta <font color="darkgreen">&quot;dimensionless density&quot;</font>;
  Real tau <font color="darkgreen">&quot;dimensionless temperature&quot;</font>;
  Real deltam1 <font color="darkgreen">&quot;dimensionless density&quot;</font>;
  Real taum1 <font color="darkgreen">&quot;dimensionless temperature&quot;</font>;
  Real Lam0 <font color="darkgreen">&quot;part of thermal conductivity&quot;</font>;
  Real Lam1 <font color="darkgreen">&quot;part of thermal conductivity&quot;</font>;
  Real Lam2 <font color="darkgreen">&quot;part of thermal conductivity&quot;</font>;
  Real tfun <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real rhofun <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real dpitau <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real ddelpi <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  Real d2 <font color="darkgreen">&quot;auxiliary variable&quot;</font>;
  <A HREF="Modelica_Media_Common.html#Modelica.Media.Common.GibbsDerivs"
>Modelica.Media.Common.GibbsDerivs</A> g <font color="darkgreen">
    &quot;dimensionless Gibbs funcion and dervatives wrt pi and tau&quot;</font>;
  <A HREF="Modelica_Media_Common.html#Modelica.Media.Common.HelmholtzDerivs"
>Modelica.Media.Common.HelmholtzDerivs</A> f <font color="darkgreen">
    &quot;dimensionless Helmholtz function and dervatives wrt delta and tau&quot;</font>;
  Real Tc=T - 273.15 <font color="darkgreen">&quot;Celsius temperature for region check&quot;</font>;
  Real Chi <font color="darkgreen">&quot;symmetrized compressibility&quot;</font>;
  <font color="darkgreen">// slightly different variables for industrial use</font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rhostar2=317.7 <font color="darkgreen">&quot;Reference density&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Tstar2=647.25 <font color="darkgreen">&quot;Reference temperature&quot;</font>;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>SI.ThermalConductivity</A> lambdastar=1 <font color="darkgreen">&quot;Reference thermal conductivity&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> TREL=T/Tstar2 <font color="darkgreen">&quot;Relative temperature&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rhoREL=d/rhostar2 <font color="darkgreen">&quot;Relative density&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.ThermalConductivity"
>SI.ThermalConductivity</A> lambdaREL <font color="darkgreen">&quot;Relative thermal conductivity&quot;</font>;
  Real deltaTREL <font color="darkgreen">&quot;Relative temperature increment&quot;</font>;
  <font color="blue">constant </font>Real[:] C={0.642857,-4.11717,-6.17937,0.00308976,0.0822994,
      10.0932};
  <font color="blue">constant </font>Real[:] dpar={0.0701309,0.0118520,0.00169937,-1.0200};
  <font color="blue">constant </font>Real[:] b={-0.397070,0.400302,1.060000};
  <font color="blue">constant </font>Real[:] B={-0.171587,2.392190};
  <font color="blue">constant </font>Real[:] a={0.0102811,0.0299621,0.0156146,-0.00422464};
  Real Q;
  Real S;
  Real lambdaREL2 <font color="darkgreen">
    &quot;function, part of the interpolating equation of the thermal conductivity&quot;</font>;
  Real lambdaREL1 <font color="darkgreen">
    &quot;function, part of the interpolating equation of the thermal conductivity&quot;</font>;
  Real lambdaREL0 <font color="darkgreen">
    &quot;function, part of the interpolating equation of the thermal conductivity&quot;</font>;
<font color="blue">algorithm </font>
  <font color="darkgreen">// region := BaseIF97.Regions.region_dT(d,T,phase);</font>
  <font color="darkgreen">// simplified region check, assuming that calling arguments are legal</font>
  <font color="darkgreen">//  assert(phase &lt;&gt; 2,</font>
  <font color="darkgreen">//   &quot;thermalConductivity can not be called with 2-phase inputs!&quot;);</font>
  <font color="red">assert</font>(d &gt; triple.dvtriple,
    &quot;IF97 medium function cond_dTp called with too low density\n&quot; +
    &quot;d = &quot; +<font color="red"> String</font>(d) + &quot; &lt;= &quot; +<font color="red"> String</font>(triple.dvtriple) + &quot; (triple point density)&quot;);
  <font color="red">assert</font>((p &lt;= 100e6<font color="blue"> and </font>(Tc &gt;= 0.0<font color="blue"> and </font>Tc &lt;= 500))<font color="blue"> or </font>
  (p &lt;= 70e6<font color="blue"> and </font>(Tc &gt; 500.0<font color="blue"> and </font>Tc &lt;= 650))<font color="blue"> or </font>
  (p &lt;= 40e6<font color="blue"> and </font>(Tc &gt; 650.0<font color="blue"> and </font>Tc &lt;= 800)),
  &quot;IF97 medium function cond_dTp: thermal conductivity computed outside the range\n&quot; +
  &quot;of validity of the IF97 formulation: p = &quot; +<font color="red"> String</font>(p) + &quot; Pa, Tc = &quot; +<font color="red"> String</font>(Tc) + &quot; K&quot;);
  <font color="blue">if </font>industrialMethod == true<font color="blue"> then</font>
    deltaTREL :=<font color="red"> abs</font>(TREL - 1) + C[4];
    Q := 2 + C[5]/deltaTREL^(3/5);
    <font color="blue">if </font>TREL &gt;= 1<font color="blue"> then</font>
      S := 1/deltaTREL;
    <font color="blue">else</font>
      S := C[6]/deltaTREL^(3/5);
    <font color="blue">end if</font>;
    lambdaREL2 := (dpar[1]/TREL^10 + dpar[2])*rhoREL^(9/5)*<font color="red">Modelica.Math.exp</font>(C[1]*(1 - rhoREL^(14
      /5))) + dpar[3]*S*rhoREL^Q*<font color="red">Modelica.Math.exp</font>((Q/(1 + Q))*(1 -
      rhoREL^(1 + Q))) + dpar[4]*<font color="red">Modelica.Math.exp</font>(C[2]*TREL^(3/2) + C[3]
      /rhoREL^5);
    lambdaREL1 := b[1] + b[2]*rhoREL + b[3]*<font color="red">Modelica.Math.exp</font>(B[1]*(
      rhoREL + B[2])^2);
    lambdaREL0 := TREL^(1/2)*<font color="red">sum</font>(a[i]*TREL^(i - 1) <font color="blue">for </font>i<font color="blue"> in </font>1:4);
    lambdaREL := lambdaREL0 + lambdaREL1 + lambdaREL2;
    lambda := lambdaREL*lambdastar;
  <font color="blue">else</font>
    <font color="blue">if </font>p &lt; data.PLIMIT4A<font color="blue"> then</font>
      <font color="darkgreen">//regions are 1 or 2,</font>
      <font color="blue">if </font>d &gt; data.DCRIT<font color="blue"> then</font>
 region := 1;
      <font color="blue">else</font>
 region := 2;
      <font color="blue">end if</font>;
    <font color="blue">else</font>
      <font color="darkgreen">//region is 3, or illegal</font>
      <font color="red">assert</font>(false,
        &quot;the scientific method works only for temperature up to 623.15 K&quot;);
    <font color="blue">end if</font>;
    tau := tstar/T;
    delta := d/rhostar;
    deltam1 := delta - 1.0;
    taum1 := tau - 1.0;
    Lam0 := 1/(n0 + (n1 + (n2 + n3*tau)*tau)*tau)/(tau^0.5);
    Lam1 := 0.0;
    tfun := 1.0;
    <font color="blue">for </font>
 i<font color="blue"> in </font>1:5<font color="blue"> loop</font>
      <font color="blue">if </font>(i &lt;&gt; 1)<font color="blue"> then</font>
 tfun := tfun*taum1;
      <font color="blue">end if</font>;
      rhofun := 1.0;
      <font color="blue">for </font>
   j<font color="blue"> in </font>0:5<font color="blue"> loop</font>
 <font color="blue">if </font>(j &lt;&gt; 0)<font color="blue"> then</font>
          rhofun := rhofun*deltam1;
 <font color="blue">end if</font>;
 Lam1 := Lam1 + nn[i + j*5]*tfun*rhofun;
      <font color="blue">end for</font>;
    <font color="blue">end for</font>;
    <font color="blue">if </font>(region == 1)<font color="blue"> then</font>
      g :=<font color="red"> Basic.g1</font>(p, T);
      <font color="darkgreen">// dp/dT @ cont d = -g.p/g.T*(g.gpi - g.tau*g.gtaupi)/(g.gpipi*g.pi);</font>
      dpitau := -tstar/pstar*(data.PSTAR1*(g.gpi - data.TSTAR1/T*g.gtaupi)
        /g.gpipi/T);
      ddelpi := -pstar/rhostar*data.RH2O/data.PSTAR1/data.PSTAR1*T*d*d*g.
        gpipi;
      Chi := delta*ddelpi;
    <font color="blue">elseif </font>(region == 2)<font color="blue"> then</font>
      g :=<font color="red"> Basic.g2</font>(p, T);
      dpitau := -tstar/pstar*(data.PSTAR2*(g.gpi - data.TSTAR2/T*g.gtaupi)
        /g.gpipi/T);
      ddelpi := -pstar/rhostar*data.RH2O/data.PSTAR2/data.PSTAR2*T*d*d*g.
        gpipi;
      Chi := delta*ddelpi;
      <font color="darkgreen">//         elseif (region == 3) then</font>
      <font color="darkgreen">//           f := Basic.f3(T, d);</font>
      <font color="darkgreen">//            dpitau := tstar/pstar*(f.R*f.d*f.delta*(f.fdelta - f.tau*f.fdeltatau));</font>
      <font color="darkgreen">//           ddelpi := pstar*d*d/(rhostar*p*p)/(f.R*f.T*f.delta*(2.0*f.fdelta + f.delta*f.fdeltadelta));</font>
      <font color="darkgreen">//    Chi := delta*ddelpi;</font>
    <font color="blue">else</font>
      <font color="red">assert</font>(false,
        &quot;thermal conductivity can only be called in the one-phase regions below 623.15 K\n&quot; +
        &quot;(p = &quot; +<font color="red"> String</font>(p) + &quot; Pa, T = &quot; +<font color="red"> String</font>(T) + &quot; K, region = &quot; +<font color="red"> String</font>(region) + &quot;)&quot;);
    <font color="blue">end if</font>;
    taum1 := 1/tau - 1;
    d2 := deltam1*deltam1;
    Lam2 := 0.0013848*etastar/<font color="red">visc_dTp</font>(d, T, p)/(tau*tau*delta*delta)*
      dpitau*dpitau*<font color="red">max</font>(Chi, Modelica.Constants.small)^0.4678*(delta)^0.5
      *<font color="red">Modelica.Math.exp</font>(-18.66*taum1*taum1 - d2*d2);
    lambda := lamstar*(Lam0*<font color="red">Modelica.Math.exp</font>(delta*Lam1) + Lam2);
  <font color="blue">end if</font>;
<font color="blue">end </font>cond_dTp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE surfaceTension<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.visc_dTpI.png" ALT="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.surfaceTension" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport.surfaceTension"></A><A HREF="Modelica_Media_Water_IF97_Utilities_BaseIF97_Transport.html#Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport"
>Modelica.Media.Water.IF97_Utilities.BaseIF97.Transport</A>.surfaceTension</H2>
<B>surface tension in region 4 between steam and water</B><p>
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>T</TD><TD>&nbsp;</TD><TD>temperature (K) [K]</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>&nbsp;</TD><TD>sigma</TD><TD>surface tension in SI units [N/m]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> surfaceTension <font color="darkgreen">
  &quot;surface tension in region 4 between steam and water&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T <font color="darkgreen">&quot;temperature (K)&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SurfaceTension"
>SI.SurfaceTension</A> sigma <font color="darkgreen">&quot;surface tension in SI units&quot;</font>;
<font color="blue">protected </font>
  Real Theta <font color="darkgreen">&quot;dimensionless temperature&quot;</font>;
<font color="blue">algorithm </font>
  Theta :=<font color="red"> min</font>(1.0,T/data.TCRIT);
  sigma := 235.8e-3*(1 - Theta)^1.256*(1 - 0.625*(1 - Theta));
<font color="blue">end </font>surfaceTension;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Tue Mar 28 11:40:32 2006.
</address></BODY>
</HTML>
