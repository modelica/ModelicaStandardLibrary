<HTML>
<HEAD>
<TITLE>Modelica.Media.Examples.SolveOneNonlinearEquation</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Demonstrate how to solve one non-linear algebraic equation in one unknown&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SolveOneNonlinearEquation<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="e9417f68c055debdonlinearEquation"></A><A HREF="Modelica_Media_Examples.html#Modelica.Media.Examples"
>Modelica.Media.Examples</A>.SolveOneNonlinearEquation</H2>
<B>Demonstrate how to solve one non-linear algebraic equation in one unknown</B>
<P>
<H3>Information</H3>
<PRE></pre>
<p>
This package demonstrates how to solve one non-linear algebraic
equation in one unknown with function
Modelica.Media.Common.OneNonLinearEquation.
</p>

<pre></PRE><P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Media.Examples.Tests.MediaTestModels.Air.SimpleAirS.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sine" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#938992ae49953250ion.Inverse_sine"
>Inverse_sine</A>
</TD><TD>Solve y = A*sin(w*x) for x, given y</TD></TR>
<TR><TD><IMG SRC="Modelica.Media.Examples.Tests.MediaTestModels.Air.SimpleAirS.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sh_T" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#938947e749953041ion.Inverse_sh_T"
>Inverse_sh_T</A>
</TD><TD>Solve h = h_T(T), s = s_T(T) for T, if h or s is given for ideal gas NASA</TD></TR>
<TR><TD><IMG SRC="Modelica.Media.Examples.Tests.MediaTestModels.Air.SimpleAirS.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.InverseIncompressible_sh_T" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#bb869ad6c26cbf4dompressible_sh_T"
>InverseIncompressible_sh_T</A>
</TD><TD>inverse computation for incmpressible media</TD></TR>
<TR><TD><IMG SRC="Modelica.Media.Examples.Tests.MediaTestModels.Air.SimpleAirS.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sh_TX" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#7f3fcb8d3aa60871on.Inverse_sh_TX"
>Inverse_sh_TX</A>
</TD><TD>Solve h = h_TX(TX) for T, if h is given for ideal gas NASA</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Inverse_sine<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sineI.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sine" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="938992ae49953250ion.Inverse_sine"></A><A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#e9417f68c055debdonlinearEquation"
>Modelica.Media.Examples.SolveOneNonlinearEquation</A>.Inverse_sine</H2>
<B>Solve y = A*sin(w*x) for x, given y</B><p>
<H3>Information</H3>
<PRE></pre>
<p>
This models solves the following non-linear equation
</p>

<pre>
   y = A*sin(w*x); -> determine x for given y
</pre>

<p>
Translate model "Inverse_sine"
and simulate for 0 sec. The result is printed to the
output window.
</p>

<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y_zero</TD><TD>0.5</TD><TD>Desired value of A*sin(w*x)</TD></TR>
<TR><TD>Real</TD><TD>x_min</TD><TD>-1.7</TD><TD>Minimum value of x_zero</TD></TR>
<TR><TD>Real</TD><TD>x_max</TD><TD>1.7</TD><TD>Maximum value of x_zero</TD></TR>
<TR><TD>Real</TD><TD>A</TD><TD>1</TD><TD>&nbsp;</TD></TR>
<TR><TD>Real</TD><TD>w</TD><TD>1</TD><TD>&nbsp;</TD></TR>
<TR><TD>f_nonlinear_Data</TD><TD>data</TD><TD>Inverse_sine_definition.f_no...</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Inverse_sine <font color="darkgreen">&quot;Solve y = A*sin(w*x) for x, given y&quot;</font>
   <font color="blue">import </font><A HREF="Modelica_Utilities_Streams.html#Modelica.Utilities.Streams.print"
>Modelica.Utilities.Streams.print</A>;
   <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

   <font color="blue">parameter </font>Real y_zero = 0.5 <font color="darkgreen">&quot;Desired value of A*sin(w*x)&quot;</font>;
   <font color="blue">parameter </font>Real x_min = -1.7 <font color="darkgreen">&quot;Minimum value of x_zero&quot;</font>;
   <font color="blue">parameter </font>Real x_max = 1.7 <font color="darkgreen">&quot;Maximum value of x_zero&quot;</font>;
   <font color="blue">parameter </font>Real A = 1;
   <font color="blue">parameter </font>Real w = 1;
   <font color="blue">parameter </font>Inverse_sine_definition.f_nonlinear_Data data=
             <font color="red">Inverse_sine_definition.f_nonlinear_Data</font>(A=A, w=w);
   Real x_zero <font color="darkgreen">&quot;y_zero = A*sin(w*x_zero)&quot;</font>;

<font color="blue">encapsulated </font><font color="blue">package</font> Inverse_sine_definition <font color="darkgreen">
    &quot;Define sine as non-linear equation to be solved&quot;</font>
     <font color="blue">import </font><A HREF="#Modelica"
>Modelica</A>;
   <font color="blue">extends </font><A HREF="Modelica_Media_Common_OneNonLinearEquation.html#f587a5c51ff84fd4onLinearEquation"
>Modelica.Media.Common.OneNonLinearEquation</A>;

   <font color="blue">redeclare </font><font color="blue">record</font> <font color="blue">extends </font>f_nonlinear_Data
      Real A;
      Real w;
   <font color="blue">end </font>f_nonlinear_Data;

   <font color="blue">redeclare </font><font color="blue">function</font> <font color="blue">extends </font>f_nonlinear
   <font color="blue">algorithm </font>
       y := f_nonlinear_data.A*<font color="red">Modelica.Math.sin</font>(f_nonlinear_data.w*x);
   <font color="blue">end </font>f_nonlinear;

   <font color="darkgreen">// Dummy definition has to be added for current Dymola (advice from Hans)</font>
   <font color="blue">redeclare </font><font color="blue">function</font> <font color="blue">extends </font>solve
   <font color="blue">end </font>solve;
<font color="blue">end </font>Inverse_sine_definition;

<font color="blue">equation </font>
   x_zero =<font color="red"> Inverse_sine_definition.solve</font>(y_zero, x_min, x_max, f_nonlinear_data=data);

  <font color="red"> print</font>(&quot;x_zero = &quot; +<font color="red"> String</font>(x_zero) + &quot;, y_zero = &quot; +<font color="red"> String</font>(y_zero) + &quot;, A*sin(w*x_zero) = &quot; +
         <font color="red">String</font>(data.A*<font color="red">Modelica.Math.sin</font>(data.w*x_zero)));
<font color="blue">end </font>Inverse_sine;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Inverse_sh_T<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sineI.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sh_T" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="938947e749953041ion.Inverse_sh_T"></A><A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#e9417f68c055debdonlinearEquation"
>Modelica.Media.Examples.SolveOneNonlinearEquation</A>.Inverse_sh_T</H2>
<B>Solve h = h_T(T), s = s_T(T) for T, if h or s is given for ideal gas NASA</B><p>
<H3>Information</H3>
<PRE></pre>
                               <pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_min</TD><TD>300</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_max</TD><TD>500</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>p</TD><TD>1.0e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_min</TD><TD>Medium.h_T(Medium.data, T_min)</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_max</TD><TD>Medium.h_T(Medium.data, T_max)</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_min</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_max</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Inverse_sh_T <font color="darkgreen">
  &quot;Solve h = h_T(T), s = s_T(T) for T, if h or s is given for ideal gas NASA&quot;</font>
   <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
   <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

   <font color="blue">replaceable </font><font color="blue">package</font> Medium = <A HREF="Modelica_Media_Air_DryAirNasa.html#Modelica.Media.Air.DryAirNasa"
>Modelica.Media.Air.DryAirNasa</A>
         <font color="blue">extends </font>Modelica.Media.IdealGases.Common.SingleGasNasa <font color="darkgreen">&quot;Medium model&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_min = 300;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_max = 500;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> p = 1.0e5;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_min =<font color="red"> Medium.h_T</font>(Medium.data,T_min);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_max =<font color="red"> Medium.h_T</font>(Medium.data,T_max);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_min =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p,T_min));
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_max =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p,T_max));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h1 <font color="darkgreen">&quot;Pre-defined specific enthalpy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h2 <font color="darkgreen">&quot;Specific enthalpy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s1 <font color="darkgreen">&quot;Pre-defined specific entropy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s2 <font color="darkgreen">&quot;Specific entropy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Th <font color="darkgreen">&quot;Temperature computed from h1&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Ts <font color="darkgreen">&quot;Temperature computed from s1&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> timeUnit = 1.0;

<font color="blue">equation </font>
  <font color="darkgreen"> // Define specific enthalpy</font>
   h1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>h_min<font color="blue"> else </font>
        <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>h_max<font color="blue"> else </font>
           h_min + time/timeUnit*(h_max - h_min);
   s1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>s_min<font color="blue"> else </font>
        <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>s_max<font color="blue"> else </font>
           s_min + time/timeUnit*(s_max - s_min);

  <font color="darkgreen"> // Solve for temperature</font>
   Th =<font color="red"> Medium.temperature_phX</font>(p, h1,<font color="red"> fill</font>(0.0,0));
   Ts =<font color="red"> Medium.temperature_psX</font>(p, s1,<font color="red"> fill</font>(0.0,0));

  <font color="darkgreen"> // Check (h2 must be identical to h1)</font>
   h2 =<font color="red"> Medium.specificEnthalpy_pTX</font>(p, Th,<font color="red"> fill</font>(0.0,0));
   s2 =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p,Ts));
<font color="blue">end </font>Inverse_sh_T;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE InverseIncompressible_sh_T<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sineI.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.InverseIncompressible_sh_T" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="bb869ad6c26cbf4dompressible_sh_T"></A><A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#e9417f68c055debdonlinearEquation"
>Modelica.Media.Examples.SolveOneNonlinearEquation</A>.InverseIncompressible_sh_T</H2>
<B>inverse computation for incmpressible media</B><p>
<H3>Information</H3>
<PRE></pre>

                               <pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_min</TD><TD>Medium.T_min</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_max</TD><TD>Medium.T_max</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>p</TD><TD>1.0e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_min</TD><TD>Medium.h_T(Medium.T_min)</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_max</TD><TD>Medium.h_T(Medium.T_max)</TD><TD>[J/kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_min</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_max</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> InverseIncompressible_sh_T <font color="darkgreen">
  &quot;inverse computation for incmpressible media&quot;</font>
   <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
   <font color="blue">import </font>Cv = <A HREF="Modelica_SIunits_Conversions.html#Modelica.SIunits.Conversions"
>Modelica.SIunits.Conversions</A>;
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

  <font color="blue">replaceable </font><font color="blue">package</font> Medium =
       <A HREF="Modelica_Media_Incompressible_Examples_Glycol47.html#fecd8cb14881f2c7xamples.Glycol47"
>Modelica.Media.Incompressible.Examples.Glycol47</A> <font color="darkgreen">&quot;Medium model&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_min = Medium.T_min;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_max = Medium.T_max;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> p = 1.0e5;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_min =<font color="red"> Medium.h_T</font>(Medium.T_min);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_max =<font color="red"> Medium.h_T</font>(Medium.T_max);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_min =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p,T_min));
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_max =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p,T_max));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h1 <font color="darkgreen">&quot;Pre-defined specific enthalpy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h2 <font color="darkgreen">&quot;Specific enthalpy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s1 <font color="darkgreen">&quot;Pre-defined specific entropy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s2 <font color="darkgreen">&quot;Specific entropy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Th <font color="darkgreen">&quot;Temperature computed from h1&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Ts <font color="darkgreen">&quot;Temperature computed from s1&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> timeUnit = 1.0;

<font color="blue">equation </font>
  <font color="darkgreen">// Define specific enthalpy</font>
  h1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>h_min<font color="blue"> else </font>
    <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>h_max<font color="blue"> else </font>
    h_min + time/timeUnit*(h_max - h_min);
  s1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>s_min<font color="blue"> else </font>
    <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>s_max<font color="blue"> else </font>
    s_min + time/timeUnit*(s_max - s_min);

  <font color="darkgreen">// Solve for temperature</font>
  Th =<font color="red"> Medium.temperature_phX</font>(p, h1,<font color="red"> fill</font>(0.0,0));
  Ts =<font color="red"> Medium.temperature_psX</font>(p, s1,<font color="red"> fill</font>(0.0,0));

  <font color="darkgreen">// Check (h2 must be identical to h1)</font>
  h2 =<font color="red"> Medium.specificEnthalpy_pTX</font>(p, Th,<font color="red"> fill</font>(0.0,0));
  s2 =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pT</font>(p, Ts));
<font color="blue">end </font>InverseIncompressible_sh_T;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Inverse_sh_TX<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sineI.png" ALT="Modelica.Media.Examples.SolveOneNonlinearEquation.Inverse_sh_TX" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="7f3fcb8d3aa60871on.Inverse_sh_TX"></A><A HREF="Modelica_Media_Examples_SolveOneNonlinearEquation.html#e9417f68c055debdonlinearEquation"
>Modelica.Media.Examples.SolveOneNonlinearEquation</A>.Inverse_sh_TX</H2>
<B>Solve h = h_TX(TX) for T, if h is given for ideal gas NASA</B><p>
<H3>Information</H3>
<PRE></pre>

<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_min</TD><TD>300</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_max</TD><TD>500</TD><TD>[K]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>p</TD><TD>1.0e5</TD><TD>[Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_min</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SpecificEntropy</A></TD><TD>s_max</TD><TD>Medium.specificEntropy(Mediu...</TD><TD>[J/(kg.K)]</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Inverse_sh_TX <font color="darkgreen">
  &quot;Solve h = h_TX(TX) for T, if h is given for ideal gas NASA&quot;</font>
   <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
   <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;

   <font color="blue">replaceable </font><font color="blue">package</font> Medium =
       <A HREF="Modelica_Media_IdealGases_MixtureGases_FlueGasLambdaOnePlus.html#0ca5ca13f7020cf2GasLambdaOnePlus"
>Modelica.Media.IdealGases.MixtureGases.FlueGasLambdaOnePlus</A>
         <font color="blue">extends </font>Modelica.Media.IdealGases.Common.MixtureGasNasa <font color="darkgreen">&quot;Medium model&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_min = 300;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> T_max = 500;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> p = 1.0e5;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_min =<font color="red"> Medium.h_TX</font>(T_min,X);
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h_max =<font color="red"> Medium.h_TX</font>(T_max,X);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_min =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pTX</font>(p,T_min,Medium.reference_X));
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s_max =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pTX</font>(p,T_max,Medium.reference_X));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h1 <font color="darkgreen">&quot;Pre-defined specific enthalpy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEnthalpy"
>SI.SpecificEnthalpy</A> h2 <font color="darkgreen">&quot;Specific enthalpy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s1 <font color="darkgreen">&quot;Pre-defined specific entropy&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.SpecificEntropy"
>SI.SpecificEntropy</A> s2 <font color="darkgreen">&quot;Specific entropy computed from T (= h1 required)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Th <font color="darkgreen">&quot;Temperature computed from h1&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>SI.Temperature</A> Ts <font color="darkgreen">&quot;Temperature computed from s1&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFraction"
>SI.MassFraction</A>[4] X <font color="darkgreen">&quot;mass fraction vector&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>SI.Time</A> timeUnit = 1.0;

<font color="blue">equation </font>
  X = Medium.reference_X;
  <font color="darkgreen"> // Define specific enthalpy</font>
   h1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>h_min<font color="blue"> else </font>
        <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>h_max<font color="blue"> else </font>
           h_min + time/timeUnit*(h_max - h_min);
   s1 = <font color="blue">if </font>time &lt; 0<font color="blue"> then </font>s_min<font color="blue"> else </font>
        <font color="blue">if </font>time &gt; 1<font color="blue"> then </font>s_max<font color="blue"> else </font>
           s_min + time/timeUnit*(s_max - s_min);

  <font color="darkgreen"> // Solve for temperature</font>
   Th =<font color="red"> Medium.temperature_phX</font>(p, h1, X);
   Ts =<font color="red"> Medium.temperature_psX</font>(p, s1, X);

  <font color="darkgreen"> // Check (h2 must be identical to h1)</font>
   h2 =<font color="red"> Medium.specificEnthalpy_pTX</font>(p, Th, X);
   s2 =<font color="red"> Medium.specificEntropy</font>(<font color="red">Medium.setState_pTX</font>(p,Ts,X));
<font color="blue">end </font>Inverse_sh_TX;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Fri Sep 07 19:13:56 2007.
</address></BODY>
</HTML>
