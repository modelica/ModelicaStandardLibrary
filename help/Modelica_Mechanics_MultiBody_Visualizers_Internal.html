<HTML>
<HEAD><META name="HTML-Generator" content="Dymola"><TITLE>Modelica</TITLE></HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Internal<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody.Visualizers.Internal"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers"
>Modelica.Mechanics.MultiBody.Visualizers</A>.Internal</H2>
<B>Visualizers that will be replaced by improved versions in the future (don't use them)</B>
<P>
<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines"
><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLinesI.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines" WIDTH=80  HEIGHT=80 ></A>
<A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Internal.LinesI.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines" WIDTH=80  HEIGHT=80 ></A>
<P><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines"
>FixedLines</A>
</TD><TD>Visualizing a set of lines as cylinders (e.g., used to display characters)</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
>Lines</A>
</TD><TD>Visualizing a set of lines as cylinders with variable size, e.g., used to display characters (no Frame connector)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Lines<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Internal.LinesI.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal"
>Modelica.Mechanics.MultiBody.Visualizers.Internal</A>.Lines</H2>
<B>Visualizing a set of lines as cylinders with variable size, e.g., used to display characters (no Frame connector)</B><p>
<H3>Information</H3>
<PRE></pre>
<p>
With model <b>Lines</b> a set of dynamic lines is defined
that are located relatively to frame_a. Every line
is represented by a cylinder. This allows, e.g., to define simple shaped
3-dimensional characters. Note, if the lines are fixed relatively to frame_a,
it is more convenient to use model <b>Visualizers.FixedLines</b>.
An example for dynamic lines is shown in the following figure:<br>&nbsp;
</p>
<IMG SRC="../Images/MultiBody/FixedLines.png" ALT="model Visualizers.FixedLines">
<p>&nbsp;<br>
The two letters "x" and "y" are constructed with 4 lines
by providing the following data for input variable <b>lines</b>
</p>
<pre>
   lines = {[0, 0; 1, 1],[0, 1; 1, 0],[1.5, -0.5; 2.5, 1],[1.5, 1; 2, 0.25]}
</pre>
<p>
Via vectors <b>n_x</b> and <b>n_y</b> a two-dimensional
coordinate system is defined. The points defined with variable
<b>lines</b> are with respect to this coordinate system. For example
"[0, 0; 1, 1]" defines a line that starts at {0,0} and ends at {1,1}.
The diameter and color of all line cylinders are identical
and are defined by parameters.
</p>
<p>
The following variables are declared as <b>input Real</b>.
If the default equation is not appropriate, a corresponding
modifier equation has to be provided in the
model where a <b>Lines</b> instance is used, e.g., in the form
</p>
<pre>
    Visualizers.Lines lines(n_x = {0,1,0});
</pre>
<table border=1 cellspacing=0 cellpadding=2>
<tr><th><b>Declaration</b></th>
    <th><b>Meaning</th></tr>
<tr>
  <td>Real[3,3] <b>T</b> = identity(3)</td>
  <td>Transformation matrix from object to world frame (r_world = T*r_object)</td>
</tr>
<tr>
  <td>Real[3] <b>r</b> = {0,0,0}</td>
  <td>Position vector from origin of world frame to origin of
      object frame, resolved in world frame</td>
</tr>
<tr>
  <td>Real[3] <b>r_lines</b> = {0,0,0}</td>
  <td>Position vector from origin of object frame to the origin of 'lines' frame, resolved in object frame</td>
</tr>
<tr>
  <td>Real[3] <b>n_x</b> = {1,0,0}</td>
  <td>Vector in direction of x-axis of 'lines' frame, resolved in object frame</td>
</tr>
<tr>
  <td>Real[3] <b>n_y</b> = {0,1,0}</td>
  <td>Vector in direction of y-axis of 'lines' frame, resolved in object frame</td>
</tr>
<tr>
  <td>Real[:, 2, 2] <b>lines</b> </td>
  <td>List of start and end points of cylinders resolved in an x-y frame,<br>
  defined by n_x, n_y, e.g., {[0,0;1,1], [0,1;1,0], [2,0; 3,1]}</td>
</tr>
<tr>
  <td>Real <b>diameter</b> = 0.05</td>
  <td>Diameter of the cylinders defined by 'lines'</td>
</tr>
<tr>
  <td>Integer[3] <b>color</b> = {255,0,0} (red)</td>
  <td>Color (see below)</td>
</tr>
<tr>
  <td>Real <b>specularCoefficient</b> = 0</td>
  <td>Material property describing the reflecting of ambient light <br>
      (= 0 means, that light is completely absorbed)</td>
</tr>
</table>
<p>
Variable <b>color</b> is an Integer vector with 3 elements,
{r, g, b}, and specifies the color of the shape.
{r,g,b} are the "red", "green" and "blue" color parts.
Note, r g, b are given in the range 0 .. 255.
The predefined type <b>MultiBody.Types.Color</b> defines this
Integer vector together with a menue for the colors used in the
MultiBody library (the menu will be replaced by a color editor).
</p>
<pre>
</PRE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Lines <font color="darkgreen">
  &quot;Visualizing a set of lines as cylinders with variable size, e.g., used to display characters (no Frame connector)&quot;</font> 
  
  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody"
>Modelica.Mechanics.MultiBody</A>;
  <font color="blue">import </font>T = <A HREF="Modelica_Mechanics_MultiBody_Frames_TransformationMatrices.html#Modelica.Mechanics.MultiBody.Frames.TransformationMatrices"
>Modelica.Mechanics.MultiBody.Frames.TransformationMatrices</A>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames.Orientation"
>MultiBody.Frames.Orientation</A> R =<font color="red">  MultiBody.Frames.nullRotation</font>() <font color="darkgreen">
    &quot;Orientation object to rotate the world frame into the object frame.&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r[   3]={0,0,0} <font color="darkgreen">
    &quot;Position vector from origin of world frame to origin of object frame, resolved in world frame&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r_lines[   3]={0,0,0} <font color="darkgreen">
    &quot;Position vector from origin of object frame to the origin of 'lines' frame, resolved in object frame&quot;</font>;
  <font color="blue">input </font>Real n_x[3]={1,0,0} <font color="darkgreen">
    &quot;Vector in direction of x-axis of 'lines' frame, resolved in object frame.&quot;</font>;
  <font color="blue">input </font>Real n_y[3]={0,1,0} <font color="darkgreen">
    &quot;Vector in direction of y-axis of 'lines' frame, resolved in object frame.&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> lines[   :, 2, 2]=<font color="red">zeros</font>(0, 2, 2) <font color="darkgreen">
    &quot;List of start and end points of cylinders resolved in an x-y frame defined by n_x, n_y, e.g., {[0,0;1,1], [0,1;1,0], [2,0; 3,1]}&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> diameter(   min=0) = 0.05 <font color="darkgreen">
    &quot;Diameter of the cylinders defined by lines&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>MultiBody.Types.Color</A> color =  {0,128,255} <font color="darkgreen">&quot;Color of cylinders&quot;</font>;
  <font color="blue">input </font>Real specularCoefficient(min=0) = 0 <font color="darkgreen">
    &quot;Material property describing the reflecting of ambient light (= 0 means, that light is completely absorbed)&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer n=<font color="red">size</font>(lines, 1) <font color="darkgreen">&quot;Number of cylinders&quot;</font>;
  <A HREF="Modelica_Mechanics_MultiBody_Frames_TransformationMatrices.html#Modelica.Mechanics.MultiBody.Frames.TransformationMatrices.Orientation"
>T.Orientation</A> R_rel=<font color="red">
                      T.from_nxy</font>(n_x, n_y);
  <A HREF="Modelica_Mechanics_MultiBody_Frames_TransformationMatrices.html#Modelica.Mechanics.MultiBody.Frames.TransformationMatrices.Orientation"
>T.Orientation</A> R_lines=<font color="red">
                        T.absoluteRotation</font>(R.T, R_rel);
  Real r_abs[3]=r +<font color="red"> T.resolve1</font>(R.T, r_lines);
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>MultiBody.Visualizers.Advanced.Shape</A> cylinders[
                                                 n](
    <font color="blue">each </font>shapeType=&quot;cylinder&quot;,
    lengthDirection={<font color="red">T.resolve1</font>(R_rel,<font color="red"> vector</font>([lines[i, 2, :] - lines[i, 1,
         :]; 0])) <font color="blue">for </font>i<font color="blue"> in </font>1:n},
    length={<font color="red">MultiBody.Frames.length</font>(lines[i, 2, :] - lines[i, 1, :]) <font color="blue">for </font>i<font color="blue"> in </font>
            1:n},
    r={r_abs +<font color="red"> T.resolve1</font>(R_lines,<font color="red"> vector</font>([lines[i, 1, :]; 0])) <font color="blue">for </font>i<font color="blue"> in </font>1:
        n},
    <font color="blue">each </font>width=diameter,
    <font color="blue">each </font>height=diameter,
    <font color="blue">each </font>widthDirection={0,1,0},
    <font color="blue">each </font>color=color,
    <font color="blue">each </font>R=R,
    <font color="blue">each </font>specularCoefficient=specularCoefficient);
  
<font color="blue">end </font>Lines;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FixedLines<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLinesI.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines"></A><A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal"
>Modelica.Mechanics.MultiBody.Visualizers.Internal</A>.FixedLines</H2>
<B>Visualizing a set of lines as cylinders (e.g., used to display characters)</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLinesD.png" ALT="Modelica.Mechanics.MultiBody.Visualizers.Internal.FixedLines">
<H3>Information</H3>
<PRE></pre>
<p>
With model <b>FixedLines</b> a set of lines is defined
that are located relatively to frame_a. Every line
is represented by a cylinder. This allows to define simple shaped
3-dimensional characters. An example is shown in the
following figure:<br>&nbsp;
</p>
<IMG SRC="../Images/MultiBody/FixedLines.png" ALT="model Visualizers.FixedLines">
<p>&nbsp;<br>
The two letters "x" and "y" are constructed with 4 lines
by providing the following data for parameter <b>lines</b>
</p>
<pre>
   lines = {[0, 0; 1, 1],[0, 1; 1, 0],[1.5, -0.5; 2.5, 1],[1.5, 1; 2, 0.25]}
</pre>
<p>
Via parameter vectors <b>n_x</b> and <b>n_y</b> a two-dimensional
coordinate system is defined. The points defined with parameter
<b>lines</b> are with respect to this coordinate system. For example
"[0, 0; 1, 1]" defines a line that starts at {0,0} and ends at {1,1}.
The diameter and color of all line cylinders are identical
and are defined by parameters.
</p>
<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>animation</TD><TD>true</TD><TD>= true, if animation shall be enabled</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=3>if animation = true</TD></TR>
<TR><TD>scale</TD><TD>1</TD><TD> The 'lines' are visualized 'scale' times bigger</TD></TR>
<TR><TD>lines[:, 2, 2]</TD><TD>{[0, 0; 1, 1],[0, 1; 1, 0]}</TD><TD> List of start and end points of cylinders resolved along n_x and n_y [m]</TD></TR>
<TR><TD>diameter</TD><TD>0.05</TD><TD> Diameter of the cylinders defined by lines [m]</TD></TR>
<TR><TD>r_lines[3]</TD><TD>{0,0,0}</TD><TD> Position vector from origin of frame_a to the origin of the 'lines' frame, resolved in frame_a [m]</TD></TR>
<TR><TD>n_x[3]</TD><TD>{1,0,0}</TD><TD> Vector in direction of x-axis of 'lines' frame, resolved in frame_a.</TD></TR>
<TR><TD>n_y[3]</TD><TD>{0,1,0}</TD><TD> Vector in direction of y-axis of 'lines' frame, resolved in frame_a.</TD></TR>
<TR><TD>color</TD><TD>{0,128,255}</TD><TD> Color of cylinders</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> FixedLines <font color="darkgreen">
  &quot;Visualizing a set of lines as cylinders (e.g., used to display characters)&quot;</font> 
  
  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody"
>Modelica.Mechanics.MultiBody</A>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.PartialVisualizer"
>MultiBody.Interfaces.PartialVisualizer</A>;
  
  <font color="blue">parameter </font>Boolean animation=true <font color="darkgreen">&quot;= true, if animation shall be enabled&quot;</font>;
  <font color="blue">parameter </font>Real scale(min=0) = 1 <font color="darkgreen">
    &quot;|if animation = true| The 'lines' are visualized 'scale' times bigger&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> lines[       :, 2, 2]={[0, 0; 1, 1],[0, 1; 1, 0]} <font color="darkgreen">
    &quot;|if animation = true| List of start and end points of cylinders resolved along n_x and n_y&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> diameter(       min=0) = 0.05 <font color="darkgreen">
    &quot;|if animation = true| Diameter of the cylinders defined by lines&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r_lines[       3]={0,0,0} <font color="darkgreen">
    &quot;|if animation = true| Position vector from origin of frame_a to the origin of the 'lines' frame, resolved in frame_a&quot;</font>;
  <font color="blue">parameter </font>Real n_x[3]={1,0,0} <font color="darkgreen">
    &quot;|if animation = true| Vector in direction of x-axis of 'lines' frame, resolved in frame_a.&quot;</font>;
  
  <font color="blue">parameter </font>Real n_y[3]={0,1,0} <font color="darkgreen">
    &quot;|if animation = true| Vector in direction of y-axis of 'lines' frame, resolved in frame_a.&quot;</font>;
  
  <font color="blue">parameter </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>MultiBody.Types.Color</A> color =      {0,128,255} <font color="darkgreen">
    &quot;|if animation = true| Color of cylinders&quot;</font>;
  
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer ndim=<font color="blue">if </font>world.enableAnimation<font color="blue"> and </font>animation<font color="blue"> then </font>1<font color="blue"> else </font>
            0;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
>Lines</A> x_label[
                ndim](
    <font color="blue">each </font>lines=scale*lines,
    <font color="blue">each </font>diameter=scale*diameter,
    <font color="blue">each </font>color=color,
    <font color="blue">each </font>r_lines=r_lines,
    <font color="blue">each </font>n_x=n_x,
    <font color="blue">each </font>n_y=n_y,
    <font color="blue">each </font>r=frame_a.r_0,
    <font color="blue">each </font>R=frame_a.R);
<font color="blue">equation </font>
  frame_a.f =<font color="red"> zeros</font>(3);
  frame_a.t =<font color="red"> zeros</font>(3);
<font color="blue">end </font>FixedLines;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Wed Jun 30 17:50:27 2004
.
</address></BODY>
</HTML>
