<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Modelica.Magnetic.FluxTubes.Examples.BasicExamples</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Educational examples&quot;">
<style type="text/css">
*       { font-size: 100%; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 90%; font-family: Courier, monospace; white-space: pre; } /* For the Modelica code (in exported html). */
h4      { font-size: 100%; font-weight: bold; color: green; } 
h3      { font-size: 110%; font-weight: bold; color: green; }
h2      { font-size: 130%; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { padding: 2px; vertical-align: top; }
th      { padding: 2px; vertical-align: top; font-weight: bold; }
table   { border-collapse: collapse; }
table[class^="ModelicaTable"] td { border: 1px solid #808080; }
table[class^="ModelicaTable"] th { border: 1px solid #808080; }
pre, code {font-family: "Courier New", monospace;}
pre {white-space: pre; overflow-x : hidden;}
li.unchecked::marker { content: "\2610  "; font-size: 1.5em; }
li.checked::marker { content: "\2611  "; font-size: 1.5em; }
.ModelicaDescription {font-weight: bold;} /* For the description string of the class. */
.ModelicaBaseClass {} /* For the list of base-classes at the of the description. */
.ModelicaKeyword { color: blue; font-weight: normal; font-style: normal; } /* Keywords in Modelica. */
.ModelicaComment { color: #006400;  font-weight: normal; font-style: normal;} /* All three variants of comments in Modelica.  */
.ModelicaString { color: #006400;  font-weight: normal; font-style: normal;} /* String constants. */
.ModelicaClass { color: red; font-weight: normal; font-style: normal;} /* Formatting the names of referenced classes (for base-class and components). */
.ModelicaFunction { color: red; font-weight: normal; font-style: normal;} /* Formatting for called functions. */
.ModelicaTablePackageContent { } /* The table of contents for each package. */
.ModelicaTableCrossReference { } /* The optional cross-reference table. */
.ModelicaTableInputs {} /* The table of inputs for a function. */
.ModelicaTableOutputs {} /* The table of outputs for a function. */
.ModelicaTableParameters {} /* The table of parameters for a model/block. */
.ModelicaTableConnectors {} /* The table of connectors for a model/block. */
.ModelicaTableContents {} /* The table of contents for a connector. */
.ModelicaStartAttribute { font-weight: bold; } /* The formatting used for start-attribute in the table of parameters, to separate them from parameter values. */
.ModelicaParameterTab { background-color: #c0c0c0; font-weight: bold; } /* The tab-heading in the table of parameters */
.ModelicaParameterGroup { background-color: #e0e0e0; } /* The group-heading in the table of parameters */
</style>
</head>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE BasicExamples<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><a name="Modelica.Magnetic.FluxTubes.Examples.BasicExamples"></a><a href="Modelica_Magnetic_FluxTubes_Examples.html#Modelica.Magnetic.FluxTubes.Examples"
>Modelica.Magnetic.FluxTubes.Examples</a>.BasicExamples</h2>
<p>
<span class="ModelicaDescription">Educational examples</span>
</p>
<h3>Information</h3>
<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage"
>Modelica.Icons.ExamplesPackage</a> (Icon for packages containing runnable examples).</span></p>
<h3>Package Content</h3>
<table summary="Package Content" class="ModelicaTablePackageContent">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapS.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.QuadraticCoreAirgap" width="20" height="20" align="top">&nbsp;<a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples.QuadraticCoreAirgap"
>QuadraticCoreAirgap</a>
</td>
<td>Educational example: iron core with airgap</td>
</tr>
<tr>
<td><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapS.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreAirgap" width="20" height="20" align="top">&nbsp;<a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreAirgap"
>ToroidalCoreAirgap</a>
</td>
<td>Educational example: iron core with airgap</td>
</tr>
<tr>
<td><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapS.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreQuadraticCrossSection" width="20" height="20" align="top">&nbsp;<a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreQuadraticCrossSection"
>ToroidalCoreQuadraticCrossSection</a>
</td>
<td>Educational example: iron core with airgap</td>
</tr>
<tr>
<td><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapS.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.SaturatedInductor" width="20" height="20" align="top">&nbsp;<a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples.SaturatedInductor"
>SaturatedInductor</a>
</td>
<td>Inductor with saturation in the ferromagnetic core</td>
</tr>
</table>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE QuadraticCoreAirgap<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapI.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.QuadraticCoreAirgap" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.QuadraticCoreAirgap"></a><a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples"
>Modelica.Magnetic.FluxTubes.Examples.BasicExamples</a>.QuadraticCoreAirgap</h2>
<p>
<span class="ModelicaDescription">Educational example: iron core with airgap</span>
</p>
<h3>Information</h3>

<p>
Educational example of a magnetic circuit containing an iron core and an airgap:
</p>
<div>
<img src="../Images/Magnetic/FluxTubes/Examples/MagneticCircuit.png" alt="Magnetic circuit with iron core and airgap">
</div>
<p>
A current ramp is applied in positive electric direction through the exciting coil, causing a rising magnetomotive force (mmf) in positive magnetic direction of the electromagnetic converter.
The mmf in turn causes a magnetic flux through the circuit in the direction indicated by the flux sensor.
From that magnetic flux, flux density can be calculated in every element of the magnetic circuit. Flux density is used to derive magnetic field strength.
Magnetic field strength times length of the flux line gives magnetic potential difference of each element.
The sum of all magnetic potential differences is covered by the mmf of the exciting coil.
</p>
<p>
Using the parameter values, the results can be validated by analytic calculations:
</p>
<table border="1" cellspacing="0" cellpadding="2">
<tr><th>element   </th><th>cross section</th><th>length       </th><th>rel. permeability </th><th>B                   </th><th>H                                    </th><th>mmf              </th></tr>
<tr><td>left leg  </td><td>a*a          </td><td>l - a        </td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>upper yoke</td><td>a*a          </td><td>l - a        </td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>right leg </td><td>a*a          </td><td>l - a - delta</td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>airgap    </td><td>a*a          </td><td>delta        </td><td>1                 </td><td>useful flux / cross section</td><td>B/&mu;<sub>0</sub>            </td><td>H*length         </td></tr>
<tr><td>lower yoke</td><td>a*a          </td><td>l - a        </td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>total     </td><td>             </td><td>             </td><td>                  </td><td>                    </td><td>                                     </td><td>&Sigma; mmf = N*I</td></tr>
</table>
<p>
Note that there is a leakage flux path present. Therefore the total magnetic flux of in core splits into
</p>
<ul>
<li>the useful flux through the airgap and</li>
<li>the leakage flux through the leakage element.</li>
</ul>
<p>
However, the magnetic voltage across the airgap and the leakage model are equal.
The ratio of the useful flux over the flux in the core is equal to <code>1 - &sigma;</code>.
In the core the magnetic flux is the same in every element as they are connected in series.
For the calculation of the length of flux lines inside the core, a medium flux line (dashed line) is used.
</p>
<p>
Additionally, a measuring coil is placed in the airgap.
Due to Faraday's law, the time derivative of flux causes an induced voltage both in the exciting coil (in positive direction) and in the measuring coil (in negative direction).
Since current and therefore flux are a linear time dependent ramp, induced voltages are constant during that ramp and zero otherwise.
Note that usage of nonlinear magnetic material would change that result due the nonlinear relationship between magnetic field strength and flux density.
</p>
<p>
Note the proper usage of electric and magnetic grounds to define zero potential.
</p>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a> (Icon for runnable examples).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Name</th><th>Description</th></tr>
<tr><td>l</td><td>Outer length of iron core [m]</td></tr>
<tr><td>a</td><td>Side length of square cross section [m]</td></tr>
<tr><td>mu_r</td><td>Relative permeability of core</td></tr>
<tr><td>delta</td><td>Length of airgap [m]</td></tr>
<tr><td>sigma</td><td>Leakage coefficient</td></tr>
<tr><td>N</td><td>Number of turns of exciting coil</td></tr>
<tr><td>I</td><td>Maximum exciting current [A]</td></tr>
</table>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ToroidalCoreAirgap<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapI.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreAirgap" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreAirgap"></a><a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples"
>Modelica.Magnetic.FluxTubes.Examples.BasicExamples</a>.ToroidalCoreAirgap</h2>
<p>
<span class="ModelicaDescription">Educational example: iron core with airgap</span>
</p>
<h3>Information</h3>

<p>
Educational example of a magnetic circuit containing a toroidal iron core with circular cross section and an airgap:
</p>
<p>
A current ramp is applied in positive electric direction through the exciting coil, causing a rising magnetomotive force (mmf) in positive magnetic direction of the electromagnetic converter.
The mmf in turn causes a magnetic flux through the circuit in the direction indicated by the flux sensor.
From that magnetic flux, flux density can be calculated in every element of the magnetic circuit. Flux density is used to derive magnetic field strength.
Magnetic field strength times length of the flux line gives magnetic potential difference of each element.
The sum of all magnetic potential differences is covered by the mmf of the exciting coil.
</p>
<p>
Using the values shown in section Parameters, the results can be validated easily by analytic calculations:
</p>
<table border="1" cellspacing="0" cellpadding="2">
<tr><th>element   </th><th>cross section     </th><th>length             </th><th>rel. permeability </th><th>B                   </th><th>H                                    </th><th>mmf              </th></tr>
<tr><td>core      </td><td>d<sup>2</sup>*pi/4</td><td>r*alpha             </td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>airgap    </td><td>d<sup>2</sup>*pi/4</td><td>delta=r*(2*pi-alpha)</td><td>1</td><td>flux / cross section</td><td>B/(&mu;<sub>0</sub>)</td><td>H*delta         </td></tr>
<tr><td>total     </td><td>                  </td><td>                   </td><td>                  </td><td>                    </td><td>                                     </td><td>&Sigma; mmf = N*I</td></tr>
</table>
<p>
Note that since no leakage is present, the magnetic flux is the same in every element - they are connected in series.
For calculation of the length of flux lines, a flux line in the middle of the toroid is used.
</p>
<p>
Additionally, a measuring coil is placed in the airgap.
Due to Faraday's law, the time derivative of flux causes an induced voltage both in the exciting coil (in positive direction) and in the measuring coil (in negative direction).
Since current is given as a linear-time dependent ramp, the induced voltages during that ramp are constant and otherwise zero.
Note that usage of nonlinear magnetic material would change that result due the nonlinear relationship between magnetic field strength and flux density.
</p>
<p>
Note the proper usage of electric and magnetic grounds to define zero potential.
</p>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a> (Icon for runnable examples).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Name</th><th>Description</th></tr>
<tr><td>r</td><td>Middle radius of iron core [m]</td></tr>
<tr><td>d</td><td>Diameter of cylindrical cross section [m]</td></tr>
<tr><td>mu_r</td><td>Relative permeability of core [1]</td></tr>
<tr><td>delta</td><td>Length of airgap [m]</td></tr>
<tr><td>alpha</td><td>Section angle of toroidal core [rad]</td></tr>
<tr><td>N</td><td>Number of exciting coil turns</td></tr>
<tr><td>I</td><td>Maximum exciting current [A]</td></tr>
</table>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ToroidalCoreQuadraticCrossSection<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapI.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreQuadraticCrossSection" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.ToroidalCoreQuadraticCrossSection"></a><a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples"
>Modelica.Magnetic.FluxTubes.Examples.BasicExamples</a>.ToroidalCoreQuadraticCrossSection</h2>
<p>
<span class="ModelicaDescription">Educational example: iron core with airgap</span>
</p>
<h3>Information</h3>

<p>
Educational example of a magnetic circuit containing a toroidal iron core with rectangular cross section and an airgap:
</p>
<p>
A current ramp is applied in positive electric direction through the exciting coil, causing a rising magnetomotive force (mmf) in positive magnetic direction of the electromagnetic converter.
The mmf in turn causes a magnetic flux through the circuit in the direction indicated by the flux sensor.
From that magnetic flux, flux density can be calculated in every element of the magnetic circuit. Flux density is used to derive magnetic field strength.
Magnetic field strength times length of the flux line gives magnetic potential difference of each element.
The sum of all magnetic potential differences is covered by the mmf of the exciting coil.
</p>
<p>
Using the values shown in section Parameters, the results can be validated easily by analytic calculations:
</p>
<table border="1" cellspacing="0" cellpadding="2">
<tr><th>element   </th><th>cross section</th><th>length                         </th><th>rel. permeability </th><th>B                   </th><th>H                                    </th><th>mmf              </th></tr>
<tr><td>core      </td><td>(r_o - r_i)*l</td><td>(r_o + r_i)/2*alpha             </td><td>&mu;<sub>r</sub>  </td><td>flux / cross section</td><td>B/(&mu;<sub>r</sub>*&mu;<sub>0</sub>)</td><td>H*length         </td></tr>
<tr><td>airgap    </td><td>(r_o - r_i)*l</td><td>delta=(r_o + r_i)/2*(2*pi-alpha)</td><td>1</td><td>flux / cross section</td><td>B/(&mu;<sub>0</sub>)</td><td>H*delta         </td></tr>
<tr><td>total     </td><td>             </td><td>                               </td><td>                  </td><td>                    </td><td>                                     </td><td>&Sigma; mmf = N*I</td></tr>
</table>
<p>
Note that since no leakage is present, the magnetic flux is the same in every element - they are connected in series.
For calculation of the length of flux lines, a medium flux line is used.
</p>
<p>
Additionally, a measuring coil is placed in the airgap.
Due to Faraday's law, the time derivative of flux causes an induced voltage both in the exciting coil (in positive direction) and in the measuring coil (in negative direction).
Since current and therefore flux are a linear time dependent ramp, induced voltages are constant during that ramp and zero otherwise.
Note that usage of nonlinear magnetic material would change that result due the nonlinear relationship between magnetic field strength and flux density.
</p>
<p>
Note the proper usage of electric and magnetic grounds to define zero potential.
</p>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a> (Icon for runnable examples).</span></p>
<h3>Parameters</h3>
<table summary="Parameters" class="ModelicaTableParameters">
<tr><th>Name</th><th>Description</th></tr>
<tr><td>r_o</td><td>Outer radius of iron core [m]</td></tr>
<tr><td>r_i</td><td>Inner radius of iron core [m]</td></tr>
<tr><td>l</td><td>Length of rectangular cross section [m]</td></tr>
<tr><td>mu_r</td><td>Relative permeability of core [1]</td></tr>
<tr><td>delta</td><td>Length of airgap [m]</td></tr>
<tr><td>alpha</td><td>Section angle of toroidal core [rad]</td></tr>
<tr><td>N</td><td>Number of exciting coil turns</td></tr>
<tr><td>I</td><td>Maximum exciting current [A]</td></tr>
</table>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE SaturatedInductor<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.Magnetic.FluxTub058c55c96a99adeeirgapI.png" alt="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.SaturatedInductor" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.Magnetic.FluxTubes.Examples.BasicExamples.SaturatedInductor"></a><a href="Modelica_Magnetic_FluxTubes_Examples_BasicExamples.html#Modelica.Magnetic.FluxTubes.Examples.BasicExamples"
>Modelica.Magnetic.FluxTubes.Examples.BasicExamples</a>.SaturatedInductor</h2>
<p>
<span class="ModelicaDescription">Inductor with saturation in the ferromagnetic core</span>
</p>
<h3>Information</h3>

<p>
This model demonstrates the effects of non-linear magnetisation characteristics of soft magnetic materials (hysteresis neglected). A sinusoidal voltage is applied to an inductor with a closed ferromagnetic core of rectangular shape. Set the <strong>tolerance</strong> to <strong>1e-7</strong>, <strong>simulate for 0.1 s</strong> and plot for example:
</p>

<blockquote><pre>
coil.i vs. time           // non-harmonic current due to saturation of the core material
r_mFe.mu_r vs. r_mFe.B    // relative permeability vs. flux density inside core
r_mFe.B vs. r_mFe.H       // magnetisation curve B(H); hysteresis neglected
</pre></blockquote>

<p>
The magnetisation characteristics of the flux tube element representing the ferromagnetic core can easily be changed from simplified linear behaviour (nonLinearPermeability set to false and R_mFe.mu_rConst set to a positive value, preferably mu_rConst >> 1) to non-linear behaviour (e.g., selection of one of the electric sheets in <a href="Modelica_Magnetic_FluxTubes_Material_SoftMagnetic.html#Modelica.Magnetic.FluxTubes.Material.SoftMagnetic"
>Material.SoftMagnetic</a> with nonLinearPermeability set to true). This enables for convenient initial design of magnetic circuits with linear material characteristics prior to simulation with non-linear behaviour.
</p>

<h4>Note</h4>

<p>
If the supply voltage has a zero-crossing when applied to the inductor at time t=0 (i.e., source.phase set to zero instead of &pi;/2), then the inrush current that is typical for switching of inductive loads can be observed.
</p>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</a> (Icon for runnable examples).</span></p>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Tue Feb 24 16:59:22 2026.
</address>
</body>
</html>
