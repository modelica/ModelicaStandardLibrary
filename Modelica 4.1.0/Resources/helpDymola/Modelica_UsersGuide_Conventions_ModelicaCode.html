<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Modelica.UsersGuide.Conventions.ModelicaCode</title>
<meta name="HTML-Generator" content="Dymola">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="&quot;Modelica code&quot;">
<style type="text/css">
*       { font-size: 100%; font-family: Arial, sans-serif; }
.modelica, .modelica * { font-size: 90%; font-family: Courier, monospace; white-space: pre; } /* For the Modelica code (in exported html). */
h4      { font-size: 100%; font-weight: bold; color: green; } 
h3      { font-size: 110%; font-weight: bold; color: green; }
h2      { font-size: 130%; font-weight: bold; color: green; }
address { font-weight: normal; }
td      { padding: 2px; vertical-align: top; }
th      { padding: 2px; vertical-align: top; font-weight: bold; }
table   { border-collapse: collapse; }
table[class^="ModelicaTable"] td { border: 1px solid #808080; }
table[class^="ModelicaTable"] th { border: 1px solid #808080; }
pre, code {font-family: "Courier New", monospace;}
pre {white-space: pre; overflow-x : hidden;}
li.unchecked::marker { content: "\2610  "; font-size: 1.5em; }
li.checked::marker { content: "\2611  "; font-size: 1.5em; }
.ModelicaDescription {font-weight: bold;} /* For the description string of the class. */
.ModelicaBaseClass {} /* For the list of base-classes at the of the description. */
.ModelicaKeyword { color: blue; font-weight: normal; font-style: normal; } /* Keywords in Modelica. */
.ModelicaComment { color: #006400;  font-weight: normal; font-style: normal;} /* All three variants of comments in Modelica.  */
.ModelicaString { color: #006400;  font-weight: normal; font-style: normal;} /* String constants. */
.ModelicaClass { color: red; font-weight: normal; font-style: normal;} /* Formatting the names of referenced classes (for base-class and components). */
.ModelicaFunction { color: red; font-weight: normal; font-style: normal;} /* Formatting for called functions. */
.ModelicaTablePackageContent { } /* The table of contents for each package. */
.ModelicaTableCrossReference { } /* The optional cross-reference table. */
.ModelicaTableInputs {} /* The table of inputs for a function. */
.ModelicaTableOutputs {} /* The table of outputs for a function. */
.ModelicaTableParameters {} /* The table of parameters for a model/block. */
.ModelicaTableConnectors {} /* The table of connectors for a model/block. */
.ModelicaTableContents {} /* The table of contents for a connector. */
.ModelicaStartAttribute { font-weight: bold; } /* The formatting used for start-attribute in the table of parameters, to separate them from parameter values. */
.ModelicaParameterTab { background-color: #c0c0c0; font-weight: bold; } /* The tab-heading in the table of parameters */
.ModelicaParameterGroup { background-color: #e0e0e0; } /* The group-heading in the table of parameters */
</style>
</head>
<body>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ModelicaCode<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.UsersGuideI.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.UsersGuide.Conventions.ModelicaCode"></a><a href="Modelica_UsersGuide_Conventions.html#Modelica.UsersGuide.Conventions"
>Modelica.UsersGuide.Conventions</a>.ModelicaCode</h2>


<p>In this section guidelines on creating Modelica code are provided.</p>


<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Information"
>Modelica.Icons.Information</a> (Icon for general information packages).</span></p>
<h3>Package Content</h3>
<table summary="Package Content" class="ModelicaTablePackageContent">
<tr>
<th>Name</th>
<th>Description</th>
</tr>
<tr>
<td><img src="Modelica.UsersGuide.OverviewS.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.Format" width="20" height="20" align="top">&nbsp;<a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode.Format"
>Format</a>
</td>
<td>Format</td>
</tr>
<tr>
<td><img src="Modelica.UsersGuide.OverviewS.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.Naming" width="20" height="20" align="top">&nbsp;<a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode.Naming"
>Naming</a>
</td>
<td>Naming convention</td>
</tr>
<tr>
<td><img src="Modelica.UsersGuide.OverviewS.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.ParameterDefaults" width="20" height="20" align="top">&nbsp;<a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode.ParameterDefaults"
>ParameterDefaults</a>
</td>
<td>Parameter defaults</td>
</tr>
</table>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Format<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.UsersGuideI.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.Format" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.UsersGuide.Conventions.ModelicaCode.Format"></a><a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode"
>Modelica.UsersGuide.Conventions.ModelicaCode</a>.Format</h2>


<h4>Comments and Annotations</h4>
<p>
Comments and annotations should start with a capital letter, for example:<br>
<code><strong>parameter</strong> Real a = 1 &quot;Arbitrary factor&quot;;</code>.<br>
For Boolean parameters, the description string should start with &quot;= true, &hellip;&quot;, for example:<br>
<code><strong>parameter</strong> Boolean useHeatPort = false &quot;= true, if heatPort is enabled&quot;;</code>.
</p>

<h4>Tabs and Groups</h4>
<p>
The annotations &quot;tab&quot; and &quot;group&quot; define the placement of
component or of variables in a dialog.
</p>
<p>
Using the <strong>group</strong> annotation, the following rules shall be followed:
</p>
<ol>
  <li>
    Avoid excessively long group labels.
  </li>
  <li>
    Use nouns rather than verbs, without ending punctuation.
  </li>
  <li>
    Use sentence-style capitalization.
  </li>
</ol>
<p>
Using the <strong>tab</strong> annotation, the following rules shall be followed:
</p>
<ol>
  <li>
    Try to group components or variables in the default "general" tab first.
    But feel free to define a&nbsp;new tab it they are so many.
  </li>
  <li>
    Label tabs based on their pattern. The label shall clearly reflect
    the content of the collected variables.
  </li>
  <li>
    Avoid long tab labels. One or two words are mostly sufficient.
  </li>
  <li>
    Use nouns rather than verbs, without ending punctuation.
  </li>
  <li>
    Use sentence-style capitalization.
  </li>
  <li>
    Visibility of parameters collected in one tab shall not be dependent
    on parameters shown in another tab.
  </li>
</ol>

<h5>Example</h5>
<p>
Imagine you define a&nbsp;controlled electric drive being composed of
a&nbsp;controller and an electrical machine. The latter
has parameters number of pole pairs&nbsp;<var>p</var>, nominal frequency
<var>f</var><sub>nom</sub>, rotor's moment of inertia <var>J</var><sub>rotor</sub>
and others.
The&nbsp;controller itself is divided into several sub-controllers
&ndash; such as the one for speed control with parameters like gain&nbsp;<var>k</var>
or time constant&nbsp;<var>T</var>.
Then, the above parameters of your electrical drive model could be sorted using tabs
and groups as follows:&nbsp;<var>p</var>, <var>f</var><sub>nom</sub> and
<var>J</var><sub>rotor</sub> grouped in the "Electrical machine" group in
the "general" tab; <var>k</var> and&nbsp;<var>T</var> in the group
"Speed control" under tab "Controller".
</p>
<p>
In the Modelica code, for example the parameter&nbsp;<var>k</var> will then
be defined like:
</p>

<blockquote><pre>
<strong>parameter</strong> Real k=1 "Gain"
  <strong>annotation</strong>(
    Dialog(
      tab="Controller",
      group="Speed control"));
</pre></blockquote>

<h4>Whitespace and Indentation</h4>
<p>
Trailing white-space (i.e., white-space at the end of the lines) shall not be used.
The tab-character shall not be used, since the tab-stops are not standardized.
</p>
<p>
The code in a&nbsp;class shall be indented relative to the class in steps of two spaces;
except that the headings <code>public</code>, <code>protected</code>, <code>equation</code>,
<code>algorithm</code>, and <code>end</code> of class marker shall not be indented.
The keywords <code>public</code> and <code>protected</code> are headings for a&nbsp;group
of declarations.
</p>
<p>
Long modifier lists shall be split into several indented lines with at most one modifier per line.
</p>
<p>
Full class definitions shall be separated by an empty line.
</p>

<h5>Example</h5>

<blockquote><pre>
<strong>package</strong> MyPackage
  <strong>partial</strong> <strong>model</strong> BaseModel
    <strong>parameter</strong> Real p;
    <strong>input</strong> Real u(unit="m/s");
  <strong>protected</strong>
    Real y;
    Real x(
      start=1,
      unit="m",
      nominal=10);
  <strong>equation</strong>
    <strong>der</strong>(x) = u;
    y = 2*x;
  <strong>end</strong> BaseModel;

  <strong>model</strong> ModelP2
    <strong>extends</strong> BaseModel(p=2);
  <strong>end</strong> ModelP2;
<strong>end</strong> MyPackage;
</pre></blockquote>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Information"
>Modelica.Icons.Information</a> (Icon for general information packages).</span></p>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE Naming<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.UsersGuideI.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.Naming" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.UsersGuide.Conventions.ModelicaCode.Naming"></a><a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode"
>Modelica.UsersGuide.Conventions.ModelicaCode</a>.Naming</h2>


<ol>
<li> <strong>Class and instance names</strong> are usually written in upper and lower case
     letters, e.g., &quot;ElectricCurrent&quot;. An underscore may be used in names.
     However, it has to be taken into account that the last underscore in a
     name might indicate that the following characters are rendered as a subscript.
     Example: &quot;pin_a&quot; may be rendered as &quot;pin<sub>a</sub>&quot;.</li>

<li> <strong>Class names</strong> start always with an upper case letter,
     with the exception of functions, that start with a lower case letter.</li>

<li> <strong>Instance names</strong>, i.e., names of component instances and
     of variables (with the exception of constants),
     start usually with a lower case letter with only
     a few exceptions if this is common sense
     (such as <code>T</code> for a temperature variable).</li>

<li> <strong>Constant names</strong>, i.e., names of variables declared with the
     &quot;constant&quot; prefix, follow the usual naming conventions
     (= upper and lower case letters) and start usually with an
     upper case letter, e.g., UniformGravity, SteadyState.</li>

<li> The two <strong>connectors</strong> of a domain that have identical declarations
     and different icons are usually distinguished by <code>_a</code>, <code>_b</code>
     or <code>_p</code>, <code>_n</code>, e.g., <code>Flange_a</code>, <code>Flange_b</code>,
     <code>HeatPort_a</code>, <code>HeatPort_b</code>.</li>

<li> A <strong>connector class</strong> has the instance
     name definition in the diagram layer and not in the
     <a href="Modelica_UsersGuide_Conventions.html#Modelica.UsersGuide.Conventions.Icons"
>icon</a> layer.</li>
</ol>

<h4>Variable names</h4>
<p>In the following table typical variable names are listed. This list should be completed.</p>

<table border="1" cellpadding="2" cellspacing="0" >
   <caption>Variables and names</caption>
   <tr>
      <th>Variable</th>
      <th>Quantity</th>
    </tr>
    <tr>
      <td>a</td>
      <td>acceleration</td>
    </tr>
    <tr>
      <td>A</td>
      <td>area</td>
    </tr>
    <tr>
      <td>C</td>
      <td>capacitance</td>
    </tr>
    <tr>
      <td>d</td>
      <td>damping, density, diameter</td>
    </tr>
    <tr>
      <td>dp</td>
      <td>pressureDrop</td>
    </tr>
    <tr>
      <td>e</td>
      <td>specificEntropy</td>
    </tr>
    <tr>
      <td>E</td>
      <td>energy, entropy</td>
    </tr>
    <tr>
      <td>eta</td>
      <td>efficiency</td>
    </tr>
    <tr>
      <td>f</td>
      <td>force, frequency</td>
    </tr>
    <tr>
      <td>G</td>
      <td>conductance</td>
    </tr>
    <tr>
      <td>h</td>
      <td>height, specificEnthalpy</td>
    </tr>
    <tr>
      <td>H</td>
      <td>enthalpy</td>
    </tr>
    <tr>
      <td>HFlow</td>
      <td>enthalpyFlow</td>
    </tr>
    <tr>
      <td>i</td>
      <td>current</td>
    </tr>
    <tr>
      <td>J</td>
      <td>inertia</td>
    </tr>
    <tr>
      <td>l</td>
      <td>length</td>
    </tr>
    <tr>
      <td>L</td>
      <td>Inductance</td>
    </tr>
    <tr>
      <td>m</td>
      <td>mass</td>
    </tr>
    <tr>
      <td>M</td>
      <td>mutualInductance</td>
    </tr>
    <tr>
      <td>mFlow</td>
      <td>massFlow</td>
    </tr>
    <tr>
      <td>p</td>
      <td>pressure</td>
    </tr>
    <tr>
      <td>P</td>
      <td>power</td>
    </tr>
    <tr>
      <td>Q</td>
      <td>heat</td>
    </tr>
    <tr>
      <td>Qflow</td>
      <td>heatFlow</td>
    </tr>
    <tr>
      <td>r</td>
      <td>radius</td>
    </tr>
    <tr>
      <td>R</td>
      <td>radius, resistance</td>
    </tr>
    <tr>
      <td>t</td>
      <td>time</td>
    </tr>
    <tr>
      <td>T</td>
      <td>temperature</td>
    </tr>
    <tr>
      <td>tau</td>
      <td>torque</td>
    </tr>
    <tr>
      <td>U</td>
      <td>internalEnergy</td>
    </tr>
    <tr>
      <td>v</td>
      <td>electricPotential, specificVolume, velocity, voltage</td>
    </tr>
    <tr>
      <td>V</td>
      <td>volume</td>
    </tr>
    <tr>
      <td>w</td>
      <td>angularVelocity</td>
    </tr>
    <tr>
      <td>X</td>
      <td>reactance</td>
    </tr>
    <tr>
      <td>Z</td>
      <td>impedance</td>
    </tr>
</table>

<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Information"
>Modelica.Icons.Information</a> (Icon for general information packages).</span></p>
<!--[if supportFields]><span style="mso-element:field-begin"></span>
<span style="mso-spacerun:yes"></span>XE ParameterDefaults<![endif]-->
<!--[if supportFields]><span style="mso-element:field-end"></span><![endif]-->
<h2><img src="Modelica.UsersGuideI.png" alt="Modelica.UsersGuide.Conventions.ModelicaCode.ParameterDefaults" align="right" style="border: 1px solid" width="80" height="80">
<a name="Modelica.UsersGuide.Conventions.ModelicaCode.ParameterDefaults"></a><a href="Modelica_UsersGuide_Conventions_ModelicaCode.html#Modelica.UsersGuide.Conventions.ModelicaCode"
>Modelica.UsersGuide.Conventions.ModelicaCode</a>.ParameterDefaults</h2>


<p>
In this section the convention is summarized how default parameters are
handled in the Modelica Standard Library (since version 3.0).
</p>

<p>
Many models in this library have parameter declarations to define
constants of a model that might be changed before simulation starts.
Example:
</p>

<blockquote><pre>
<strong>model</strong> SpringDamper
<strong>parameter</strong> Real c(final unit="N.m/rad") = 1e5    "Spring constant";
<strong>parameter</strong> Real d(final unit="N.m.s/rad") = 0    "Damping constant";
<strong>parameter</strong> Modelica.Units.SI.Angle phi_rel0 = 0  "Unstretched spring angle";
...
<strong>end</strong> SpringDamper;
</pre></blockquote>

<p>
In Modelica it is possible to define a default value of a parameter in
the parameter declaration. In the example above, this is performed for
all parameters. Providing default values for all parameters can lead to
errors that are difficult to detect, since a modeler may have forgotten
to provide a meaningful value (the model simulates but gives wrong
results due to wrong parameter values). In general the following basic
situations are present:
</p>

<ol>
<li> The parameter value could be anything (e.g., a spring constant or
  a resistance value) and therefore the user should provide a value in
  all cases. A Modelica translator should warn, if no value is provided.
</li>

<li> The parameter value is not changed in &gt; 95 % of the cases
  (e.g., initialization or visualization parameters, or parameter phi_rel0
  in the example above). In this case a default parameter value should be
  provided, in order that the model or function can be conveniently
  used by a modeler.
</li>

<li> A modeler would like to quickly utilize a model, e.g.,
  <ul>
  <li> to automatically check that the model still translates and/or simulates
    (after some changes in the library),</li>
  <li> to make a quick demo of a library by drag-and-drop of components,</li>
  <li> to implement a simple test model in order to get a better understanding
    of the desired component.</li>
  </ul>
  In all these cases, it would be not practical, if the modeler would
  have to provide explicit values for all parameters first.
  </li>
</ol>

<p>
To handle the conflicting goals of (1) and (3), the Modelica Standard Library
uses two approaches to define default parameters, as demonstrated with the
following example:
</p>

<blockquote><pre>
<strong>model</strong> SpringDamper
<strong>parameter</strong> Real c(final unit="N.m/rad"  , start = 1e5) "Spring constant";
<strong>parameter</strong> Real d(final unit="N.m.s/rad", start = 0)   "Damping constant";
<strong>parameter</strong> Modelica.Units.SI.Angle phi_rel0 = 0        "Unstretched spring angle";
...
<strong>end</strong> SpringDamper;

SpringDamper sp1;              // warning for "c" and "d"
SpringDamper sp2(c=1e4, d=0);  // fine, no warning
</pre></blockquote>

<p>
Both definition forms, using a "start" value (for "c" and "d") and providing
a declaration equation (for "phi_rel0"), are valid Modelica and define the value
of the parameter. By convention, it is expected that Modelica translators will
trigger a warning message for parameters that are <strong>not</strong> defined by a declaration
equation, by a modifier equation or in an initial equation/algorithm section.
A Modelica translator might have options to change this behavior, especially,
that no messages are printed in such cases and/or that an error is triggered
instead of a warning.
</p>


<p><span class="ModelicaBaseClass">Extends from <a href="Modelica_Icons.html#Modelica.Icons.Information"
>Modelica.Icons.Information</a> (Icon for general information packages).</span></p>
<address>
<a href="http://www.3ds.com/">Automatically generated</a> Tue Feb 24 16:58:53 2026.
</address>
</body>
</html>
