<HTML>
<HEAD>
<TITLE>Modelica.Mechanics.Translational.Components</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Components for 1D translational mechanical drive trains&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Components<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.Translational.Components"></A><A HREF="Modelica_Mechanics_Translational.html#Modelica.Mechanics.Translational"
>Modelica.Mechanics.Translational</A>.Components</H2>
<B>Components for 1D translational mechanical drive trains</B>
<P>
<H3>Information</H3>
<PRE></pre>
<p>
This package contains basic components 1D mechanical translational drive trains.
</p>
<pre></PRE><P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.FixedS.png" ALT="Modelica.Mechanics.Translational.Components.Fixed" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Fixed"
>Fixed</A>
</TD><TD>Fixed flange</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.MassS.png" ALT="Modelica.Mechanics.Translational.Components.Mass" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Mass"
>Mass</A>
</TD><TD>Sliding mass with inertia</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.RodS.png" ALT="Modelica.Mechanics.Translational.Components.Rod" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Rod"
>Rod</A>
</TD><TD>Rod without inertia</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.SpringS.png" ALT="Modelica.Mechanics.Translational.Components.Spring" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Spring"
>Spring</A>
</TD><TD>Linear 1D translational spring</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.DamperS.png" ALT="Modelica.Mechanics.Translational.Components.Damper" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Damper"
>Damper</A>
</TD><TD>Linear 1D translational damper</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.SpringDamperS.png" ALT="Modelica.Mechanics.Translational.Components.SpringDamper" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.SpringDamper"
>SpringDamper</A>
</TD><TD>Linear 1D translational spring and damper in parallel</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.ElastoGapS.png" ALT="Modelica.Mechanics.Translational.Components.ElastoGap" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.ElastoGap"
>ElastoGap</A>
</TD><TD>1D translational spring damper combination with gap</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.SupportFrictionS.png" ALT="Modelica.Mechanics.Translational.Components.SupportFriction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.SupportFriction"
>SupportFriction</A>
</TD><TD>Coulomb friction in support</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.BrakeS.png" ALT="Modelica.Mechanics.Translational.Components.Brake" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Brake"
>Brake</A>
</TD><TD>Brake basend on Coulomb friction</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.IdealGearR2TS.png" ALT="Modelica.Mechanics.Translational.Components.IdealGearR2T" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.IdealGearR2T"
>IdealGearR2T</A>
</TD><TD>Gearbox transforming rotational into translational motion&quot;</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.IdealRollingWheelS.png" ALT="Modelica.Mechanics.Translational.Components.IdealRollingWheel" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.IdealRollingWheel"
>IdealRollingWheel</A>
</TD><TD>Simple 1-dim. model of an ideal rolling wheel without inertia</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlangeS.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange"
>InitializeFlange</A>
</TD><TD>Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.MassWithStopAndFrictionS.png" ALT="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction"
>MassWithStopAndFriction</A>
</TD><TD>Sliding mass with hard stop and Stribeck friction</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.Translational.Components.RelativeStatesS.png" ALT="Modelica.Mechanics.Translational.Components.RelativeStates" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.RelativeStates"
>RelativeStates</A>
</TD><TD>Definition of relative state variables</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Fixed<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.FixedI.png" ALT="Modelica.Mechanics.Translational.Components.Fixed" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Fixed"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Fixed</H2>
<B>Fixed flange</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.FixedD.png" ALT="Modelica.Mechanics.Translational.Components.Fixed">
<H3>Information</H3>
<PRE></pre>
<p>
The <i>flange</i> of a 1D translational mechanical system <i>fixed</i>
at an position s0 in the <i>housing</i>. May be used:
</p>
<ul>
<li> to connect a compliant element, such as a spring or a damper,
     between a sliding mass and the housing.
<li> to fix a rigid element, such as a sliding mass, at a specific
     position.
</ul>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>s0</TD><TD>0</TD><TD>fixed offset position of housing [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange</TD><TD>&nbsp;</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Fixed <font color="darkgreen">&quot;Fixed flange&quot;</font>
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s0=0 <font color="darkgreen">&quot;fixed offset position of housing&quot;</font>;


  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Interfaces.Flange_b</A> flange;
<font color="blue">equation </font>
  flange.s = s0;
<font color="blue">end </font>Fixed;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Mass<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.MassI.png" ALT="Modelica.Mechanics.Translational.Components.Mass" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Mass"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Mass</H2>
<B>Sliding mass with inertia</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.MassD.png" ALT="Modelica.Mechanics.Translational.Components.Mass">
<H3>Information</H3>
<PRE></pre>
<p>
Sliding mass with <i>inertia, without friction</i> and two rigidly connected flanges.
</p>
<p>
The sliding mass has the length L, the position coordinate s is in the middle.
Sign convention: A positive force at flange flange_a moves the sliding mass in the positive direction.
A negative force at flange flange_a moves the sliding mass to the negative direction.
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>Mass</A></TD><TD>m</TD><TD>&nbsp;</TD><TD>mass of the sliding mass [kg]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>L</TD><TD>0</TD><TD>Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.default</TD><TD>Priority to use s and v as states</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of translational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Mass <font color="darkgreen">&quot;Sliding mass with inertia&quot;</font>
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>SI.Mass</A> m(min=0, start=1) <font color="darkgreen">&quot;mass of the sliding mass&quot;</font>;
  <font color="blue">parameter </font>StateSelect stateSelect=StateSelect.default <font color="darkgreen">
    &quot;Priority to use s and v as states&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>Translational.Interfaces.PartialRigid</A>(L=0,s(start=0, stateSelect=stateSelect));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v(start=0, stateSelect=stateSelect) <font color="darkgreen">
    &quot;absolute velocity of component&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a(start=0) <font color="darkgreen">&quot;absolute acceleration of component&quot;</font>;


<font color="blue">equation </font>
  v =<font color="red"> der</font>(s);
  a =<font color="red"> der</font>(v);
  m*a = flange_a.f + flange_b.f;
<font color="blue">end </font>Mass;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Rod<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.RodI.png" ALT="Modelica.Mechanics.Translational.Components.Rod" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Rod"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Rod</H2>
<B>Rod without inertia</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.RodD.png" ALT="Modelica.Mechanics.Translational.Components.Rod">
<H3>Information</H3>
<PRE></pre>
<p>
Rod <i>without inertia</i> and two rigidly connected flanges.
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>L</TD><TD>&nbsp;</TD><TD>Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of translational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Rod <font color="darkgreen">&quot;Rod without inertia&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>Translational.Interfaces.PartialRigid</A>;


<font color="blue">equation </font>
  0 = flange_a.f + flange_b.f;
<font color="blue">end </font>Rod;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Spring<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.SpringI.png" ALT="Modelica.Mechanics.Translational.Components.Spring" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Spring"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Spring</H2>
<B>Linear 1D translational spring</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.SpringD.png" ALT="Modelica.Mechanics.Translational.Components.Spring">
<H3>Information</H3>
<PRE></pre>
<p>
A <i>linear 1D translational spring</i>. The component can be connected either
between two sliding masses, or between
a sliding mass and the housing (model Fixed), to describe
a coupling of the sliding mass with the housing via a spring.
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>TranslationalSpringConstant</A></TD><TD>c</TD><TD>&nbsp;</TD><TD>spring constant  [N/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_rel0</TD><TD>0</TD><TD>unstretched spring length [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_rel.start</TD><TD>0</TD><TD>relative distance (= flange_b.s - flange_a.s) [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of compliant 1-dim. translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of compliant 1-dim. translational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Spring <font color="darkgreen">&quot;Linear 1D translational spring&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliant"
>Translational.Interfaces.PartialCompliant</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>SI.TranslationalSpringConstant</A> c(<font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;spring constant &quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> s_rel0=0 <font color="darkgreen">&quot;unstretched spring length&quot;</font>;


<font color="blue">equation </font>
  f = c*(s_rel - s_rel0);
<font color="blue">end </font>Spring;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Damper<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.DamperI.png" ALT="Modelica.Mechanics.Translational.Components.Damper" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Damper"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Damper</H2>
<B>Linear 1D translational damper</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.DamperD.png" ALT="Modelica.Mechanics.Translational.Components.Damper">
<H3>Information</H3>
<PRE></pre>
<p>
<i>Linear, velocity dependent damper</i> element. It can be either connected
between a sliding mass and the housing (model Fixed), or
between two sliding masses.
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>TranslationalDampingConstant</A></TD><TD>d</TD><TD>&nbsp;</TD><TD>damping constant [N.s/m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_rel.start</TD><TD>0</TD><TD>Relative distance (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_rel.start</TD><TD>0</TD><TD>Relative velocity (= der(s_rel)) [m/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.prefer</TD><TD>Priority to use phi_rel and w_rel as states</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_nominal</TD><TD>1e-4</TD><TD>Nominal value of s_rel (used for scaling) [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of compliant 1-dim. translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of compliant 1-dim. transational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Damper <font color="darkgreen">&quot;Linear 1D translational damper&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates"
>Translational.Interfaces.PartialCompliantWithRelativeStates</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>SI.TranslationalDampingConstant</A> d(<font color="blue">final </font>min=0, start = 0) <font color="darkgreen">
    &quot;damping constant&quot;</font>;

<font color="blue">equation </font>
  f = d*v_rel;
<font color="blue">end </font>Damper;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SpringDamper<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.SpringDamperI.png" ALT="Modelica.Mechanics.Translational.Components.SpringDamper" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.SpringDamper"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.SpringDamper</H2>
<B>Linear 1D translational spring and damper in parallel</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.SpringDamperD.png" ALT="Modelica.Mechanics.Translational.Components.SpringDamper">
<H3>Information</H3>
<PRE></pre>
<p>
A <i>spring and damper element connected in parallel</i>.
The component can be
connected either between two sliding masses to describe the elasticity
and damping, or between a sliding mass and the housing (model Fixed),
to describe a coupling of the sliding mass with the housing via a spring/damper.
<p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>TranslationalSpringConstant</A></TD><TD>c</TD><TD>&nbsp;</TD><TD>spring constant [N/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>TranslationalDampingConstant</A></TD><TD>d</TD><TD>&nbsp;</TD><TD>damping constant [N.s/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>s_rel0</TD><TD>0</TD><TD>unstretched spring length [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_rel.start</TD><TD>0</TD><TD>Relative distance (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_rel.start</TD><TD>0</TD><TD>Relative velocity (= der(s_rel)) [m/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.prefer</TD><TD>Priority to use phi_rel and w_rel as states</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_nominal</TD><TD>1e-4</TD><TD>Nominal value of s_rel (used for scaling) [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of compliant 1-dim. translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of compliant 1-dim. transational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SpringDamper <font color="darkgreen">
  &quot;Linear 1D translational spring and damper in parallel&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates"
>Translational.Interfaces.PartialCompliantWithRelativeStates</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>SI.TranslationalSpringConstant</A> c(<font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;spring constant&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>SI.TranslationalDampingConstant</A> d(<font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;damping constant&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s_rel0=0 <font color="darkgreen">&quot;unstretched spring length&quot;</font>;

<font color="blue">equation </font>
  f = c*(s_rel - s_rel0) + d*v_rel;
<font color="blue">end </font>SpringDamper;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ElastoGap<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.ElastoGapI.png" ALT="Modelica.Mechanics.Translational.Components.ElastoGap" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.ElastoGap"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.ElastoGap</H2>
<B>1D translational spring damper combination with gap</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.ElastoGapD.png" ALT="Modelica.Mechanics.Translational.Components.ElastoGap">
<H3>Information</H3>
<PRE></pre>
<p>
A linear spring damper combination that can lift off.
The component can be connected between a sliding mass and the housing (model
<A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.Fixed"
>Fixed</a>),
to describe the contact of a sliding mass with the housing.
</p>

<p>
As long as s_rel &gt; s_rel0, no force is exerted (s_rel = flange_b.s - flange_a.s).
If s_rel &le; s_rel0, the contact force is basically computed with a linear
spring/damper characteristic:
</p

<pre>
   desiredContactForce = c*(s_rel - s_rel0) + d*<b>der</b>(s_rel)
</pre>

<p>
This force law leads to the following difficulties:
</p>

<ol>
<li> If the damper force becomes larger as the spring force and with opposite sign,
     the contact force would be "pulling/sticking" which is unphysical, since during
     contact only pushing forces can occur.</li>

<li> When contact occurs with a non-zero relative speed (which is the usual
     situation), the damping force has a non-zero value and therefore the contact
     force changes discontinuously at s_rel = s_rel0. Again, this is not physical
     because the force can only change continuously. (Note, this component is not an
     idealized model where a steep characteristic is approximated by a discontinuity,
     but it shall model the steep characteristic.)</li>
</ol>

<p>
In the literature there are several proposals to fix problem (2). However, there
seems to be no proposal to avoid sticking. For this reason, the most simple
approach is used in the ElastoGap model, to fix both problems by slight changes
to the linear spring/damper characteristic:
</p>

<pre>
    <b>if</b> s_rel &gt; s_rel0 <b>then</b>
       f_c = 0;          // spring force
       f_d = 0;          // damper force
       flange_b.f = 0;
    <b>else</b>
       f_c = c*(s_rel - s_rel0);    // spring force
       f_d = d*<b>der</b>(s_rel);          // damper force
       flange_b.f = <b>if</b> f_c + f_d &ge; 0 <b>then</b> 0 <b>else</b> f_c + <b>max</b>( f_c, f_d );
    <b>end if</b>;
</pre>

<p>
Note, when sticking would occur (f_c + f_d &ge; 0), then the contact force
is explicitly set to zero. The "max(f_c, f_d)" part in the if-expression,
limits the damping force when it is pushing. This means that at the start of
the contact (s_rel = s_rel0), the damping force is zero and is continuous.
The effect of both modifications is that the absolute value of the damping force
is always limited by the absolute value of the spring force: |f_d| &le; |f_c|.
</p>

<p>
In the next figure, a typical simulation with the ElastoGap model is shown
(<A HREF="Modelica_Mechanics_Translational_Examples.html#Modelica.Mechanics.Translational.Examples.ElastoGap"
>Examples.ElastoGap</a>)
where the different effects are visualized:
</p>

<ol>
<li> Curve 1 (elastoGap1.f) is the unmodified contact force, i.e., the linear spring/damper
     characteristic. A pulling/sticking force is present at the end of the contact.</li>
<li> Curve 2 (elastoGap2.f) is the contact force, where the force is explicitly set to
     zero when pulling/sticking occurs. The contact force is discontinuous at being of
     the contact.</li>
<li> Curve 3 (elastoGap3.f) is the ElastoGap model of this library. No discontinuity and no
     pulling/sticking occurs.</li>
</ol>

<p align="center">
<img src="../Images/Translational/ElastoGap1.png">
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>TranslationalSpringConstant</A></TD><TD>c</TD><TD>&nbsp;</TD><TD>Spring constant [N/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>TranslationalDampingConstant</A></TD><TD>d</TD><TD>&nbsp;</TD><TD>Damping constant [N.s/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>s_rel0</TD><TD>0</TD><TD>Unstretched spring length [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_rel.start</TD><TD>0</TD><TD>Relative distance (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_rel.start</TD><TD>0</TD><TD>Relative velocity (= der(s_rel)) [m/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.prefer</TD><TD>Priority to use phi_rel and w_rel as states</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>s_nominal</TD><TD>1e-4</TD><TD>Nominal value of s_rel (used for scaling) [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of compliant 1-dim. translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of compliant 1-dim. transational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ElastoGap <font color="darkgreen">&quot;1D translational spring damper combination with gap&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialCompliantWithRelativeStates"
>Translational.Interfaces.PartialCompliantWithRelativeStates</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalSpringConstant"
>SI.TranslationalSpringConstant</A> c(<font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;Spring constant&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.TranslationalDampingConstant"
>SI.TranslationalDampingConstant</A> d(<font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;Damping constant&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s_rel0=0 <font color="darkgreen">&quot;Unstretched spring length&quot;</font>;


<font color="darkgreen">/*
Please note that initialization might fail due to the nonlinear spring characteristic
(spring force is zero for s_rel &gt; s_rel0)
if a positive force is acting on the element and no other force balances this force
(e.g. when setting both initial velocity and acceleration to 0)
*/</font>
<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f_c <font color="darkgreen">&quot;Spring force&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f_d <font color="darkgreen">&quot;Unmodified damping force&quot;</font>;
<font color="blue">equation </font>
  <font color="darkgreen">// Modify contact force, so that it is only &quot;pushing&quot; and not</font>
  <font color="darkgreen">// &quot;pulling/sticking&quot; and that it is continous near lift off</font>
  <font color="blue">if </font>s_rel &gt; s_rel0<font color="blue"> then</font>
     f_c = 0;
     f_d = 0;
     f   = 0;
  <font color="blue">else</font>
     f_c = c*(s_rel - s_rel0);
     f_d = d*v_rel;
     f   =<font color="red"> smooth</font>(0,<font color="red"> noEvent</font>(<font color="blue">if </font>(f_c + f_d) &gt;= 0<font color="blue"> then </font>0<font color="blue"> else </font>f_c +<font color="red"> max</font>(f_c, f_d)));
  <font color="blue">end if</font>;
<font color="blue">end </font>ElastoGap;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE SupportFriction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.SupportFrictionI.png" ALT="Modelica.Mechanics.Translational.Components.SupportFriction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.SupportFriction"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.SupportFriction</H2>
<B>Coulomb friction in support</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.SupportFrictionD.png" ALT="Modelica.Mechanics.Translational.Components.SupportFriction">
<H3>Information</H3>
<PRE></pre>
<p>
This element describes <b>Coulomb friction</b> in <b>support</b>,
i.e., a frictional force acting between a flange and the housing.
The positive sliding friction force "f" has to be defined
by table "f_pos" as function of the absolute velocity "v".
E.g.
<p>
<pre>
       v |   f
      ---+-----
       0 |   0
       1 |   2
       2 |   5
       3 |   8
</pre>
<p>
gives the following table:
</p>
<pre>
   f_pos = [0, 0; 1, 2; 2, 5; 3, 8];
</pre>
<p>
Currently, only linear interpolation in the table is supported.
Outside of the table, extrapolation through the last
two table entries is used. It is assumed that the negative
sliding friction force has the same characteristic with negative
values. Friction is modelled in the following way:
</p>
<p>
When the absolute velocity "v" is not zero, the friction force
is a function of v and of a constant normal force. This dependency
is defined via table f_pos and can be determined by measurements,
e.g. by driving the gear with constant velocity and measuring the
needed driving force (= friction force).
</p>
<p>
When the absolute velocity becomes zero, the elements
connected by the friction element become stuck, i.e., the absolute
position remains constant. In this phase the friction force is
calculated from a force balance due to the requirement, that
the absolute acceleration shall be zero.  The elements begin
to slide when the friction force exceeds a threshold value,
called the maximum static friction force, computed via:
</p>
<pre>
   maximum_static_friction = <b>peak</b> * sliding_friction(v=0)  (<b>peak</b> >= 1)
</pre>
<p>
This procedure is implemented in a "clean" way by state events and
leads to continuous/discrete systems of equations if friction elements
are dynamically coupled which have to be solved by appropriate
numerical methods. The method is described in:
</p>
<dl>
<dt>Otter M., Elmqvist H., and Mattsson S.E. (1999):
<dd><b>Hybrid Modeling in Modelica based on the Synchronous
    Data Flow Principle</b>. CACSD'99, Aug. 22.-26, Hawaii.
</dl>
<p>
More precise friction models take into account the elasticity of the
material when the two elements are "stuck", as well as other effects,
like hysteresis. This has the advantage that the friction element can
be completely described by a differential equation without events. The
drawback is that the system becomes stiff (about 10-20 times slower
simulation) and that more material constants have to be supplied which
requires more sophisticated identification. For more details, see the
following references, especially (Armstrong and Canudas de Witt 1996):
</p>
<dl>
<dt>Armstrong B. (1991):
<dd><b>Control of Machines with Friction</b>. Kluwer Academic
    Press, Boston MA.<br><br>
<dt>Armstrong B., and Canudas de Wit C. (1996):
<dd><b>Friction Modeling and Compensation.</b>
    The Control Handbook, edited by W.S.Levine, CRC Press,
    pp. 1369-1382.<br><br>
<dt>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995):
<dd><b>A new model for control of systems with friction.</b>
    IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.<br><br>
</dl>


<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>useSupport</TD><TD>false</TD><TD>= true, if support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD>Real</TD><TD>f_pos[:, 2]</TD><TD>[0, 1]</TD><TD>[v, f] Positive sliding friction characteristic (v&gt;=0)</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>1</TD><TD>peak*f_pos[1,2] = Maximum friction force for v==0</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Boolean</TD><TD>startForward.start</TD><TD><B>false</B></TD><TD>true, if v_rel=0 and start of forward sliding</TD></TR>
<TR><TD>Boolean</TD><TD>startBackward.start</TD><TD><B>false</B></TD><TD>true, if v_rel=0 and start of backward sliding</TD></TR>
<TR><TD>Boolean</TD><TD>locked.start</TD><TD>false</TD><TD>true, if v_rel=0 and not sliding</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_small</TD><TD>1e-3</TD><TD>Relative velocity near to zero (see model info text) [m/s]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Flange of left shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Flange of right shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support"
>Support</A></TD><TD>support</TD><TD>Support/housing of component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> SupportFriction <font color="darkgreen">&quot;Coulomb friction in support&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport"
>Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport</A>;
  <font color="blue">parameter </font>Real f_pos[:, 2]=[0, 1] <font color="darkgreen">
    &quot;[v, f] Positive sliding friction characteristic (v&gt;=0)&quot;</font>;
  <font color="blue">parameter </font>Real peak(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">
    &quot;peak*f_pos[1,2] = Maximum friction force for v==0&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialFriction"
>Translational.Interfaces.PartialFriction</A>;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v <font color="darkgreen">&quot;Absolute velocity of flange_a and flange_b&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a <font color="darkgreen">&quot;Absolute acceleration of flange_a and flange_b&quot;</font>;
<font color="blue">equation </font>
  <font color="darkgreen">// Constant auxiliary variables</font>
  f0 =<font color="red"> Modelica.Math.tempInterpol1</font>(0, f_pos, 2);
  f0_max = peak*f0;
  free = false;

  s = s_a;
  s = s_b;

<font color="darkgreen">// velocity and acceleration of flanges</font>
  v =<font color="red"> der</font>(s);
  a =<font color="red"> der</font>(v);
  v_relfric = v;
  a_relfric = a;

<font color="darkgreen">// Friction force</font>
  flange_a.f + flange_b.f + f = 0;

<font color="darkgreen">// Friction force</font>
  f = <font color="blue">if </font>locked<font color="blue"> then </font>sa*unitForce<font color="blue"> else </font>
     (<font color="blue">if </font>startForward<font color="blue"> then </font><font color="red">         Modelica.Math.tempInterpol1</font>( v, f_pos, 2)<font color="blue"> else </font>
      <font color="blue">if </font>startBackward<font color="blue"> then </font>       -<font color="red">Modelica.Math.tempInterpol1</font>(-v, f_pos, 2)<font color="blue"> else </font>
      <font color="blue">if </font><font color="red">pre</font>(mode) == Forward<font color="blue"> then </font><font color="red"> Modelica.Math.tempInterpol1</font>( v, f_pos, 2)<font color="blue"> else </font>
                                   -<font color="red">Modelica.Math.tempInterpol1</font>(-v, f_pos, 2));
<font color="blue">end </font>SupportFriction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Brake<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.BrakeI.png" ALT="Modelica.Mechanics.Translational.Components.Brake" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.Brake"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.Brake</H2>
<B>Brake basend on Coulomb friction</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.BrakeD.png" ALT="Modelica.Mechanics.Translational.Components.Brake">
<H3>Information</H3>
<PRE></pre>
<p>
This component models a <b>brake</b>, i.e., a component where a frictional
force is acting between the housing and a flange and a controlled normal
force presses the flange to the housing in order to increase friction.
The normal force fn has to be provided as input signal f_normalized in a normalized form
(0 &le; f_normalized &le; 1),
fn = fn_max*f_normalized, where fn_max has to be provided as parameter.
Friction in the brake is modelled in the following way:
</p>
<p>
When the absolute velocity "v" is not zero, the friction force
is a function of the velocity dependent friction coefficient  mue(v) , of
the normal force "fn", and of a geometry constant "cgeo" which takes into
account the geometry of the device and the assumptions on the friction
distributions:
</p>
<pre>
        frictional_force = <b>cgeo</b> * <b>mue</b>(v) * <b>fn</b>
</pre>
<p>
   Typical values of coefficients of friction:
</p>
<pre>
      dry operation   :  <b>mue</b> = 0.2 .. 0.4
      operating in oil:  <b>mue</b> = 0.05 .. 0.1
</pre>
<p>
    The positive part of the friction characteristic <b>mue</b>(v),
    v >= 0, is defined via table mue_pos (first column = v,
    second column = mue). Currently, only linear interpolation in
    the table is supported.
</p>
<p>
   When the absolute velocity becomes zero, the elements
   connected by the friction element become stuck, i.e., the absolute
   position remains constant. In this phase the friction force is
   calculated from a force balance due to the requirement, that
   the absolute acceleration shall be zero.  The elements begin
   to slide when the friction force exceeds a threshold value,
   called the  maximum static friction force, computed via:
</p>
<pre>
       frictional_force = <b>peak</b> * <b>cgeo</b> * <b>mue</b>(w=0) * <b>fn</b>   (<b>peak</b> >= 1)
</pre>
<p>
This procedure is implemented in a "clean" way by state events and
leads to continuous/discrete systems of equations if friction elements
are dynamically coupled. The method is described in:
</p>
<dl>
<dt>Otter M., Elmqvist H., and Mattsson S.E. (1999):
<dd><b>Hybrid Modeling in Modelica based on the Synchronous
    Data Flow Principle</b>. CACSD'99, Aug. 22.-26, Hawaii.
</dl>
<p>
More precise friction models take into account the elasticity of the
material when the two elements are "stuck", as well as other effects,
like hysteresis. This has the advantage that the friction element can
be completely described by a differential equation without events. The
drawback is that the system becomes stiff (about 10-20 times slower
simulation) and that more material constants have to be supplied which
requires more sophisticated identification. For more details, see the
following references, especially (Armstrong and Canudas de Witt 1996):
</p>
<dl>
<dt>Armstrong B. (1991):
<dd><b>Control of Machines with Friction</b>. Kluwer Academic
    Press, Boston MA.<br><br>
<dt>Armstrong B., and Canudas de Wit C. (1996):
<dd><b>Friction Modeling and Compensation.</b>
    The Control Handbook, edited by W.S.Levine, CRC Press,
    pp. 1369-1382.<br><br>
<dt>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995):
<dd><b>A new model for control of systems with friction.</b>
    IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.<br><br>
</dl>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>useSupport</TD><TD>false</TD><TD>= true, if support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD>Real</TD><TD>mue_pos[:, 2]</TD><TD>[0, 0.5]</TD><TD>[v, f] Positive sliding friction characteristic (v&gt;=0)</TD></TR>
<TR><TD>Real</TD><TD>peak</TD><TD>1</TD><TD>peak*mue_pos[1,2] = Maximum friction force for v==0</TD></TR>
<TR><TD>Real</TD><TD>cgeo</TD><TD>1</TD><TD>Geometry constant containing friction distribution assumption</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>Force</A></TD><TD>fn_max</TD><TD>&nbsp;</TD><TD>Maximum normal force [N]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Boolean</TD><TD>startForward.start</TD><TD><B>false</B></TD><TD>true, if v_rel=0 and start of forward sliding</TD></TR>
<TR><TD>Boolean</TD><TD>startBackward.start</TD><TD><B>false</B></TD><TD>true, if v_rel=0 and start of backward sliding</TD></TR>
<TR><TD>Boolean</TD><TD>locked.start</TD><TD>false</TD><TD>true, if v_rel=0 and not sliding</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_small</TD><TD>1e-3</TD><TD>Relative velocity near to zero (see model info text) [m/s]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Flange of left shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Flange of right shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support"
>Support</A></TD><TD>support</TD><TD>Support/housing of component</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>f_normalized</TD><TD>Normalized force signal 0..1 (normal force = fn_max*f_normalized; brake is active if &gt; 0)</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> Brake <font color="darkgreen">&quot;Brake basend on Coulomb friction&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport"
>Modelica.Mechanics.Translational.Interfaces.PartialElementaryTwoFlangesAndSupport</A>;
  <font color="blue">parameter </font>Real mue_pos[:, 2]=[0, 0.5] <font color="darkgreen">
    &quot;[v, f] Positive sliding friction characteristic (v&gt;=0)&quot;</font>;
  <font color="blue">parameter </font>Real peak(<font color="blue">final </font>min=1) = 1 <font color="darkgreen">
    &quot;peak*mue_pos[1,2] = Maximum friction force for v==0&quot;</font>;
  <font color="blue">parameter </font>Real cgeo(<font color="blue">final </font>min=0) = 1 <font color="darkgreen">
    &quot;Geometry constant containing friction distribution assumption&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> fn_max(<font color="blue">final </font>min=0, start=1) <font color="darkgreen">&quot;Maximum normal force&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialFriction"
>Translational.Interfaces.PartialFriction</A>;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v <font color="darkgreen">&quot;Absolute velocity of flange_a and flange_b&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a <font color="darkgreen">&quot;Absolute acceleration of flange_a and flange_b&quot;</font>;

  Real mue0 <font color="darkgreen">&quot;Friction coefficient for v=0 and forward sliding&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> fn <font color="darkgreen">&quot;Normal force (=fn_max*f_normalized)&quot;</font>;

  <font color="darkgreen">// Constant auxiliary variable</font>
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> f_normalized <font color="darkgreen">
    &quot;Normalized force signal 0..1 (normal force = fn_max*f_normalized; brake is active if &gt; 0)&quot;</font>;
<font color="blue">equation </font>
  mue0 =<font color="red"> Modelica.Math.tempInterpol1</font>(0, mue_pos, 2);

  s = s_a;
  s = s_b;

<font color="darkgreen">// velocity and acceleration of flanges flange_a and flange_b</font>
  v =<font color="red"> der</font>(s);
  a =<font color="red"> der</font>(v);
  v_relfric = v;
  a_relfric = a;

<font color="darkgreen">// Friction force, normal force and friction force for v_rel=0</font>
  flange_a.f + flange_b.f + f = 0;
  fn = fn_max*f_normalized;
  f0 = mue0*cgeo*fn;
  f0_max = peak*f0;
  free = fn &lt;= 0;

  <font color="darkgreen">// friction force</font>
  f = <font color="blue">if </font>locked<font color="blue"> then </font>sa*unitForce<font color="blue"> else </font>
      <font color="blue">if </font>free<font color="blue"> then </font>  0<font color="blue"> else </font>
      cgeo*fn*(<font color="blue">if </font>startForward<font color="blue"> then </font><font color="red">         Modelica.Math.tempInterpol1</font>( v, mue_pos, 2)<font color="blue"> else </font>
               <font color="blue">if </font>startBackward<font color="blue"> then </font>       -<font color="red">Modelica.Math.tempInterpol1</font>(-v, mue_pos, 2)<font color="blue"> else </font>
               <font color="blue">if </font><font color="red">pre</font>(mode) == Forward<font color="blue"> then </font><font color="red"> Modelica.Math.tempInterpol1</font>( v, mue_pos, 2)<font color="blue"> else </font>
                                            -<font color="red">Modelica.Math.tempInterpol1</font>(-v, mue_pos, 2));
<font color="blue">end </font>Brake;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE IdealGearR2T<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.IdealGearR2TI.png" ALT="Modelica.Mechanics.Translational.Components.IdealGearR2T" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.IdealGearR2T"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.IdealGearR2T</H2>
<B>Gearbox transforming rotational into translational motion&quot;</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.IdealGearR2TD.png" ALT="Modelica.Mechanics.Translational.Components.IdealGearR2T">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>useSupportR</TD><TD>false</TD><TD>= true, if rotational support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD>Boolean</TD><TD>useSupportT</TD><TD>false</TD><TD>= true, if translational support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD>Real</TD><TD>ratio</TD><TD>&nbsp;</TD><TD>Transmission ratio (flange_a.phi/flange_b.s) [rad/m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flangeR</TD><TD>Flange of rotational shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flangeT</TD><TD>Flange of translational rod</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Support"
>Support</A></TD><TD>supportR</TD><TD>Rotational support/housing of component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support"
>Support</A></TD><TD>supportT</TD><TD>Translational support/housing of component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> IdealGearR2T <font color="darkgreen">
  &quot;Gearbox transforming rotational into translational motion\&quot;&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealGearR2T"
>Modelica.Mechanics.Rotational.Components.IdealGearR2T</A>;
<font color="blue">equation </font>

<font color="blue">end </font>IdealGearR2T;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE IdealRollingWheel<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.IdealRollingWheelI.png" ALT="Modelica.Mechanics.Translational.Components.IdealRollingWheel" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.IdealRollingWheel"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.IdealRollingWheel</H2>
<B>Simple 1-dim. model of an ideal rolling wheel without inertia</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.IdealGearR2TD.png" ALT="Modelica.Mechanics.Translational.Components.IdealRollingWheel">
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>useSupportR</TD><TD>false</TD><TD>= true, if rotational support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD>Boolean</TD><TD>useSupportT</TD><TD>false</TD><TD>= true, if translational support flange enabled, otherwise implicitly grounded</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>radius</TD><TD>&nbsp;</TD><TD>Wheel radius [m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flangeR</TD><TD>Flange of rotational shaft</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flangeT</TD><TD>Flange of translational rod</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Rotational_Interfaces.html#Modelica.Mechanics.Rotational.Interfaces.Support"
>Support</A></TD><TD>supportR</TD><TD>Rotational support/housing of component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Support"
>Support</A></TD><TD>supportT</TD><TD>Translational support/housing of component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> IdealRollingWheel <font color="darkgreen">
  &quot;Simple 1-dim. model of an ideal rolling wheel without inertia&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Rotational_Components.html#Modelica.Mechanics.Rotational.Components.IdealRollingWheel"
>Modelica.Mechanics.Rotational.Components.IdealRollingWheel</A>;
<font color="blue">equation </font>

<font color="blue">end </font>IdealRollingWheel;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE InitializeFlange<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlangeI.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.InitializeFlange"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.InitializeFlange</H2>
<B>Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlangeD.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange">
<H3>Information</H3>
<PRE></pre>
<p>
This component is used to optionally initialize the position, speed,
and/or acceleration of the flange to which this component
is connected. Via parameters use_s_start, use_v_start, use_a_start
the corresponding input signals s_start, v_start, a_start are conditionally
activated. If an input is activated, the corresponding flange property
is initialized with the input value at start time.
</p>

<p>
For example, if "use_s_start = true", then flange.s is initialized
with the value of the input signal "s_start" at the start time.
</p>

<p>
Additionally, it is optionally possible to define the "StateSelect"
attribute of the flange position and the flange speed via paramater
"stateSelection".
</p>

<p>
This component is especially useful when the initial values of a flange
shall be set according to reference signals of a controller that are
provided via a signal bus.
</p>

<pre></PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>use_s_start</TD><TD>true</TD><TD>= true, if initial position is defined by input s_start, otherwise not initialized</TD></TR>
<TR><TD>Boolean</TD><TD>use_v_start</TD><TD>true</TD><TD>= true, if initial speed is defined by input v_start, otherwise not initialized</TD></TR>
<TR><TD>Boolean</TD><TD>use_a_start</TD><TD>true</TD><TD>= true, if initial acceleration is defined by input a_start, otherwise not initialized</TD></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.default</TD><TD>Priority to use flange angle and speed as states</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>s_start</TD><TD>Initial position of flange</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>v_start</TD><TD>Initial speed of flange</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>a_start</TD><TD>Initial angular acceleration of flange</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange</TD><TD>Flange that is initialized</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> InitializeFlange <font color="darkgreen">
  &quot;Initializes a flange with pre-defined position, speed and acceleration (usually, this is reference data from a control bus)&quot;</font>
  <font color="blue">import </font>Modelica.Blocks.Types.StateSelection;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <font color="blue">parameter </font>Boolean use_s_start = true <font color="darkgreen">
    &quot;= true, if initial position is defined by input s_start, otherwise not initialized&quot;</font>;
  <font color="blue">parameter </font>Boolean use_v_start = true <font color="darkgreen">
    &quot;= true, if initial speed is defined by input v_start, otherwise not initialized&quot;</font>;
  <font color="blue">parameter </font>Boolean use_a_start = true <font color="darkgreen">
    &quot;= true, if initial acceleration is defined by input a_start, otherwise not initialized&quot;</font>;

  <font color="blue">parameter </font>StateSelect stateSelect=StateSelect.default <font color="darkgreen">
    &quot;Priority to use flange angle and speed as states&quot;</font>;

  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> s_start <font color="blue">if </font>use_s_start <font color="darkgreen">
    &quot;Initial position of flange&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> v_start <font color="blue">if </font>use_v_start <font color="darkgreen">
    &quot;Initial speed of flange&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> a_start <font color="blue">if </font>use_a_start <font color="darkgreen">
    &quot;Initial angular acceleration of flange&quot;</font>;
  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Interfaces.Flange_b</A> flange <font color="darkgreen">&quot;Flange that is initialized&quot;</font>;

  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Modelica.SIunits.Position</A> s_flange(stateSelect=stateSelect)=flange.s <font color="darkgreen">
    &quot;Flange position&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</A> v_flange(stateSelect=stateSelect)=<font color="red"> der</font>(s_flange) <font color="darkgreen">
    &quot;= der(s_flange)&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">encapsulated </font><font color="blue">model</font> Set_s_start <font color="darkgreen">&quot;Set s_start&quot;</font>
    <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
    <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
    <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> s_start <font color="darkgreen">&quot;Start position&quot;</font>;

    <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
  <font color="blue">initial </font><font color="blue">equation </font>
    flange.s = s_start;
  <font color="blue">equation </font>
    flange.f = 0;
  <font color="blue">end </font>Set_s_start;

  <font color="blue">encapsulated </font><font color="blue">model</font> Set_v_start <font color="darkgreen">&quot;Set v_start&quot;</font>
    <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
    <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
    <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> v_start <font color="darkgreen">&quot;Start velocity&quot;</font>;

    <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
  <font color="blue">initial </font><font color="blue">equation </font>
    <font color="red">der</font>(flange.s) = v_start;
  <font color="blue">equation </font>
    flange.f = 0;
  <font color="blue">end </font>Set_v_start;

  <font color="blue">encapsulated </font><font color="blue">model</font> Set_a_start <font color="darkgreen">&quot;Set a_start&quot;</font>
    <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
    <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
    <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> a_start <font color="darkgreen">&quot;Start acceleration&quot;</font>;

    <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange(s(stateSelect=StateSelect.avoid));
    <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</A> v = <font color="red">der</font>(flange.s);
  <font color="blue">initial </font><font color="blue">equation </font>
    <font color="red">der</font>(v) = a_start;
  <font color="blue">equation </font>
    flange.f = 0;
  <font color="blue">end </font>Set_a_start;

  <font color="blue">encapsulated </font><font color="blue">model</font> Set_flange_f <font color="darkgreen">&quot;Set flange_f to zero&quot;</font>
    <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
    <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
    <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
  <font color="blue">equation </font>
    flange.f = 0;
  <font color="blue">end </font>Set_flange_f;
<font color="blue">protected </font>
  <A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_start"
>Set_s_start</A> set_s_start <font color="blue">if </font>use_s_start;
  <A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_start"
>Set_v_start</A> set_v_start <font color="blue">if </font>use_v_start;
  <A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_start"
>Set_a_start</A> set_a_start <font color="blue">if </font>use_a_start;
  <A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_f"
>Set_flange_f</A> set_flange_f;
<font color="blue">equation </font>
  <font color="red">connect</font>(set_s_start.flange, flange);
  <font color="red">connect</font>(set_v_start.flange, flange);
  <font color="red">connect</font>(set_a_start.flange, flange);
  <font color="red">connect</font>(set_flange_f.flange, flange);
  <font color="red">connect</font>(s_start, set_s_start.s_start);
  <font color="red">connect</font>(v_start, set_v_start.v_start);
  <font color="red">connect</font>(a_start, set_a_start.a_start);
<font color="blue">end </font>InitializeFlange;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE MassWithStopAndFriction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.MassWithStopAndFrictionI.png" ALT="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.MassWithStopAndFriction</H2>
<B>Sliding mass with hard stop and Stribeck friction</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.MassWithStopAndFrictionD.png" ALT="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction">
<H3>Information</H3>
<PRE>
</pre>
<P>This element describes the <i>Stribeck friction characteristics</i> of a sliding mass,
i. e. the frictional force acting between the sliding mass and the support. Included is a
<i>hard stop</i> for the position. <BR>
The surface is fixed and there is friction between sliding mass and surface.
The frictional force f is given for positive velocity v by:</P>
<i><uL>
f = F_Coulomb + F_prop * v + F_Stribeck * exp (-fexp * v)</i> </ul><br>
<IMG SRC=../Images/Translational/Stribeck.png>
<br><br>
The distance between the left and the right connector is given by parameter L.
The position of the center of gravity, coordinate s, is in the middle between
the two flanges. </p>
<p>
There are hard stops at smax and smin, i. e. if <i><uL>
flange_a.s &gt;= smin
<ul>    and </ul>
flange_b.s &lt;= xmax </ul></i>
the sliding mass can move freely.</p>
<p>When the absolute velocity becomes zero, the sliding mass becomes stuck, i.e., the absolute position remains constant. In this phase the
friction force is calculated from a force balance due to the requirement that the
absolute acceleration shall be zero. The elements begin to slide when the friction
force exceeds a threshold value, called the maximum static friction force, computed via: </P>
<i><uL>
   maximum_static_friction =  F_Coulomb + F_Stribeck
</i> </ul>
<font color="#ff0000"> <b>This requires the states Stop.s and Stop.v</b> </font>. If these states are eliminated during the index reduction
the model will not work. To avoid this any inertias should be connected via springs
to the Stop element, other sliding masses, dampers or hydraulic chambers must be avoided. </p>
<p>For more details of the used friction model see the following reference: <br> <br>
Beater P. (1999): <DD><a href="http://www.springer.de/cgi-bin/search_book.pl?isbn=3-540-65444-5">
Entwurf hydraulischer Maschinen</a>. Springer Verlag Berlin Heidelberg New York.</DL></P>
<P>The friction model is implemented in a "clean" way by state events and leads to
continuous/discrete systems of equations which have to be solved by appropriate
numerical methods. The method is described in: </P>

<dl>
Otter M., Elmqvist H., and Mattsson S.E. (1999):
<i><DD>Hybrid Modeling in Modelica based on the Synchronous Data Flow Principle</i>. CACSD'99, Aug. 22.-26, Hawaii. </DD>
</DL>
<P>More precise friction models take into account the elasticity of the material when
the two elements are "stuck", as well as other effects, like hysteresis. This has
the advantage that the friction element can be completely described by a differential
equation without events. The drawback is that the system becomes stiff (about 10-20 times
slower simulation) and that more material constants have to be supplied which requires more
sophisticated identification. For more details, see the following references, especially
(Armstrong and Canudas de Witt 1996): </P>
<dl>
<dt>
Armstrong B. (1991):</dt>
<DD><i>Control of Machines with Friction</i>. Kluwer Academic Press, Boston MA.<BR>
</DD>
<DT>Armstrong B., and Canudas de Wit C. (1996): </DT>
<DD><i>Friction Modeling and Compensation.</i> The Control Handbook, edited by W.S.Levine, CRC Press, pp. 1369-1382.<BR>
</DD>
<DT>Canudas de Wit C., Olsson H., Astroem K.J., and Lischinsky P. (1995): </DT>
<DD>A<i> new model for control of systems with friction.</i> IEEE Transactions on Automatic Control, Vol. 40, No. 3, pp. 419-425.<BR>
</DD>
</DL>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>smax</TD><TD>&nbsp;</TD><TD>Right stop for (right end of) sliding mass [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>smin</TD><TD>&nbsp;</TD><TD>Left stop for (left end of) sliding mass [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>L</TD><TD>&nbsp;</TD><TD>Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>Mass</A></TD><TD>m</TD><TD>&nbsp;</TD><TD>mass [kg]</TD></TR>
<TR><TD>Real</TD><TD>F_prop</TD><TD>&nbsp;</TD><TD>Velocity dependent friction [N.s/m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>Force</A></TD><TD>F_Coulomb</TD><TD>&nbsp;</TD><TD>Constant friction: Coulomb force [N]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>Force</A></TD><TD>F_Stribeck</TD><TD>&nbsp;</TD><TD>Stribeck effect [N]</TD></TR>
<TR><TD>Real</TD><TD>fexp</TD><TD>&nbsp;</TD><TD>Exponential decay [s/m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Initialization</TD></TR>
<TR><TD>Boolean</TD><TD>startForward.start</TD><TD><B>false</B></TD><TD>= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small</TD></TR>
<TR><TD>Boolean</TD><TD>startBackward.start</TD><TD><B>false</B></TD><TD>= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small</TD></TR>
<TR><TD>Boolean</TD><TD>locked.start</TD><TD>false</TD><TD>true, if v_rel=0 and not sliding</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>s.start</TD><TD>0</TD><TD>Absolute position of center of component (s = flange_a.s + L/2 = flange_b.s - L/2) [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_small</TD><TD>1e-3</TD><TD>Relative velocity near to zero (see model info text) [m/s]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of translational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> MassWithStopAndFriction <font color="darkgreen">
  &quot;Sliding mass with hard stop and Stribeck friction&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop"
>PartialFrictionWithStop</A>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v(start=0, stateSelect = StateSelect.always) <font color="darkgreen">
    &quot;Absolute velocity of flange_a and flange_b&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a(start=0) <font color="darkgreen">&quot;Absolute acceleration of flange_a and flange_b&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Mass"
>Modelica.SIunits.Mass</A> m(start=1) <font color="darkgreen">&quot;mass&quot;</font>;
  <font color="blue">parameter </font>Real F_prop(<font color="blue">final </font>unit=&quot;N.s/m&quot;, <font color="blue">final </font>min=0, start = 1) <font color="darkgreen">
    &quot;Velocity dependent friction&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>Modelica.SIunits.Force</A> F_Coulomb(start=5) <font color="darkgreen">
    &quot;Constant friction: Coulomb force&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>Modelica.SIunits.Force</A> F_Stribeck(start=10) <font color="darkgreen">&quot;Stribeck effect&quot;</font>;
  <font color="blue">parameter </font>Real fexp(<font color="blue">final </font>unit=&quot;s/m&quot;, <font color="blue">final </font>min=0, start = 2) <font color="darkgreen">
    &quot;Exponential decay&quot;</font>;
<font color="blue">encapsulated </font><font color="blue">partial </font><font color="blue">model</font> PartialFrictionWithStop <font color="darkgreen">
    &quot;Base model of Coulomb friction elements with stop&quot;</font>

    <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
    <font color="blue">import </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>Modelica.Mechanics.Translational.Interfaces.PartialRigid</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> smax(start= 25) <font color="darkgreen">
      &quot;Right stop for (right end of) sliding mass&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> smin(start=-25) <font color="darkgreen">
      &quot;Left stop for (left end of) sliding mass&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_small=1e-3 <font color="darkgreen">
      &quot;Relative velocity near to zero (see model info text)&quot;</font>;
<font color="darkgreen">// Equations to define the following variables have to be defined in subclasses</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_relfric <font color="darkgreen">&quot;Relative velocity between frictional surfaces&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a_relfric <font color="darkgreen">&quot;Relative acceleration between frictional surfaces&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f <font color="darkgreen">
      &quot;Friction force (positive, if directed in opposite direction of v_rel)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f0 <font color="darkgreen">&quot;Friction force for v=0 and forward sliding&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f0_max <font color="darkgreen">&quot;Maximum friction force for v=0 and locked&quot;</font>;
  Boolean free <font color="darkgreen">&quot;true, if frictional element is not active&quot;</font>;
<font color="darkgreen">// Equations to define the following variables are given in this class</font>
  Real sa(unit=&quot;1&quot;) <font color="darkgreen">
      &quot;Path parameter of friction characteristic f = f(a_relfric)&quot;</font>;
  Boolean startForward(start=false, fixed=true) <font color="darkgreen">
      &quot;= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small&quot;</font>;
  Boolean startBackward(start=false, fixed=true) <font color="darkgreen">
      &quot;= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small&quot;</font>;
  Boolean locked(start=false) <font color="darkgreen">&quot;true, if v_rel=0 and not sliding&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>PartialRigid</A>(s(start=0, stateSelect = StateSelect.always));
  <font color="blue">constant </font>Integer Unknown=3 <font color="darkgreen">&quot;Value of mode is not known&quot;</font>;
  <font color="blue">constant </font>Integer Free=2 <font color="darkgreen">&quot;Element is not active&quot;</font>;
  <font color="blue">constant </font>Integer Forward=1 <font color="darkgreen">&quot;v_rel &gt; 0 (forward sliding)&quot;</font>;
  <font color="blue">constant </font>Integer Stuck=0 <font color="darkgreen">
      &quot;v_rel = 0 (forward sliding, locked or backward sliding)&quot;</font>;
  <font color="blue">constant </font>Integer Backward=-1 <font color="darkgreen">&quot;v_rel &lt; 0 (backward sliding)&quot;</font>;
  Integer mode(
    <font color="blue">final </font>min=Backward,
    <font color="blue">final </font>max=Unknown,
    start=Unknown, fixed=true);
  <font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> unitAcceleration = 1;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> unitForce = 1;
<font color="blue">equation </font>
<font color="darkgreen">/* Friction characteristic
   (locked is introduced to help the Modelica translator determining
   the different structural configurations,
   if for each configuration special code shall be generated)
*/</font>
  startForward  =<font color="red"> pre</font>(mode) == Stuck<font color="blue"> and </font>
    (<font color="red">pre</font>(startForward)<font color="blue">  or </font>sa &gt;  f0_max/unitForce<font color="blue"> and </font>sa &gt;  f0/unitForce<font color="blue"> and </font>s &lt; (smax - L/2))<font color="blue"> or </font>
    <font color="red">pre</font>(mode) == Backward<font color="blue"> and </font>v_relfric &gt;  v_small<font color="blue"> or </font><font color="red">initial</font>()<font color="blue"> and </font>v_relfric &gt; 0;
  startBackward =<font color="red"> pre</font>(mode) == Stuck<font color="blue"> and </font>
    (<font color="red">pre</font>(startBackward)<font color="blue"> or </font>sa &lt; -f0_max/unitForce<font color="blue"> and </font>sa &lt; -f0/unitForce<font color="blue"> and </font>s &gt; (smin + L/2))<font color="blue"> or </font>
    <font color="red">pre</font>(mode) == Forward<font color="blue">  and </font>v_relfric &lt; -v_small<font color="blue"> or </font><font color="red">initial</font>()<font color="blue"> and </font>v_relfric &lt; 0;
  locked = <font color="blue">not </font>free<font color="blue"> and </font>
    <font color="blue">not </font>(<font color="red">pre</font>(mode) == Forward<font color="blue"> or </font>startForward<font color="blue"> or </font><font color="red">pre</font>(mode) == Backward<font color="blue"> or </font>startBackward);
  a_relfric/unitAcceleration = <font color="blue">if </font>locked<font color="blue"> then </font>              0<font color="blue"> else </font>
                               <font color="blue">if </font>free<font color="blue"> then </font>                sa<font color="blue"> else </font>
                               <font color="blue">if </font>startForward<font color="blue"> then </font>        sa - f0/unitForce<font color="blue"> else </font>
                               <font color="blue">if </font>startBackward<font color="blue"> then </font>       sa + f0/unitForce<font color="blue"> else </font>
                               <font color="blue">if </font><font color="red">pre</font>(mode) == Forward<font color="blue"> then </font>sa - f0/unitForce<font color="blue"> else </font>
                                                            sa + f0/unitForce;
<font color="darkgreen">/* Friction torque has to be defined in a subclass. Example for a clutch:
   f = if locked then sa else
       if free then   0 else
       cgeo*fn*(if startForward then          Math.tempInterpol1( v_relfric, mue_pos, 2) else
                if startBackward then        -Math.tempInterpol1(-v_relfric, mue_pos, 2) else
                if pre(mode) == Forward then  Math.tempInterpol1( v_relfric, mue_pos, 2) else
                                             -Math.tempInterpol1(-v_relfric, mue_pos, 2));
*/</font>
<font color="darkgreen">// finite state machine to determine configuration</font>
  mode = <font color="blue">if </font>free<font color="blue"> then </font>Free<font color="blue"> else </font>
    (<font color="blue">if </font>(<font color="red">pre</font>(mode) == Forward<font color="blue">  or </font><font color="red">pre</font>(mode) == Free<font color="blue"> or </font>startForward)<font color="blue">  and </font>v_relfric &gt; 0<font color="blue"> and </font>s &lt; (smax - L/2)<font color="blue"> then </font>
       Forward<font color="blue"> else </font>
     <font color="blue">if </font>(<font color="red">pre</font>(mode) == Backward<font color="blue"> or </font><font color="red">pre</font>(mode) == Free<font color="blue"> or </font>startBackward)<font color="blue"> and </font>v_relfric &lt; 0<font color="blue"> and </font>s &gt; (smin + L/2)<font color="blue"> then </font>
       Backward<font color="blue"> else </font>
       Stuck);
<font color="blue">end </font>PartialFrictionWithStop;
<font color="blue">equation </font>
  <font color="darkgreen">// Constant auxiliary variables</font>
  f0 = (F_Coulomb + F_Stribeck);
  f0_max = f0*1.001;
  free = f0 &lt;= 0<font color="blue"> and </font>F_prop &lt;= 0<font color="blue"> and </font>s &gt; smin + L/2<font color="blue"> and </font>s &lt; smax - L/2;
  <font color="darkgreen">// Velocity and acceleration of flanges</font>
  v =<font color="red"> der</font>(s);
  a =<font color="red"> der</font>(v);
  v_relfric = v;
  a_relfric = a;
<font color="darkgreen">// Equilibrium of forces</font>
  0 = flange_a.f + flange_b.f - f - m*<font color="red">der</font>(v);
<font color="darkgreen">// Friction force</font>
  f = <font color="blue">if </font>locked<font color="blue"> then </font>sa*unitForce<font color="blue"> else </font>
      <font color="blue">if </font>free<font color="blue"> then </font>  0<font color="blue"> else </font>
                    (<font color="blue">if </font>startForward<font color="blue"> then </font>        F_prop*v + F_Coulomb + F_Stribeck<font color="blue"> else </font>
                     <font color="blue">if </font>startBackward<font color="blue"> then </font>       F_prop*v - F_Coulomb - F_Stribeck<font color="blue"> else </font>
                     <font color="blue">if </font><font color="red">pre</font>(mode) == Forward<font color="blue"> then </font>F_prop*v + F_Coulomb + F_Stribeck*<font color="red">exp</font>(-fexp*<font color="red">abs</font>(v))<font color="blue"> else </font>
                                                  F_prop*v - F_Coulomb - F_Stribeck*<font color="red">exp</font>(-fexp*<font color="red">abs</font>(v)));
<font color="darkgreen">// Define events for hard stops and reinitiliaze the state variables velocity v and position s</font>
<font color="blue">algorithm </font>
  <font color="blue">when </font>(<font color="red">initial</font>())<font color="blue"> then</font>
    <font color="red">assert</font>(s &gt; smin + L/2<font color="blue"> or </font>s &gt;= smin + L/2<font color="blue"> and </font>v &gt;= 0,
      &quot;Error in initialization of hard stop. (s - L/2) must be &gt;= smin &quot;);
    <font color="red">assert</font>(s &lt; smax - L/2<font color="blue"> or </font>s &lt;= smax - L/2<font color="blue"> and </font>v &lt;= 0,
      &quot;Error in initialization of hard stop. (s + L/2) must be &lt;= smax &quot;);
  <font color="blue">end when</font>;

  <font color="blue">when </font><font color="blue">not </font>(s &lt; smax - L/2)<font color="blue"> then</font>
    <font color="red">reinit</font>(s, smax - L/2);
    <font color="blue">if </font>(<font color="blue">not </font><font color="red">initial</font>()<font color="blue"> or </font>v&gt;0)<font color="blue"> then</font>
      <font color="red">reinit</font>(v, 0);
    <font color="blue">end if</font>;
  <font color="blue">end when</font>;

  <font color="blue">when </font><font color="blue">not </font>(s &gt; smin + L/2)<font color="blue"> then</font>
    <font color="red">reinit</font>(s, smin + L/2);
    <font color="blue">if </font>(<font color="blue">not </font><font color="red">initial</font>()<font color="blue"> or </font>v&lt;0)<font color="blue"> then</font>
      <font color="red">reinit</font>(v, 0);
    <font color="blue">end if</font>;
  <font color="blue">end when</font>;
<font color="blue">end </font>MassWithStopAndFriction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE RelativeStates<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.RelativeStatesI.png" ALT="Modelica.Mechanics.Translational.Components.RelativeStates" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.RelativeStates"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components"
>Modelica.Mechanics.Translational.Components</A>.RelativeStates</H2>
<B>Definition of relative state variables</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.RelativeStatesD.png" ALT="Modelica.Mechanics.Translational.Components.RelativeStates">
<H3>Information</H3>
<PRE></pre>
<p>
Usually, the absolute position and the absolute velocity of
Modelica.Mechanics.Translational.Inertia models are used as state variables.
In some circumstances, relative quantities are better suited, e.g.,
because it may be easier to supply initial values.
In such cases, model <b>RelativeStates</b> allows the definition of state variables
in the following way:
</p>
<ul>
<li> Connect an instance of this model between two flange connectors.</li>
<li> The <b>relative position</b> and the <b>relative velocity</b>
     between the two connectors are used as <b>state variables</b>.
</ul>
<p>
An example is given in the next figure
</p>
<IMG SRC="../Images/Translational/relativeStates2.png" ALT="relativeStates2">
<p>
Here, the relative position and the relative velocity between
the two masses are used as state variables. Additionally, the
simulator selects either the absolute position and absolute
velocity of model mass1 or of model mass2 as state variables.
</p>

<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>StateSelect</TD><TD>stateSelect</TD><TD>StateSelect.prefer</TD><TD>Priority to use the relative angle and relative speed as states</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>(left) driving flange (flange axis directed in to cut plane, e. g. from left to right)</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>(right) driven flange (flange axis directed out of cut plane)</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> RelativeStates <font color="darkgreen">&quot;Definition of relative state variables&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialTwoFlanges"
>Translational.Interfaces.PartialTwoFlanges</A>;
  <font color="blue">parameter </font>StateSelect stateSelect=StateSelect.prefer <font color="darkgreen">
    &quot;Priority to use the relative angle and relative speed as states&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> s_rel(start=0, stateSelect=StateSelect.prefer) <font color="darkgreen">
    &quot;relative position used as state variable&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_rel(start=0, stateSelect=StateSelect.prefer) <font color="darkgreen">
    &quot;relative velocity used as state variable&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a_rel(start=0) <font color="darkgreen">&quot;relative angular acceleration&quot;</font>;

<font color="blue">equation </font>
  s_rel = flange_b.s - flange_a.s;
  v_rel =<font color="red"> der</font>(s_rel);
  a_rel =<font color="red"> der</font>(v_rel);
  flange_a.f = 0;
  flange_b.f = 0;
<font color="blue">end </font>RelativeStates;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Set_s_start<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_start" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_start"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange"
>Modelica.Mechanics.Translational.Components.InitializeFlange</A>.Set_s_start</H2>
<B>Set s_start</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startD.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_start">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">encapsulated </font><font color="blue">model</font> Set_s_start <font color="darkgreen">&quot;Set s_start&quot;</font>
  <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> s_start <font color="darkgreen">&quot;Start position&quot;</font>;

  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
<font color="blue">initial </font><font color="blue">equation </font>
  flange.s = s_start;
<font color="blue">equation </font>
  flange.f = 0;
<font color="blue">end </font>Set_s_start;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Set_v_start<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_start" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_start"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange"
>Modelica.Mechanics.Translational.Components.InitializeFlange</A>.Set_v_start</H2>
<B>Set v_start</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_startD.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_v_start">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">encapsulated </font><font color="blue">model</font> Set_v_start <font color="darkgreen">&quot;Set v_start&quot;</font>
  <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> v_start <font color="darkgreen">&quot;Start velocity&quot;</font>;

  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(flange.s) = v_start;
<font color="blue">equation </font>
  flange.f = 0;
<font color="blue">end </font>Set_v_start;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Set_a_start<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_s_startI.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_start" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_start"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange"
>Modelica.Mechanics.Translational.Components.InitializeFlange</A>.Set_a_start</H2>
<B>Set a_start</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_startD.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_a_start">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">encapsulated </font><font color="blue">model</font> Set_a_start <font color="darkgreen">&quot;Set a_start&quot;</font>
  <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> a_start <font color="darkgreen">&quot;Start acceleration&quot;</font>;

  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange(s(stateSelect=StateSelect.avoid));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Modelica.SIunits.Velocity</A> v =<font color="red"> der</font>(flange.s);
<font color="blue">initial </font><font color="blue">equation </font>
  <font color="red">der</font>(v) = a_start;
<font color="blue">equation </font>
  flange.f = 0;
<font color="blue">end </font>Set_a_start;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Set_flange_f<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_fI.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_f" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_f"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.InitializeFlange"
>Modelica.Mechanics.Translational.Components.InitializeFlange</A>.Set_flange_f</H2>
<B>Set flange_f to zero</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_fD.png" ALT="Modelica.Mechanics.Translational.Components.InitializeFlange.Set_flange_f">
<H3>Modelica definition</H3>
<PRE>
<font color="blue">encapsulated </font><font color="blue">model</font> Set_flange_f <font color="darkgreen">&quot;Set flange_f to zero&quot;</font>
  <font color="blue">import </font><A HREF="Modelica.html#Modelica"
>Modelica</A>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BlockIcon"
>Modelica.Blocks.Interfaces.BlockIcon</A>;
  <A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Modelica.Mechanics.Translational.Interfaces.Flange_b</A> flange;
<font color="blue">equation </font>
  flange.f = 0;
<font color="blue">end </font>Set_flange_f;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE PartialFrictionWithStop<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStopI.png" ALT="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop"></A><A HREF="Modelica_Mechanics_Translational_Components.html#Modelica.Mechanics.Translational.Components.MassWithStopAndFriction"
>Modelica.Mechanics.Translational.Components.MassWithStopAndFriction</A>.PartialFrictionWithStop</H2>
<B>Base model of Coulomb friction elements with stop</B><p>
<IMG SRC="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStopD.png" ALT="Modelica.Mechanics.Translational.Components.MassWithStopAndFriction.PartialFrictionWithStop">
<H3>Information</H3>
<PRE></pre>
<p>
Basic model for Coulomb friction that models the stuck phase in a reliable way.<br>
Additionally, a left and right stop are handled.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>smax</TD><TD>&nbsp;</TD><TD>Right stop for (right end of) sliding mass [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>smin</TD><TD>&nbsp;</TD><TD>Left stop for (left end of) sliding mass [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>L</TD><TD>&nbsp;</TD><TD>Length of component, from left flange to right flange (= flange_b.s - flange_a.s) [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>Velocity</A></TD><TD>v_small</TD><TD>1e-3</TD><TD>Relative velocity near to zero (see model info text) [m/s]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_a"
>Flange_a</A></TD><TD>flange_a</TD><TD>Left flange of translational component</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.Flange_b"
>Flange_b</A></TD><TD>flange_b</TD><TD>Right flange of translational component</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">encapsulated </font><font color="blue">partial </font><font color="blue">model</font> PartialFrictionWithStop <font color="darkgreen">
  &quot;Base model of Coulomb friction elements with stop&quot;</font>

    <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
    <font color="blue">import </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>Modelica.Mechanics.Translational.Interfaces.PartialRigid</A>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> smax(start= 25) <font color="darkgreen">
    &quot;Right stop for (right end of) sliding mass&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> smin(start=-25) <font color="darkgreen">
    &quot;Left stop for (left end of) sliding mass&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_small=1e-3 <font color="darkgreen">
    &quot;Relative velocity near to zero (see model info text)&quot;</font>;
<font color="darkgreen">// Equations to define the following variables have to be defined in subclasses</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_relfric <font color="darkgreen">&quot;Relative velocity between frictional surfaces&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> a_relfric <font color="darkgreen">&quot;Relative acceleration between frictional surfaces&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f <font color="darkgreen">
    &quot;Friction force (positive, if directed in opposite direction of v_rel)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f0 <font color="darkgreen">&quot;Friction force for v=0 and forward sliding&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> f0_max <font color="darkgreen">&quot;Maximum friction force for v=0 and locked&quot;</font>;
  Boolean free <font color="darkgreen">&quot;true, if frictional element is not active&quot;</font>;
<font color="darkgreen">// Equations to define the following variables are given in this class</font>
  Real sa(unit=&quot;1&quot;) <font color="darkgreen">
    &quot;Path parameter of friction characteristic f = f(a_relfric)&quot;</font>;
  Boolean startForward(start=false, fixed=true) <font color="darkgreen">
    &quot;= true, if v_rel=0 and start of forward sliding or v_rel &gt; v_small&quot;</font>;
  Boolean startBackward(start=false, fixed=true) <font color="darkgreen">
    &quot;= true, if v_rel=0 and start of backward sliding or v_rel &lt; -v_small&quot;</font>;
  Boolean locked(start=false) <font color="darkgreen">&quot;true, if v_rel=0 and not sliding&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Mechanics_Translational_Interfaces.html#Modelica.Mechanics.Translational.Interfaces.PartialRigid"
>PartialRigid</A>(s(start=0, stateSelect = StateSelect.always));
  <font color="blue">constant </font>Integer Unknown=3 <font color="darkgreen">&quot;Value of mode is not known&quot;</font>;
  <font color="blue">constant </font>Integer Free=2 <font color="darkgreen">&quot;Element is not active&quot;</font>;
  <font color="blue">constant </font>Integer Forward=1 <font color="darkgreen">&quot;v_rel &gt; 0 (forward sliding)&quot;</font>;
  <font color="blue">constant </font>Integer Stuck=0 <font color="darkgreen">
    &quot;v_rel = 0 (forward sliding, locked or backward sliding)&quot;</font>;
  <font color="blue">constant </font>Integer Backward=-1 <font color="darkgreen">&quot;v_rel &lt; 0 (backward sliding)&quot;</font>;
  Integer mode(
    <font color="blue">final </font>min=Backward,
    <font color="blue">final </font>max=Unknown,
    start=Unknown, fixed=true);
<font color="blue">protected </font>
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> unitAcceleration = 1;
  <font color="blue">constant </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Force"
>SI.Force</A> unitForce = 1;
<font color="blue">equation </font>
<font color="darkgreen">/* Friction characteristic
   (locked is introduced to help the Modelica translator determining
   the different structural configurations,
   if for each configuration special code shall be generated)
*/</font>
  startForward  =<font color="red"> pre</font>(mode) == Stuck<font color="blue"> and </font>
    (<font color="red">pre</font>(startForward)<font color="blue">  or </font>sa &gt;  f0_max/unitForce<font color="blue"> and </font>sa &gt;  f0/unitForce<font color="blue"> and </font>s &lt; (smax - L/2))<font color="blue"> or </font>
    <font color="red">pre</font>(mode) == Backward<font color="blue"> and </font>v_relfric &gt;  v_small<font color="blue"> or </font><font color="red">initial</font>()<font color="blue"> and </font>v_relfric &gt; 0;
  startBackward =<font color="red"> pre</font>(mode) == Stuck<font color="blue"> and </font>
    (<font color="red">pre</font>(startBackward)<font color="blue"> or </font>sa &lt; -f0_max/unitForce<font color="blue"> and </font>sa &lt; -f0/unitForce<font color="blue"> and </font>s &gt; (smin + L/2))<font color="blue"> or </font>
    <font color="red">pre</font>(mode) == Forward<font color="blue">  and </font>v_relfric &lt; -v_small<font color="blue"> or </font><font color="red">initial</font>()<font color="blue"> and </font>v_relfric &lt; 0;
  locked = <font color="blue">not </font>free<font color="blue"> and </font>
    <font color="blue">not </font>(<font color="red">pre</font>(mode) == Forward<font color="blue"> or </font>startForward<font color="blue"> or </font><font color="red">pre</font>(mode) == Backward<font color="blue"> or </font>startBackward);
  a_relfric/unitAcceleration = <font color="blue">if </font>locked<font color="blue"> then </font>              0<font color="blue"> else </font>
                               <font color="blue">if </font>free<font color="blue"> then </font>                sa<font color="blue"> else </font>
                               <font color="blue">if </font>startForward<font color="blue"> then </font>        sa - f0/unitForce<font color="blue"> else </font>
                               <font color="blue">if </font>startBackward<font color="blue"> then </font>       sa + f0/unitForce<font color="blue"> else </font>
                               <font color="blue">if </font><font color="red">pre</font>(mode) == Forward<font color="blue"> then </font>sa - f0/unitForce<font color="blue"> else </font>
                                                            sa + f0/unitForce;
<font color="darkgreen">/* Friction torque has to be defined in a subclass. Example for a clutch:
   f = if locked then sa else
       if free then   0 else
       cgeo*fn*(if startForward then          Math.tempInterpol1( v_relfric, mue_pos, 2) else
                if startBackward then        -Math.tempInterpol1(-v_relfric, mue_pos, 2) else
                if pre(mode) == Forward then  Math.tempInterpol1( v_relfric, mue_pos, 2) else
                                             -Math.tempInterpol1(-v_relfric, mue_pos, 2));
*/</font>
<font color="darkgreen">// finite state machine to determine configuration</font>
  mode = <font color="blue">if </font>free<font color="blue"> then </font>Free<font color="blue"> else </font>
    (<font color="blue">if </font>(<font color="red">pre</font>(mode) == Forward<font color="blue">  or </font><font color="red">pre</font>(mode) == Free<font color="blue"> or </font>startForward)<font color="blue">  and </font>v_relfric &gt; 0<font color="blue"> and </font>s &lt; (smax - L/2)<font color="blue"> then </font>
       Forward<font color="blue"> else </font>
     <font color="blue">if </font>(<font color="red">pre</font>(mode) == Backward<font color="blue"> or </font><font color="red">pre</font>(mode) == Free<font color="blue"> or </font>startBackward)<font color="blue"> and </font>v_relfric &lt; 0<font color="blue"> and </font>s &gt; (smin + L/2)<font color="blue"> then </font>
       Backward<font color="blue"> else </font>
       Stuck);
<font color="blue">end </font>PartialFrictionWithStop;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Sat Mar 01 21:48:28 2008.
</address></BODY>
</HTML>
