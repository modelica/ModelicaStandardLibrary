<HTML>
<HEAD>
<TITLE>Modelica.Mechanics.MultiBody</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library to model 3-dimensional mechanical systems&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE MultiBody<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Mechanics.MultiBody"></A><A HREF="Modelica_Mechanics.html#Modelica.Mechanics"
>Modelica.Mechanics</A>.MultiBody</H2>
<B>Library to model 3-dimensional mechanical systems</B>
<P>
<H3>Information</H3>
<PRE></pre>
<p>
Library <b>MultiBody</b> is a <b>free</b> Modelica package providing
3-dimensional mechanical components to model in a convenient way
<b>mechanical systems</b>, such as robots, mechanisms, vehicles.
Typical animations generated with this library are shown
in the next figure:
</p>
<p>
<img src="../Images/MultiBody/MultiBody.png">
</p>
<p>
For an introduction, have especially a look at:
</p>
<ul>
<li> <A HREF="Modelica_Mechanics_MultiBody_UsersGuide.html#Modelica.Mechanics.MultiBody.UsersGuide"
>MultiBody.UsersGuide</a>
     discusses the most important aspects how to use this library.</li>
<li> <A HREF="Modelica_Mechanics_MultiBody_Examples.html#Modelica.Mechanics.MultiBody.Examples"
>MultiBody.Examples</a>
     contains examples that demonstrate the usage of this library.</li>
</ul>

<p>
Copyright &copy; 1998-2008, Modelica Association and DLR.
</p>
<p>
<i>This Modelica package is <b>free</b> software; it can be redistributed and/or modified
under the terms of the <b>Modelica license</b>, see the license conditions
and the accompanying <b>disclaimer</b>
<A HREF="Modelica_UsersGuide.html#Modelica.UsersGuide.ModelicaLicense"
>here</a>.</i>
</p><br>
<pre></PRE><P>
<H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.UsersGuideS.png" ALT="Modelica.Mechanics.MultiBody.UsersGuide" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_UsersGuide.html#Modelica.Mechanics.MultiBody.UsersGuide"
>UsersGuide</A>
</TD><TD>User's Guide of MultiBody Library</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.WorldS.png" ALT="Modelica.Mechanics.MultiBody.World" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World"
>World</A>
</TD><TD>World coordinate system + gravity field + default animation definition</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Examples" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Examples.html#Modelica.Mechanics.MultiBody.Examples"
>Examples</A>
</TD><TD>Examples that demonstrate the usage of the MultiBody library</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Forces" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Forces.html#Modelica.Mechanics.MultiBody.Forces"
>Forces</A>
</TD><TD>Components that exert forces and/or torques between frames</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Frames" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Frames.html#Modelica.Mechanics.MultiBody.Frames"
>Frames</A>
</TD><TD>Functions to transform rotational frame quantities</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Interfaces" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces"
>Interfaces</A>
</TD><TD>Connectors and partial models for 3-dim. mechanical components</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Joints" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Joints.html#Modelica.Mechanics.MultiBody.Joints"
>Joints</A>
</TD><TD>Components that constrain the motion between two frames</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Parts" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Parts.html#Modelica.Mechanics.MultiBody.Parts"
>Parts</A>
</TD><TD>Rigid components such as bodies with mass and inertia and massless rods</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Sensors" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Sensors.html#Modelica.Mechanics.MultiBody.Sensors"
>Sensors</A>
</TD><TD>Sensors to measure variables</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Types" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types"
>Types</A>
</TD><TD>Constants and types with choices, especially to build menus</TD></TR>
<TR><TD><IMG SRC="Modelica.Mechanics.MultiBody.ExamplesS.png" ALT="Modelica.Mechanics.MultiBody.Visualizers" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Mechanics_MultiBody_Visualizers.html#Modelica.Mechanics.MultiBody.Visualizers"
>Visualizers</A>
</TD><TD>3-dimensional visual objects used for animation</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE World<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.WorldI.png" ALT="Modelica.Mechanics.MultiBody.World" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.World"></A><A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody"
>Modelica.Mechanics.MultiBody</A>.World</H2>
<B>World coordinate system + gravity field + default animation definition</B><p>
<IMG SRC="Modelica.Mechanics.MultiBody.WorldD.png" ALT="Modelica.Mechanics.MultiBody.World">
<H3>Information</H3>
<PRE></pre>
<p>
Model <b>World</b> represents a global coordinate system fixed in
ground. This model serves several purposes:
<ul>
<li> It is used as <b>inertial system</b> in which
     the equations of all elements of the MultiBody library
     are defined.</li>
<li> It is the world frame of an <b>animation window</b> in which
     all elements of the MultiBody library are visualized.</li>
<li> It is used to define the <b>gravity field</b> in which a
     multi-body model is present. Default is a uniform gravity
     field where the gravity acceleration vector g is the
     same at every position. Additionally, a point gravity field
     can be selected.</li>
<li> It is used to define <b>default settings</b> of animation properties
     (e.g. the diameter of a sphere representing by default
     the center of mass of a body, or the diameters of the cylinders
     representing a revolute joint).</li>
<li> It is used to define a <b>visual representation</b> of the
     world model (= 3 coordinate axes with labels) and of the defined
     gravity field.<br>
    <IMG SRC="../Images/MultiBody/world.png" ALT="MultiBodys.World">
</li>
</ul>
<p>
Since the gravity field function is required from all bodies with mass
and the default settings of animation properties are required
from nearly every component, exactly one instance of model World needs
to be present in every model on the top level. The basic declaration
needs to be:
</p>
<pre>
    <b>inner</b> Modelica.Mechanics.MultiBody.World world
</pre>
<p>
Note, it must be an <b>inner</b> declaration with instance name <b>world</b>
in order that this world object can be accessed from all objects in the
model. When dragging the "World" object from the package browser into
the diagram layer, this declaration is automatically generated
(this is defined via annotations in model World).
</p>
<p>
All vectors and tensors of a mechanical system are resolved in a
frame that is local to the corresponding component. Usually,
if all relative joint coordinates vanish, the local frames
of all components are parallel to each other, as well as to the
world frame (this holds as long as a Parts.FixedRotation,
component is <b>not</b> used). In this "reference configuration"
it is therefore
alternatively possible to resolve all vectors in the world
frame, since all frames are parallel to each other.
This is often very convenient. In order to give some visual
support in such a situation, in the icon of a World instance
two axes of the world frame are shown and the labels
of these axes can be set via parameters.
</p>
<pre>
</PRE>
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Boolean</TD><TD>enableAnimation</TD><TD>true</TD><TD>= true, if animation of all components is enabled</TD></TR>
<TR><TD>Boolean</TD><TD>animateWorld</TD><TD>true</TD><TD>= true, if world coordinate system shall be visualized</TD></TR>
<TR><TD>Boolean</TD><TD>animateGravity</TD><TD>true</TD><TD>= true, if gravity field shall be visualized (acceleration vector or field center)</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel"
>AxisLabel</A></TD><TD>label1</TD><TD>&quot;x&quot;</TD><TD>Label of horizontal axis in icon</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel"
>AxisLabel</A></TD><TD>label2</TD><TD>&quot;y&quot;</TD><TD>Label of vertical axis in icon</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>GravityTypes</A></TD><TD>gravityType</TD><TD>GravityTypes.UniformGravity</TD><TD>Type of gravity field</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>Acceleration</A></TD><TD>g</TD><TD>9.81</TD><TD>Constant gravity acceleration [m/s2]</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Axis"
>Axis</A></TD><TD>n</TD><TD>{0,-1,0}</TD><TD>Direction of gravity resolved in world frame (gravity = g*n/length(n)) [1]</TD></TR>
<TR><TD>Real</TD><TD>mue</TD><TD>3.986e14</TD><TD>Gravity field constant (default = field constant of earth) [m3/s2]</TD></TR>
<TR><TD>Boolean</TD><TD>driveTrainMechanics3D</TD><TD>true</TD><TD>= true, if 3-dim. mechanical effects of Parts.Mounting1D/Rotor1D/BevelGear1D shall be taken into account</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Animation</B></TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>if animateWorld = true</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>axisLength</TD><TD>nominalLength/2</TD><TD>Length of world axes arrows [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>Distance</A></TD><TD>axisDiameter</TD><TD>axisLength/defaultFrameDiame...</TD><TD>Diameter of world axes arrows [m]</TD></TR>
<TR><TD>Boolean</TD><TD>axisShowLabels</TD><TD>true</TD><TD>= true, if labels shall be shown</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Color</A></TD><TD>axisColor_x</TD><TD>Modelica.Mechanics.MultiBody...</TD><TD>Color of x-arrow</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Color</A></TD><TD>axisColor_y</TD><TD>axisColor_x</TD><TD>&nbsp;</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Color</A></TD><TD>axisColor_z</TD><TD>axisColor_x</TD><TD>Color of z-arrow</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>if animateGravity = true and gravityType = UniformGravity</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>Position</A></TD><TD>gravityArrowTail[3]</TD><TD>{0,0,0}</TD><TD>Position vector from origin of world frame to arrow tail, resolved in world frame [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>gravityArrowLength</TD><TD>axisLength/2</TD><TD>Length of gravity arrow [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>gravityArrowDiameter</TD><TD>gravityArrowLength/defaultWi...</TD><TD>Diameter of gravity arrow [m]</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Color</A></TD><TD>gravityArrowColor</TD><TD>{0,230,0}</TD><TD>Color of gravity arrow</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>if animateGravity = true and gravityType = PointGravity</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>gravitySphereDiameter</TD><TD>12742000</TD><TD>Diameter of sphere representing gravity center (default = mean diameter of earth) [m]</TD></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Color</A></TD><TD>gravitySphereColor</TD><TD>{0,230,0}</TD><TD>Color of gravity sphere</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Defaults</B></TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>nominalLength</TD><TD>1</TD><TD>&quot;Nominal&quot; length of multi-body system [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultAxisLength</TD><TD>nominalLength/5</TD><TD>Default for length of a frame axis (but not world frame) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultJointLength</TD><TD>nominalLength/10</TD><TD>Default for the fixed length of a shape representing a joint [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultJointWidth</TD><TD>nominalLength/20</TD><TD>Default for the fixed width of a shape representing a joint [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultForceLength</TD><TD>nominalLength/10</TD><TD>Default for the fixed length of a shape representing a force (e.g. damper) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultForceWidth</TD><TD>nominalLength/20</TD><TD>Default for the fixed width of a shape represening a force (e.g. spring, bushing) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultBodyDiameter</TD><TD>nominalLength/9</TD><TD>Default for diameter of sphere representing the center of mass of a body [m]</TD></TR>
<TR><TD>Real</TD><TD>defaultWidthFraction</TD><TD>20</TD><TD>Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>defaultArrowDiameter</TD><TD>nominalLength/40</TD><TD>Default for arrow diameter (e.g., of forces, torques, sensors) [m]</TD></TR>
<TR><TD>Real</TD><TD>defaultFrameDiameterFraction</TD><TD>40</TD><TD>Default for arrow diameter of a coordinate system as a fraction of axis length</TD></TR>
<TR><TD>Real</TD><TD>defaultSpecularCoefficient</TD><TD>0.7</TD><TD>Default reflection of ambient light (= 0: light is completely absorbed)</TD></TR>
<TR><TD>Real</TD><TD>defaultN_to_m</TD><TD>1000</TD><TD>Default scaling of force arrows (length = force/defaultN_to_m) [N/m]</TD></TR>
<TR><TD>Real</TD><TD>defaultNm_to_m</TD><TD>1000</TD><TD>Default scaling of torque arrows (length = torque/defaultNm_to_m) [N.m/m]</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.Frame_b"
>Frame_b</A></TD><TD>frame_b</TD><TD>Coordinate system fixed in the origin of the world frame</TD></TR>
</TABLE>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> World <font color="darkgreen">
  &quot;World coordinate system + gravity field + default animation definition&quot;</font>

  <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
  <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>Modelica.Mechanics.MultiBody.Types.GravityTypes</A>;
  <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types"
>Modelica.Mechanics.MultiBody.Types</A>;

    <A HREF="Modelica_Mechanics_MultiBody_Interfaces.html#Modelica.Mechanics.MultiBody.Interfaces.Frame_b"
>Interfaces.Frame_b</A> frame_b <font color="darkgreen">
    &quot;Coordinate system fixed in the origin of the world frame&quot;</font>;


  <font color="blue">parameter </font>Boolean enableAnimation=true <font color="darkgreen">
    &quot;= true, if animation of all components is enabled&quot;</font>;
  <font color="blue">parameter </font>Boolean animateWorld=true <font color="darkgreen">
    &quot;= true, if world coordinate system shall be visualized&quot;</font>;
  <font color="blue">parameter </font>Boolean animateGravity=true <font color="darkgreen">
    &quot;= true, if gravity field shall be visualized (acceleration vector or field center)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel"
>Types.AxisLabel</A> label1=&quot;x&quot; <font color="darkgreen">&quot;Label of horizontal axis in icon&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.AxisLabel"
>Types.AxisLabel</A> label2=&quot;y&quot; <font color="darkgreen">&quot;Label of vertical axis in icon&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>Types.GravityTypes</A> gravityType=GravityTypes.UniformGravity <font color="darkgreen">
    &quot;Type of gravity field&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g=9.81 <font color="darkgreen">&quot;Constant gravity acceleration&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Axis"
>Types.Axis</A> n={0,-1,0} <font color="darkgreen">
    &quot;Direction of gravity resolved in world frame (gravity = g*n/length(n))&quot;</font>;
  <font color="blue">parameter </font>Real mue(
    unit=&quot;m3/s2&quot;,
    min=0) = 3.986e14 <font color="darkgreen">
    &quot;Gravity field constant (default = field constant of earth)&quot;</font>;
  <font color="blue">parameter </font>Boolean driveTrainMechanics3D=true <font color="darkgreen">
    &quot;= true, if 3-dim. mechanical effects of Parts.Mounting1D/Rotor1D/BevelGear1D shall be taken into account&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> axisLength=nominalLength/2 <font color="darkgreen">
    &quot;Length of world axes arrows&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Distance"
>SI.Distance</A> axisDiameter=axisLength/defaultFrameDiameterFraction <font color="darkgreen">
    &quot;Diameter of world axes arrows&quot;</font>;
  <font color="blue">parameter </font>Boolean axisShowLabels=true <font color="darkgreen">&quot;= true, if labels shall be shown&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Types.Color</A> axisColor_x=Modelica.Mechanics.MultiBody.Types.Defaults.FrameColor <font color="darkgreen">
    &quot;Color of x-arrow&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Types.Color</A> axisColor_y=axisColor_x;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Types.Color</A> axisColor_z=axisColor_x <font color="darkgreen">&quot;Color of z-arrow&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> gravityArrowTail[3]={0,0,0} <font color="darkgreen">
    &quot;Position vector from origin of world frame to arrow tail, resolved in world frame&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityArrowLength=axisLength/2 <font color="darkgreen">&quot;Length of gravity arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> gravityArrowDiameter=gravityArrowLength/
      defaultWidthFraction <font color="darkgreen">&quot;Diameter of gravity arrow&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Types.Color</A> gravityArrowColor={0,230,0} <font color="darkgreen">&quot;Color of gravity arrow&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> gravitySphereDiameter=12742000 <font color="darkgreen">
    &quot;Diameter of sphere representing gravity center (default = mean diameter of earth)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.Color"
>Types.Color</A> gravitySphereColor={0,230,0} <font color="darkgreen">&quot;Color of gravity sphere&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> nominalLength=1 <font color="darkgreen">&quot;\&quot;Nominal\&quot; length of multi-body system&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultAxisLength=nominalLength/5 <font color="darkgreen">
    &quot;Default for length of a frame axis (but not world frame)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultJointLength=nominalLength/10 <font color="darkgreen">
    &quot;Default for the fixed length of a shape representing a joint&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultJointWidth=nominalLength/20 <font color="darkgreen">
    &quot;Default for the fixed width of a shape representing a joint&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultForceLength=nominalLength/10 <font color="darkgreen">
    &quot;Default for the fixed length of a shape representing a force (e.g. damper)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultForceWidth=nominalLength/20 <font color="darkgreen">
    &quot;Default for the fixed width of a shape represening a force (e.g. spring, bushing)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultBodyDiameter=nominalLength/9 <font color="darkgreen">
    &quot;Default for diameter of sphere representing the center of mass of a body&quot;</font>;
  <font color="blue">parameter </font>Real defaultWidthFraction=20 <font color="darkgreen">
    &quot;Default for shape width as a fraction of shape length (e.g., for Parts.FixedTranslation)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> defaultArrowDiameter=nominalLength/40 <font color="darkgreen">
    &quot;Default for arrow diameter (e.g., of forces, torques, sensors)&quot;</font>;
  <font color="blue">parameter </font>Real defaultFrameDiameterFraction=40 <font color="darkgreen">
    &quot;Default for arrow diameter of a coordinate system as a fraction of axis length&quot;</font>;
  <font color="blue">parameter </font>Real defaultSpecularCoefficient(min=0) = 0.7 <font color="darkgreen">
    &quot;Default reflection of ambient light (= 0: light is completely absorbed)&quot;</font>;
  <font color="blue">parameter </font>Real defaultN_to_m(unit=&quot;N/m&quot;, min=0) = 1000 <font color="darkgreen">
    &quot;Default scaling of force arrows (length = force/defaultN_to_m)&quot;</font>;
  <font color="blue">parameter </font>Real defaultNm_to_m(unit=&quot;N.m/m&quot;, min=0) = 1000 <font color="darkgreen">
    &quot;Default scaling of torque arrows (length = torque/defaultNm_to_m)&quot;</font>;

  <font color="darkgreen">/* The World object can only use the Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape model, but no
     other models in package Modelica.Mechanics.MultiBody.Visualizers, since the other models access
     data of the &quot;outer Modelica.Mechanics.MultiBody.World world&quot; object, i.e., there are
     mutually dependent classes. For this reason, the higher level visualization
     objects cannot be used.
  */</font>
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer ndim=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <font color="blue">parameter </font>Integer ndim2=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> and </font>
      axisShowLabels<font color="blue"> then </font>1<font color="blue"> else </font>0;

  <font color="darkgreen">// Parameters to define axes</font>
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> headLength=<font color="red">min</font>(axisLength, axisDiameter*Types.Defaults.
      FrameHeadLengthFraction);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> headWidth=axisDiameter*Types.Defaults.
      FrameHeadWidthFraction;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> lineLength=<font color="red">max</font>(0, axisLength - headLength);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> lineWidth=axisDiameter;

  <font color="darkgreen">// Parameters to define axes labels</font>
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> scaledLabel=Modelica.Mechanics.MultiBody.Types.Defaults.FrameLabelHeightFraction*
      axisDiameter;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> labelStart=1.05*axisLength;

  <font color="darkgreen">// x-axis</font>
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> x_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    color=axisColor_x,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> x_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={1,0,0},
    widthDirection={0,1,0},
    color=axisColor_x,
    r={lineLength,0,0},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
>Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines</A> x_label(
    lines=scaledLabel*{[0, 0; 1, 1],[0, 1; 1, 0]},
    diameter=axisDiameter,
    color=axisColor_x,
    r_lines={labelStart,0,0},
    n_x={1,0,0},
    n_y={0,1,0},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> and </font>axisShowLabels;

  <font color="darkgreen">// y-axis</font>
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> y_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={0,1,0},
    widthDirection={1,0,0},
    color=axisColor_y,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> y_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={0,1,0},
    widthDirection={1,0,0},
    color=axisColor_y,
    r={0,lineLength,0},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
>Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines</A> y_label(
    lines=scaledLabel*{[0, 0; 1, 1.5],[0, 1.5; 0.5, 0.75]},
    diameter=axisDiameter,
    color=axisColor_y,
    r_lines={0,labelStart,0},
    n_x={0,1,0},
    n_y={-1,0,0},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> and </font>axisShowLabels;

  <font color="darkgreen">// z-axis</font>
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> z_arrowLine(
    shapeType=&quot;cylinder&quot;,
    length=lineLength,
    width=lineWidth,
    height=lineWidth,
    lengthDirection={0,0,1},
    widthDirection={0,1,0},
    color=axisColor_z,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> z_arrowHead(
    shapeType=&quot;cone&quot;,
    length=headLength,
    width=headWidth,
    height=headWidth,
    lengthDirection={0,0,1},
    widthDirection={0,1,0},
    color=axisColor_z,
    r={0,0,lineLength},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Internal.html#Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines"
>Modelica.Mechanics.MultiBody.Visualizers.Internal.Lines</A> z_label(
    lines=scaledLabel*{[0, 0; 1, 0],[0, 1; 1, 1],[0, 1; 1, 0]},
    diameter=axisDiameter,
    color=axisColor_z,
    r_lines={0,0,labelStart},
    n_x={0,0,1},
    n_y={0,1,0},
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateWorld<font color="blue"> and </font>axisShowLabels;

  <font color="darkgreen">// Uniform gravity visualization</font>
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityHeadLength=<font color="red">min</font>(gravityArrowLength,
      gravityArrowDiameter*Types.Defaults.ArrowHeadLengthFraction);
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityHeadWidth=gravityArrowDiameter*Types.Defaults.ArrowHeadWidthFraction;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> gravityLineLength=<font color="red">max</font>(0, gravityArrowLength - gravityHeadLength);
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> gravityArrowLine(
    shapeType=&quot;cylinder&quot;,
    length=gravityLineLength,
    width=gravityArrowDiameter,
    height=gravityArrowDiameter,
    lengthDirection=n,
    widthDirection={0,1,0},
    color=gravityArrowColor,
    r_shape=gravityArrowTail,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue"> and </font>gravityType == GravityTypes.UniformGravity;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> gravityArrowHead(
    shapeType=&quot;cone&quot;,
    length=gravityHeadLength,
    width=gravityHeadWidth,
    height=gravityHeadWidth,
    lengthDirection=n,
    widthDirection={0,1,0},
    color=gravityArrowColor,
    r_shape=gravityArrowTail +<font color="red"> Modelica.Math.Vectors.normalize</font>(
                                                n)*gravityLineLength,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue"> and </font>gravityType == GravityTypes.UniformGravity;

  <font color="darkgreen">// Point gravity visualization</font>
  <font color="blue">parameter </font>Integer ndim_pointGravity=<font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue">
       and </font>gravityType == 2<font color="blue"> then </font>1<font color="blue"> else </font>0;
  <A HREF="Modelica_Mechanics_MultiBody_Visualizers_Advanced.html#Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape"
>Modelica.Mechanics.MultiBody.Visualizers.Advanced.Shape</A> gravitySphere(
    shapeType=&quot;sphere&quot;,
    r_shape={-gravitySphereDiameter/2,0,0},
    lengthDirection={1,0,0},
    length=gravitySphereDiameter,
    width=gravitySphereDiameter,
    height=gravitySphereDiameter,
    color=gravitySphereColor,
    specularCoefficient=0) <font color="blue">if </font>enableAnimation<font color="blue"> and </font>animateGravity<font color="blue"> and </font>gravityType == GravityTypes.PointGravity;

  <font color="blue">function</font> gravityAcceleration = <A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World.gravityAccelerationTypes"
>gravityAccelerationTypes</A> (
      gravityType=gravityType,
      g=g*<font color="red">Modelica.Math.Vectors.normalize</font>(
                                     n),
      mue=mue);

<font color="blue">protected </font>
  <font color="blue">function</font> gravityAccelerationTypes <font color="darkgreen">
    &quot;Gravity field acceleration depending on field type and position&quot;</font>
    <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>Modelica.Mechanics.MultiBody.Types.GravityTypes</A>;
    <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r[3] <font color="darkgreen">
      &quot;Position vector from world frame to actual point, resolved in world frame&quot;</font>;
    <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>GravityTypes</A> gravityType <font color="darkgreen">&quot;Type of gravity field&quot;</font>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g[3] <font color="darkgreen">
      &quot;Constant gravity acceleration, resolved in world frame, if gravityType=1&quot;</font>;
    <font color="blue">input </font>Real mue(unit=&quot;m3/s2&quot;) <font color="darkgreen">
      &quot;Field constant of point gravity field, if gravityType=2&quot;</font>;
    <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> gravity[3] <font color="darkgreen">
      &quot;Gravity acceleration at point r, resolved in world frame&quot;</font>;
  <font color="blue">algorithm </font>
    gravity := <font color="blue">if </font>gravityType == GravityTypes.UniformGravity<font color="blue"> then </font>g<font color="blue"> else </font>
               <font color="blue">if </font>gravityType == GravityTypes.PointGravity<font color="blue"> then </font>
                  -(mue/(r*r))*(r/<font color="red">Modelica.Math.Vectors.length</font>(
                                                r))<font color="blue"> else </font>
                    <font color="red">zeros</font>(3);
  <font color="blue">end </font>gravityAccelerationTypes;
<font color="blue">equation </font>
  <font color="red">Connections.root</font>(frame_b.R);

  <font color="red">assert</font>(<font color="red">Modelica.Math.Vectors.length</font>(
                       n) &gt; 1.e-10,
    &quot;Parameter n of World object is wrong (lenght(n) &gt; 0 required)&quot;);
  frame_b.r_0 =<font color="red"> zeros</font>(3);
  frame_b.R =<font color="red"> Frames.nullRotation</font>();
<font color="blue">end </font>World;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE gravityAccelerationTypes<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Mechanics.MultiBody.World.gravityAccelerationTypesI.png" ALT="Modelica.Mechanics.MultiBody.World.gravityAccelerationTypes" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Mechanics.MultiBody.World.gravityAccelerationTypes"></A><A HREF="Modelica_Mechanics_MultiBody.html#Modelica.Mechanics.MultiBody.World"
>Modelica.Mechanics.MultiBody.World</A>.gravityAccelerationTypes</H2>
<B>Gravity field acceleration depending on field type and position</B><p>
<H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> gravityAccelerationTypes <font color="darkgreen">
  &quot;Gravity field acceleration depending on field type and position&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>Modelica.Mechanics.MultiBody.Types.GravityTypes</A>;
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Position"
>SI.Position</A> r[3] <font color="darkgreen">
    &quot;Position vector from world frame to actual point, resolved in world frame&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Mechanics_MultiBody_Types.html#Modelica.Mechanics.MultiBody.Types.GravityTypes"
>GravityTypes</A> gravityType <font color="darkgreen">&quot;Type of gravity field&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> g[3] <font color="darkgreen">
    &quot;Constant gravity acceleration, resolved in world frame, if gravityType=1&quot;</font>;
  <font color="blue">input </font>Real mue(unit=&quot;m3/s2&quot;) <font color="darkgreen">
    &quot;Field constant of point gravity field, if gravityType=2&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Acceleration"
>SI.Acceleration</A> gravity[3] <font color="darkgreen">
    &quot;Gravity acceleration at point r, resolved in world frame&quot;</font>;
<font color="blue">algorithm </font>
  gravity := <font color="blue">if </font>gravityType == GravityTypes.UniformGravity<font color="blue"> then </font>g<font color="blue"> else </font>
             <font color="blue">if </font>gravityType == GravityTypes.PointGravity<font color="blue"> then </font>
                -(mue/(r*r))*(r/<font color="red">Modelica.Math.Vectors.length</font>(
                                              r))<font color="blue"> else </font>
                  <font color="red">zeros</font>(3);
<font color="blue">end </font>gravityAccelerationTypes;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.dynasim.se/">Dymola</a> Sat Mar 01 21:47:38 2008.
</address></BODY>
</HTML>
