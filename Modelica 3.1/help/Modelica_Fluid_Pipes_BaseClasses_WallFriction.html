<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Pipes.BaseClasses.WallFriction</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Different variants for pressure drops due to pipe wall friction&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE WallFriction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Pipes.BaseClasses.WallFriction"></A><A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses"
>Modelica.Fluid.Pipes.BaseClasses</A>.WallFriction</H2>
<B>Different variants for pressure drops due to pipe wall friction</B>
<P>
<P><H3>Information</H3>
<PRE></pre>
<p>
This package provides functions to compute
pressure losses due to <b>wall friction</b> in a pipe.
Every correlation is defined by a package that is derived
by inheritance from the package WallFriction.PartialWallFriction.
The details of the underlying pipe wall friction model are described in the
<A HREF="Modelica_Fluid_UsersGuide_ComponentDefinition.html#Modelica.Fluid.UsersGuide.ComponentDefinition.WallFriction"
>UsersGuide</a>.
Basically, different variants of the equation
</p>

<pre>
   dp = &lambda;(Re,<font face="Symbol">D</font>)*(L/D)*&rho;*v*|v|/2
</pre>

<p>
are used, where the friction loss factor &lambda; is shown
in the next figure:
</p>

<img src="../Images/Fluid/Components/PipeFriction1.png">

<pre></PRE><P>

<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFriction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_PartialWallFriction.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFriction"
>PartialWallFriction</A>
</TD><TD>Partial wall friction characteristic (base package of all wall friction characteristics)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.NoFriction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_NoFriction.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.NoFriction"
>NoFriction</A>
</TD><TD>No pipe wall friction, no static head</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.Laminar" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_Laminar.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.Laminar"
>Laminar</A>
</TD><TD>Pipe wall friction in the laminar regime (linear correlation)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.QuadraticTurbulent" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_QuadraticTurbulent.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.QuadraticTurbulent"
>QuadraticTurbulent</A>
</TD><TD>Pipe wall friction in the quadratic turbulent regime (simple characteristic, mu not used)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.LaminarAndQuadraticTurbulent" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_LaminarAndQuadraticTurbulent.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.LaminarAndQuadraticTurbulent"
>LaminarAndQuadraticTurbulent</A>
</TD><TD>Pipe wall friction in the laminar and quadratic turbulent regime (simple characteristic)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFrictionS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.Detailed" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_Detailed.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.Detailed"
>Detailed</A>
</TD><TD>Pipe wall friction in the whole regime (detailed characteristic)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravityS.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravity" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravity"
>TestWallFrictionAndGravity</A>
</TD><TD>Pressure loss in pipe due to wall friction and gravity (only for test purposes; if needed use Pipes.StaticPipe instead)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestWallFrictionAndGravity<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravityI.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravity" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravity"></A><A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction"
>Modelica.Fluid.Pipes.BaseClasses.WallFriction</A>.TestWallFrictionAndGravity</H2>
<B>Pressure loss in pipe due to wall friction and gravity (only for test purposes; if needed use Pipes.StaticPipe instead)</B><p>
<IMG SRC="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravityD.png" ALT="Modelica.Fluid.Pipes.BaseClasses.WallFriction.TestWallFrictionAndGravity">
<P><H3>Information</H3>
<PRE></pre>
<p>
This model describes pressure losses due to <b>wall friction</b> in a pipe
and due to gravity.
It is assumed that no mass or energy is stored in the pipe.
Correlations of different complexity and validity can be
seleted via the replaceable package <b>WallFriction</b> (see parameter menu below).
The details of the pipe wall friction model are described in the
<A HREF="Modelica_Fluid_UsersGuide_ComponentDefinition.html#Modelica.Fluid.UsersGuide.ComponentDefinition.WallFriction"
>UsersGuide</a>.
Basically, different variants of the equation
</p>

<pre>
   dp = &lambda;(Re,<font face="Symbol">D</font>)*(L/D)*&rho;*v*|v|/2
</pre>

<p>
are used, where the friction loss factor &lambda; is shown
in the next figure:
</p>

<img src="../Images/Fluid/Components/PipeFriction1.png">

<p>
By default, the correlations are computed with media data
at the actual time instant.
In order to reduce non-linear equation systems, parameter
<b>use_nominal</b> provides the option
to compute the correlations with constant media values
at the desired operating point. This might speed-up the
simulation and/or might give a more robust simulation.
</p>
<pre></PRE>
Extends from <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A> (Partial element transporting fluid between two ports without storage of mass or energy).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>length</TD><TD>&nbsp;</TD><TD>Length of pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter</TD><TD>&nbsp;</TD><TD>Inner (hydraulic) diameter of pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>height_ab</TD><TD>0.0</TD><TD>Height(port_b) - Height(port_a) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>roughness</TD><TD>2.5e-5</TD><TD>Absolute roughness of pipe (default = smooth steel pipe) [m]</TD></TR>
<TR><TD>Boolean</TD><TD>use_nominal</TD><TD>false</TD><TD>= true, if mu_nominal and rho_nominal are used, otherwise computed from medium</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>mu_nominal</TD><TD>Medium.dynamicViscosity(Medi...</TD><TD>Nominal dynamic viscosity (e.g. mu_liquidWater = 1e-3, mu_air = 1.8e-5) [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_nominal</TD><TD>Medium.density_pTX(Medium.p_...</TD><TD>Nominal density (e.g. rho_liquidWater = 995, rho_air = 1.2) [kg/m3]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_start</TD><TD>0.01*system.p_start</TD><TD>Guess value of dp = port_a.p - port_b.p [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Guess value of m_flow = port_a.m_flow [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>system.m_flow_small</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>show_Re</TD><TD>false</TD><TD>= true, if Reynolds number is included for plotting</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>true</TD><TD> = true, use m_flow = f(dp), otherwise dp = f(m_flow)</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_small</TD><TD>system.dp_small</TD><TD>Within regularization if |dp| &lt; dp_small (may be wider for large discontinuities in static head) [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>true</TD><TD>= true, if temperatures at port_a and port_b are computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_V_flow</TD><TD>true</TD><TD>= true, if volume flow rate at inflowing port is computed</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestWallFrictionAndGravity <font color="darkgreen">
  &quot;Pressure loss in pipe due to wall friction and gravity (only for test purposes; if needed use Pipes.StaticPipe instead)&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A>;

  <font color="blue">replaceable </font><font color="blue">package</font> WallFriction =
    <A HREF="Modelica_Fluid_Pipes_BaseClasses_WallFriction_QuadraticTurbulent.html#Modelica.Fluid.Pipes.BaseClasses.WallFriction.QuadraticTurbulent"
>Modelica.Fluid.Pipes.BaseClasses.WallFriction.QuadraticTurbulent</A>
    <font color="blue">constrainedby </font>
    Modelica.Fluid.Pipes.BaseClasses.WallFriction.PartialWallFriction <font color="darkgreen">
    &quot;Characteristic of wall friction&quot;</font>;

  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> length <font color="darkgreen">&quot;Length of pipe&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter <font color="darkgreen">&quot;Inner (hydraulic) diameter of pipe&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> height_ab = 0.0 <font color="darkgreen">&quot;Height(port_b) - Height(port_a)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> roughness(min=0) = 2.5e-5 <font color="darkgreen">
    &quot;Absolute roughness of pipe (default = smooth steel pipe)&quot;</font>;

  <font color="blue">parameter </font>Boolean use_nominal = false <font color="darkgreen">
    &quot;= true, if mu_nominal and rho_nominal are used, otherwise computed from medium&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_nominal =<font color="red"> Medium.dynamicViscosity</font>(
                                                 <font color="red">Medium.setState_pTX</font>(
                                                     Medium.p_default, Medium.T_default, Medium.X_default)) <font color="darkgreen">
    &quot;Nominal dynamic viscosity (e.g. mu_liquidWater = 1e-3, mu_air = 1.8e-5)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_nominal =<font color="red"> Medium.density_pTX</font>(Medium.p_default, Medium.T_default, Medium.X_default) <font color="darkgreen">
    &quot;Nominal density (e.g. rho_liquidWater = 995, rho_air = 1.2)&quot;</font>;

  <font color="blue">parameter </font>Boolean show_Re = false <font color="darkgreen">
    &quot;= true, if Reynolds number is included for plotting&quot;</font>;
  <font color="blue">parameter </font>Boolean from_dp=true <font color="darkgreen">
    &quot; = true, use m_flow = f(dp), otherwise dp = f(m_flow)&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> dp_small = system.dp_small <font color="darkgreen">
    &quot;Within regularization if |dp| &lt; dp_small (may be wider for large discontinuities in static head)&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re =<font color="red"> Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers.ReynoldsNumber_m_flow</font>(
                                                         m_flow,<font color="red"> noEvent</font>(<font color="blue">if </font>m_flow&gt;0<font color="blue"> then </font>mu_a<font color="blue"> else </font>mu_b), diameter) <font color="blue">if </font>
       show_Re <font color="darkgreen">&quot;Reynolds number of pipe flow&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_a = <font color="blue">if </font><font color="blue">not </font>WallFriction.use_mu<font color="blue"> then </font>1.e-10<font color="blue"> else </font>
                              (<font color="blue">if </font>use_nominal<font color="blue"> then </font>mu_nominal<font color="blue"> else </font><font color="red">Medium.dynamicViscosity</font>(state_a));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_b = <font color="blue">if </font><font color="blue">not </font>WallFriction.use_mu<font color="blue"> then </font>1.e-10<font color="blue"> else </font>
                              (<font color="blue">if </font>use_nominal<font color="blue"> then </font>mu_nominal<font color="blue"> else </font><font color="red">Medium.dynamicViscosity</font>(state_b));
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a = <font color="blue">if </font>use_nominal<font color="blue"> then </font>rho_nominal<font color="blue"> else </font><font color="red">Medium.density</font>(state_a);
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b = <font color="blue">if </font>use_nominal<font color="blue"> then </font>rho_nominal<font color="blue"> else </font><font color="red">Medium.density</font>(state_b);

  Real g_times_height_ab(<font color="blue">final </font>unit=&quot;m2/s2&quot;) = system.g*height_ab <font color="darkgreen">
    &quot;Gravitiy times height_ab = dp_grav/d&quot;</font>;

  <font color="darkgreen">// Currently not in use (means to widen the regularization domain in case of large difference in static head)</font>
  <font color="blue">final </font><font color="blue">parameter </font>Boolean use_x_small_staticHead = false <font color="darkgreen">
    &quot;Use dp_/m_flow_small_staticHead only if static head actually exists&quot;</font>;
  <font color="darkgreen">                                                       /*abs(height_ab)&gt;0*/</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> dp_small_staticHead =<font color="red"> noEvent</font>(<font color="red">max</font>(dp_small, 0.015*<font color="red">abs</font>(g_times_height_ab*(rho_a-rho_b)))) <font color="darkgreen">
    &quot;Heuristic for large discontinuities in static head&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_small_staticHead =<font color="red"> noEvent</font>(<font color="red">max</font>(m_flow_small, (-5.55e-7*(rho_a+rho_b)/2+5.5e-4)*<font color="red">abs</font>(g_times_height_ab*(rho_a-rho_b)))) <font color="darkgreen">
    &quot;Heuristic for large discontinuities in static head&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">if </font>from_dp<font color="blue"> and </font><font color="blue">not </font>WallFriction.dp_is_zero<font color="blue"> then</font>
    m_flow =<font color="red"> WallFriction.massFlowRate_dp_staticHead</font>(dp, rho_a, rho_b, mu_a, mu_b, length, diameter,
      g_times_height_ab, roughness, <font color="blue">if </font>use_x_small_staticHead<font color="blue"> then </font>dp_small_staticHead<font color="blue"> else </font>dp_small);
  <font color="blue">else</font>
    dp =<font color="red"> WallFriction.pressureLoss_m_flow_staticHead</font>(m_flow, rho_a, rho_b, mu_a, mu_b, length, diameter,
      g_times_height_ab, roughness, <font color="blue">if </font>use_x_small_staticHead<font color="blue"> then </font>m_flow_small_staticHead<font color="blue"> else </font>m_flow_small);
  <font color="blue">end if</font>;

  <font color="darkgreen">// Energy balance, considering change of potential energy</font>
  port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow) + system.g*height_ab;
  port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow) - system.g*height_ab;

<font color="blue">end </font>TestWallFrictionAndGravity;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Mon Sep  7 10:20:10 2009.
</address></BODY>
</HTML>
