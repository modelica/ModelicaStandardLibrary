<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Pressure loss components that are mainly defined by a quadratic turbulent regime with constant loss factor data&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE QuadraticTurbulent<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses.html#Modelica.Fluid.Fittings.BaseClasses"
>Modelica.Fluid.Fittings.BaseClasses</A>.QuadraticTurbulent</H2>
<B>Pressure loss components that are mainly defined by a quadratic turbulent regime with constant loss factor data</B>
<P>
<P><H3>Information</H3>
<PRE></pre>
<p>
This library provides pressure loss factors of a pipe
segment (orifice, bending etc.) with a minimum amount of data.
If available, data can be provided for <b>both flow directions</b>,
i.e., flow from port_a to port_b and from port_b to port_a,
as well as for the <b>laminar</b> and the <b>turbulent</b> region.
It is also an option to provide the loss factor <b>only</b> for the
<b>turbulent</b> region for a flow from port_a to port_b.
Basically, the pressure drop is defined by the following
equation:
</p>
<pre>   &Delta;p = 0.5*&zeta;*&rho;*v*|v|
      = 0.5*&zeta;/A^2 * (1/&rho;) * m_flow*|m_flow|
      = 8*&zeta;/(&pi;^2*D^4*&rho;) * m_flow*|m_flow|
</pre>
<p>
where
</p>
<ul>
<li> &Delta;p is the pressure drop: &Delta;p = port_a.p - port_b.p</li>
<li> v is the mean velocity.</li>
<li> &rho; is the density.</li>
<li> &zeta; is the loss factor that depends on the geometry of
     the pipe. In the turbulent flow regime, it is assumed that
     &zeta; is constant and is given by "zeta1" and
     "zeta2" depending on the flow direction.<li>
<li> D is the diameter of the pipe segment. If this is not a
     circular cross section, D = 4*A/P, where A is the cross section
     area and P is the wetted perimeter.</li>
</ul>

<pre></PRE><P>

<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorDataS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A>
</TD><TD>Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp"
>massFlowRate_dp</A>
</TD><TD>Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp_and_Re" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp_and_Re"
>massFlowRate_dp_and_Re</A>
</TD><TD>Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow"
>pressureLoss_m_flow</A>
</TD><TD>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_and_Re" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_and_Re"
>pressureLoss_m_flow_and_Re</A>
</TD><TD>Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel"
>BaseModel</A>
</TD><TD>Generic pressure drop component with constant turbulent loss factor data and without an icon</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFrictionS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction"
>TestWallFriction</A>
</TD><TD>Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionAreaS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea"
>BaseModelNonconstantCrossSectionArea</A>
</TD><TD>Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressureS.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressure" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressure"
>pressureLoss_m_flow_totalPressure</A>
</TD><TD>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE LossFactorData<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorDataI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.LossFactorData</H2>
<B>Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
This record defines the pressure loss factors of a pipe
segment (orifice, bending etc.) with a minimum amount of data.
If available, data should be provided for <b>both flow directions</b>,
i.e., flow from port_a to port_b and from port_b to port_a,
as well as for the <b>laminar</b> and the <b>turbulent</b> region.
It is also an option to provide the loss factor <b>only</b> for the
<b>turbulent</b> region for a flow from port_a to port_b.
</p>
<p>
The following equations are used:
</p>
<pre>   &Delta;p = 0.5*&zeta;*&rho;*v*|v|
      = 0.5*&zeta;/A^2 * (1/&rho;) * m_flow*|m_flow|
      = 8*&zeta;/(&pi;^2*D^4*&rho;) * m_flow*|m_flow|
        Re = |v|*D*&rho;/&mu;
</pre>
<table border=1 cellspacing=0 cellpadding=2>
<tr><td><b>flow type</b></td>
    <td><b>&zeta;</b> = </td>
    <td><b>flow region</b></td></tr>
<tr><td>turbulent</td>
    <td><b>zeta1</b> = const.</td>
    <td>Re &ge;  Re_turbulent, v &ge; 0</td></tr>
<tr><td></td>
    <td><b>zeta2</b> = const.</td>
    <td>Re &ge; Re_turbulent, v &lt; 0</td></tr>
<tr><td>laminar</td>
    <td><b>c0</b>/Re</td>
    <td>both flow directions, Re small; c0 = const.</td></tr>
</table>
<p>
where
</p>
<ul>
<li> &Delta;p is the pressure drop: &Delta;p = port_a.p - port_b.p</li>
<li> v is the mean velocity.</li>
<li> &rho; is the density.</li>
<li> &zeta; is the loss factor that depends on the geometry of
     the pipe. In the turbulent flow regime, it is assumed that
     &zeta; is constant and is given by "zeta1" and
     "zeta2" depending on the flow direction.<br>
     When the Reynolds number Re is below "Re_turbulent", the
     flow is laminar for small flow velocities. For higher
     velocities there is a transition region from
     laminar to turbulent flow. The loss factor for
     laminar flow at small velocities is defined by the often occuring
     approximation c0/Re. If c0 is different for the two
     flow directions, the mean value has to be used
     (c0 = (c0_ab + c0_ba)/2).<li>
<li> The equation "&Delta;p = 0.5*&zeta;*&rho;*v*|v|" is either with
     respect to port_a or to port_b, depending on the definition
     of the particular loss factor &zeta; (in some references loss
     factors are defined with respect to port_a, in other references
     with respect to port_b).</li>

<li> Re = |v|*D_Re*&rho;/&mu; = |m_flow|*D_Re/(A_Re*&mu;)
     is the Reynolds number at the smallest cross
     section area. This is often at port_a or at port_b, but can
     also be between the two ports. In the record, the diameter
     D_Re of this smallest cross section area has to be provided, as
     well, as Re_turbulent, the absolute value of the
     Reynolds number at which
     the turbulent flow starts. If Re_turbulent is different for
     the two flow directions, use the smaller value as Re_turbulent.</li>
<li> D is the diameter of the pipe. If the pipe has not a
     circular cross section, D = 4*A/P, where A is the cross section
     area and P is the wetted perimeter.</li>
<li> A is the cross section area with A = &pi;(D/2)^2.
<li> &mu; is the dynamic viscosity.</li>
</ul>
<p>
The laminar and the transition region is usually of
not much technical interest because the operating point is
mostly in the turbulent regime. For simplification and for
numercial reasons, this whole region is described by two
polynomials of third order, one polynomial for m_flow &ge; 0
and one for m_flow &lt; 0. The polynomials start at
Re = |m_flow|*4/(&pi;*D_Re*&mu;), where D_Re is the
smallest diameter between port_a and port_b.
The common derivative
of the two polynomials at Re = 0 is
computed from the equation "c0/Re". Note, the pressure drop
equation above in the laminar region is always defined
with respect to the smallest diameter D_Re.
</p>
<p>
If no data for c0 is available, the derivative at Re = 0 is computed in such
a way, that the second derivatives of the two polynomials
are identical at Re = 0. The polynomials are constructed, such that
they smoothly touch the characteristic curves in the turbulent
regions. The whole characteristic is therefore <b>continuous</b>
and has a <b>finite</b>, <b>continuous first derivative everywhere</b>.
In some cases, the constructed polynomials would "vibrate". This is
avoided by reducing the derivative at Re=0 in such a way that
the polynomials are guaranteed to be monotonically increasing.
The used sufficient criteria for monotonicity follows from:
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A> (Icon for a record).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter_a</TD><TD>&nbsp;</TD><TD>Diameter at port_a [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter_b</TD><TD>&nbsp;</TD><TD>Diameter at port_b [m]</TD></TR>
<TR><TD>Real</TD><TD>zeta1</TD><TD>&nbsp;</TD><TD>Loss factor for flow port_a -&gt; port_b</TD></TR>
<TR><TD>Real</TD><TD>zeta2</TD><TD>&nbsp;</TD><TD>Loss factor for flow port_b -&gt; port_a</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>ReynoldsNumber</A></TD><TD>Re_turbulent</TD><TD>&nbsp;</TD><TD>Loss factors suited for Re &gt;= Re_turbulent [1]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>D_Re</TD><TD>&nbsp;</TD><TD>Diameter used to compute Re [m]</TD></TR>
<TR><TD>Boolean</TD><TD>zeta1_at_a</TD><TD>true</TD><TD>dp = zeta1*(if zeta1_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)</TD></TR>
<TR><TD>Boolean</TD><TD>zeta2_at_a</TD><TD>false</TD><TD>dp = -zeta2*(if zeta2_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)</TD></TR>
<TR><TD>Boolean</TD><TD>zetaLaminarKnown</TD><TD>false</TD><TD>= true, if zeta = c0/Re in laminar region</TD></TR>
<TR><TD>Real</TD><TD>c0</TD><TD>1</TD><TD>zeta = c0/Re; dp = zeta*rho_Re*v_Re^2/2, Re=v_Re*D_Re*rho_Re/mu_Re)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">record</font> LossFactorData <font color="darkgreen">
  &quot;Data structure defining constant loss factor data for dp = zeta*rho*v*|v|/2 and functions providing the data for some loss types&quot;</font>

       <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Record"
>Modelica.Icons.Record</A>;

 <A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter_a <font color="darkgreen">&quot;Diameter at port_a&quot;</font>;
 <A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter_b <font color="darkgreen">&quot;Diameter at port_b&quot;</font>;
 Real zeta1 <font color="darkgreen">&quot;Loss factor for flow port_a -&gt; port_b&quot;</font>;
 Real zeta2 <font color="darkgreen">&quot;Loss factor for flow port_b -&gt; port_a&quot;</font>;
 <A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re_turbulent <font color="darkgreen">&quot;Loss factors suited for Re &gt;= Re_turbulent&quot;</font>;
 <A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> D_Re <font color="darkgreen">&quot;Diameter used to compute Re&quot;</font>;
 Boolean zeta1_at_a = true <font color="darkgreen">
    &quot;dp = zeta1*(if zeta1_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)&quot;</font>;
 Boolean zeta2_at_a = false <font color="darkgreen">
    &quot;dp = -zeta2*(if zeta2_at_a then rho_a*v_a^2/2 else rho_b*v_b^2/2)&quot;</font>;
 Boolean zetaLaminarKnown = false <font color="darkgreen">&quot;= true, if zeta = c0/Re in laminar region&quot;</font>;
 Real c0 = 1 <font color="darkgreen">
    &quot;zeta = c0/Re; dp = zeta*rho_Re*v_Re^2/2, Re=v_Re*D_Re*rho_Re/mu_Re)&quot;</font>;


  <font color="blue">encapsulated </font><font color="blue">function</font> wallFriction <font color="darkgreen">
    &quot;Return pressure loss data due to friction in a straight pipe with walls of nonuniform roughness (not useful for smooth pipes, since zeta is no function of Re)&quot;</font>
     <font color="blue">import </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData</A>;
     <font color="blue">import </font>lg = <A HREF="Modelica_Math.html#Modelica.Math.log10"
>Modelica.Math.log10</A>;
     <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;

    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> length <font color="darkgreen">&quot;Length of pipe&quot;</font>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter <font color="darkgreen">&quot;Inner diameter of pipe&quot;</font>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> roughness(min=1e-10) <font color="darkgreen">
      &quot;Absolute roughness of pipe (&gt; 0 required, details see info layer)&quot;</font>;
    <font color="blue">output </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Pressure loss factors for both flow directions&quot;</font>;
  <font color="blue">protected </font>
    Real Delta = roughness/diameter <font color="darkgreen">&quot;relative roughness&quot;</font>;
  <font color="blue">algorithm </font>
    data.diameter_a          := diameter;
    data.diameter_b          := diameter;
    data.zeta1        := (length/diameter)/(2*<font color="red">lg</font>(3.7 /Delta))^2;
    data.zeta2        := data.zeta1;
    data.Re_turbulent := 4000 <font color="darkgreen">
      &quot;&gt;= 560/Delta flow does not depend on Re, but interpolation is bad&quot;</font>;
    data.D_Re         := diameter;
    data.zeta1_at_a   := true;
    data.zeta2_at_a   := false;
    data.zetaLaminarKnown := true;
    data.c0               := 64*(length/diameter);
  <font color="blue">end </font>wallFriction;

  <font color="blue">encapsulated </font><font color="blue">function</font> suddenExpansion <font color="darkgreen">
    &quot;Return pressure loss data for sudden expansion or contraction in a pipe (for both flow directions)&quot;</font>
     <font color="blue">import </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData</A>;
     <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter_a <font color="darkgreen">&quot;Inner diameter of pipe at port_a&quot;</font>;
    <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter_b <font color="darkgreen">&quot;Inner diameter of pipe at port_b&quot;</font>;
    <font color="blue">output </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Pressure loss factors for both flow directions&quot;</font>;
  <font color="blue">protected </font>
    Real A_rel;
  <font color="blue">algorithm </font>
    data.diameter_a          := diameter_a;
    data.diameter_b          := diameter_b;
    data.Re_turbulent := 100;
    data.zetaLaminarKnown := true;
    data.c0 := 30;

    <font color="blue">if </font>diameter_a &lt;= diameter_b<font color="blue"> then</font>
       A_rel :=(diameter_a/diameter_b)^2;
       data.zeta1 :=(1 - A_rel)^2;
       data.zeta2 :=0.5*(1 - A_rel)^0.75;
       data.zeta1_at_a :=true;
       data.zeta2_at_a :=true;
       data.D_Re := diameter_a;
    <font color="blue">else</font>
       A_rel :=(diameter_b/diameter_a)^2;
       data.zeta1 :=0.5*(1 - A_rel)^0.75;
       data.zeta2 :=(1 - A_rel)^2;
       data.zeta1_at_a :=false;
       data.zeta2_at_a :=false;
       data.D_Re := diameter_b;
    <font color="blue">end if</font>;
  <font color="blue">end </font>suddenExpansion;

  <font color="blue">encapsulated </font><font color="blue">function</font> sharpEdgedOrifice <font color="darkgreen">
    &quot;Return pressure loss data for sharp edged orifice (for both flow directions)&quot;</font>
     <font color="blue">import </font>NonSI = <A HREF="Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits"
>Modelica.SIunits.Conversions.NonSIunits</A>;
     <font color="blue">import </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData</A>;
     <font color="blue">import </font>SI = <A HREF="Modelica_SIunits.html#Modelica.SIunits"
>Modelica.SIunits</A>;
     <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter <font color="darkgreen">
      &quot;Inner diameter of pipe (= same at port_a and port_b)&quot;</font>;
     <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> leastDiameter <font color="darkgreen">&quot;Smallest diameter of orifice&quot;</font>;
     <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> length <font color="darkgreen">&quot;Length of orifice&quot;</font>;
     <font color="blue">input </font><A HREF="Modelica_SIunits_Conversions_NonSIunits.html#Modelica.SIunits.Conversions.NonSIunits.Angle_deg"
>NonSI.Angle_deg</A> alpha <font color="darkgreen">&quot;Angle of orifice&quot;</font>;
     <font color="blue">output </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">
      &quot;Pressure loss factors for both flow directions&quot;</font>;
  <font color="blue">protected </font>
     Real D_rel=leastDiameter/diameter;
     Real LD=length/leastDiameter;
     Real k=0.13 + 0.34*10^(-(3.4*LD + 88.4*LD^2.3));
  <font color="blue">algorithm </font>
     data.diameter_a := diameter;
     data.diameter_b := diameter;
     data.zeta1 := ((1 - D_rel) + 0.707*(1 - D_rel)^0.375)^2*(1/D_rel)^2;
     data.zeta2 := k*(1 - D_rel)^0.75 + (1 - D_rel)^2 + 2*<font color="red">sqrt</font>(k*(1 -
       D_rel)^0.375) + (1 - D_rel);
     data.Re_turbulent := 1e4;
     data.D_Re := leastDiameter;
     data.zeta1_at_a := true;
     data.zeta2_at_a := false;
     data.zetaLaminarKnown := false;
     data.c0 := 0;
  <font color="blue">end </font>sharpEdgedOrifice;

<font color="blue">end </font>LossFactorData;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE massFlowRate_dp<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.massFlowRate_dp</H2>
<B>Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
Compute mass flow rate from constant loss factor and pressure drop (m_flow = f(dp)).
For small pressure drops (dp &lt; dp_small), the characteristic is approximated by
a polynomial in order to have a finite derivative at zero mass flow rate.
</p>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>&nbsp;</TD><TD>Pressure drop (dp = port_a.p - port_b.p) [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a</TD><TD>&nbsp;</TD><TD>Density at port_a [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b</TD><TD>&nbsp;</TD><TD>Density at port_b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Constant loss factors for both flow directions</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_small</TD><TD>1</TD><TD>Turbulent flow if |dp| &gt;= dp_small [Pa]</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>Mass flow rate from port_a to port_b [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> massFlowRate_dp <font color="darkgreen">
  &quot;Return mass flow rate from constant loss factor data and pressure drop (m_flow = f(dp))&quot;</font>
  <font color="darkgreen">      //import Modelica.Fluid.PressureLosses.BaseClasses.lossConstant_D_zeta;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure drop (dp = port_a.p - port_b.p)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a <font color="darkgreen">&quot;Density at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b <font color="darkgreen">&quot;Density at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Constant loss factors for both flow directions&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> dp_small = 1 <font color="darkgreen">&quot;Turbulent flow if |dp| &gt;= dp_small&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate from port_a to port_b&quot;</font>;

<font color="blue">protected </font>
  Real k1 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta1_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta1);
  Real k2 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta2_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta2);
<font color="blue">algorithm </font>
  <font color="darkgreen">/*
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
  */</font>
  m_flow :=<font color="red">Utilities.regRoot2</font>(dp, dp_small, rho_a/k1, rho_b/k2);
<font color="blue">end </font>massFlowRate_dp;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE massFlowRate_dp_and_Re<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp_and_Re" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dp_and_Re"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.massFlowRate_dp_and_Re</H2>
<B>Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
Compute mass flow rate from constant loss factor and pressure drop (m_flow = f(dp)).
If the Reynolds-number Re &ge; data.Re_turbulent, the flow
is treated as a turbulent flow with constant loss factor zeta.
If the Reynolds-number Re &lt; data.Re_turbulent, the flow
is laminar and/or in a transition region between laminar and
turbulent. This region is approximated by two
polynomials of third order, one polynomial for m_flow &ge; 0
and one for m_flow &lt; 0.
The common derivative
of the two polynomials at Re = 0 is
computed from the equation "data.c0/Re".
</p>
<p>
If no data for c0 is available, the derivative at Re = 0 is computed in such
a way, that the second derivatives of the two polynomials
are identical at Re = 0. The polynomials are constructed, such that
they smoothly touch the characteristic curves in the turbulent
regions. The whole characteristic is therefore <b>continuous</b>
and has a <b>finite</b>, <b>continuous first derivative everywhere</b>.
In some cases, the constructed polynomials would "vibrate". This is
avoided by reducing the derivative at Re=0 in such a way that
the polynomials are guaranteed to be monotonically increasing.
The used sufficient criteria for monotonicity follows from:
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>&nbsp;</TD><TD>Pressure drop (dp = port_a.p - port_b.p) [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a</TD><TD>&nbsp;</TD><TD>Density at port_a [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b</TD><TD>&nbsp;</TD><TD>Density at port_b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>mu_a</TD><TD>&nbsp;</TD><TD>Dynamic viscosity at port_a [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>mu_b</TD><TD>&nbsp;</TD><TD>Dynamic viscosity at port_b [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Constant loss factors for both flow directions</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>Mass flow rate from port_a to port_b [kg/s]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> massFlowRate_dp_and_Re <font color="darkgreen">
  &quot;Return mass flow rate from constant loss factor data, pressure drop and Re (m_flow = f(dp))&quot;</font>
        <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure drop (dp = port_a.p - port_b.p)&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a <font color="darkgreen">&quot;Density at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b <font color="darkgreen">&quot;Density at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_a <font color="darkgreen">&quot;Dynamic viscosity at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_b <font color="darkgreen">&quot;Dynamic viscosity at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Constant loss factors for both flow directions&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate from port_a to port_b&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">constant </font>Real pi=Modelica.Constants.pi;
  Real k0=2*data.c0/(pi*data.D_Re^3);
  Real k1 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta1_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta1);
  Real k2 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta2_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta2);
  Real yd0 <font color="darkgreen">&quot;Derivative of m_flow=m_flow(dp) at zero, if data.zetaLaminarKnown&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> dp_turbulent <font color="darkgreen">
    &quot;The turbulent region is: |dp| &gt;= dp_turbulent&quot;</font>;
<font color="blue">algorithm </font>
<font color="darkgreen">/*
Turbulent region:
   Re = m_flow*(4/pi)/(D_Re*mu)
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
   m_flow_turbulent = (pi/4)*D_Re*mu*Re_turbulent
   dp_turbulent     =  k/rho *(D_Re*mu*pi/4)^2 * Re_turbulent^2

   The start of the turbulent region is computed with mean values
   of dynamic viscosity mu and density rho. Otherwise, one has
   to introduce different &quot;delta&quot; values for both flow directions.
   In order to simplify the approach, only one delta is used.

Laminar region:
   dp = 0.5*zeta/(A^2*d) * m_flow * |m_flow|
      = 0.5 * c0/(|m_flow|*(4/pi)/(D_Re*mu)) / ((pi*(D_Re/2)^2)^2*d) * m_flow*|m_flow|
      = 0.5 * c0*(pi/4)*(D_Re*mu) * 16/(pi^2*D_Re^4*d) * m_flow*|m_flow|
      = 2*c0/(pi*D_Re^3) * mu/rho * m_flow
      = k0 * mu/rho * m_flow
   k0 = 2*c0/(pi*D_Re^3)

   In order that the derivative of dp=f(m_flow) is continuous
   at m_flow=0, the mean values of mu and d are used in the
   laminar region: mu/rho = (mu_a + mu_b)/(rho_a + rho_b)
   If data.zetaLaminarKnown = false then mu_a and mu_b are potentially zero
   (because dummy values) and therefore the division is only performed
   if zetaLaminarKnown = true.
*/</font>
   dp_turbulent :=(k1 + k2)/(rho_a + rho_b)*
                  ((mu_a + mu_b)*data.D_Re*pi/8)^2*data.Re_turbulent^2;
   yd0 :=<font color="blue">if </font>data.zetaLaminarKnown<font color="blue"> then </font>
            (rho_a + rho_b)/(k0*(mu_a + mu_b))<font color="blue"> else </font>0;
   m_flow :=<font color="red"> Utilities.regRoot2</font>(dp, dp_turbulent, rho_a/k1, rho_b/k2,
                                               data.zetaLaminarKnown, yd0);
<font color="blue">end </font>massFlowRate_dp_and_Re;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE pressureLoss_m_flow<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.pressureLoss_m_flow</H2>
<B>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)).
For small mass flow rates(|m_flow| &lt; m_flow_small), the characteristic is approximated by
a polynomial in order to have a finite derivative at zero mass flow rate.
</p>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>&nbsp;</TD><TD>Mass flow rate from port_a to port_b [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a</TD><TD>&nbsp;</TD><TD>Density at port_a [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b</TD><TD>&nbsp;</TD><TD>Density at port_b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Constant loss factors for both flow directions</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>0.01</TD><TD>Turbulent flow if |m_flow| &gt;= m_flow_small [kg/s]</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>Pressure drop (dp = port_a.p - port_b.p) [Pa]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> pressureLoss_m_flow <font color="darkgreen">
  &quot;Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))&quot;</font>
        <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate from port_a to port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a <font color="darkgreen">&quot;Density at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b <font color="darkgreen">&quot;Density at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Constant loss factors for both flow directions&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_small = 0.01 <font color="darkgreen">
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure drop (dp = port_a.p - port_b.p)&quot;</font>;

<font color="blue">protected </font>
  Real k1 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta1_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta1);
  Real k2 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta2_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta2);
<font color="blue">algorithm </font>
  <font color="darkgreen">/*
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
  */</font>
  dp :=<font color="red">Utilities.regSquare2</font>(m_flow, m_flow_small, k1/rho_a, k2/rho_b);
<font color="blue">end </font>pressureLoss_m_flow;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE pressureLoss_m_flow_and_Re<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.massFlowRate_dpI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_and_Re" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_and_Re"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.pressureLoss_m_flow_and_Re</H2>
<B>Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)).
If the Reynolds-number Re &ge; data.Re_turbulent, the flow
is treated as a turbulent flow with constant loss factor zeta.
If the Reynolds-number Re &lt; data.Re_turbulent, the flow
is laminar and/or in a transition region between laminar and
turbulent. This region is approximated by two
polynomials of third order, one polynomial for m_flow &ge; 0
and one for m_flow &lt; 0.
The common derivative
of the two polynomials at Re = 0 is
computed from the equation "data.c0/Re".
</p>
<p>
If no data for c0 is available, the derivative at Re = 0 is computed in such
a way, that the second derivatives of the two polynomials
are identical at Re = 0. The polynomials are constructed, such that
they smoothly touch the characteristic curves in the turbulent
regions. The whole characteristic is therefore <b>continuous</b>
and has a <b>finite</b>, <b>continuous first derivative everywhere</b>.
In some cases, the constructed polynomials would "vibrate". This is
avoided by reducing the derivative at Re=0 in such a way that
the polynomials are guaranteed to be monotonically increasing.
The used sufficient criteria for monotonicity follows from:
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>&nbsp;</TD><TD>Mass flow rate from port_a to port_b [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a</TD><TD>&nbsp;</TD><TD>Density at port_a [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b</TD><TD>&nbsp;</TD><TD>Density at port_b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>mu_a</TD><TD>&nbsp;</TD><TD>Dynamic viscosity at port_a [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>DynamicViscosity</A></TD><TD>mu_b</TD><TD>&nbsp;</TD><TD>Dynamic viscosity at port_b [Pa.s]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Constant loss factors for both flow directions</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>Pressure drop (dp = port_a.p - port_b.p) [Pa]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> pressureLoss_m_flow_and_Re <font color="darkgreen">
  &quot;Return pressure drop from constant loss factor, mass flow rate and Re (dp = f(m_flow))&quot;</font>
        <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate from port_a to port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a <font color="darkgreen">&quot;Density at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b <font color="darkgreen">&quot;Density at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_a <font color="darkgreen">&quot;Dynamic viscosity at port_a&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.DynamicViscosity"
>SI.DynamicViscosity</A> mu_b <font color="darkgreen">&quot;Dynamic viscosity at port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Constant loss factors for both flow directions&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure drop (dp = port_a.p - port_b.p)&quot;</font>;

<font color="blue">protected </font>
  <font color="blue">constant </font>Real pi=Modelica.Constants.pi;
  Real k0 = 2*data.c0/(pi*data.D_Re^3);
  Real k1 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta1_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta1);
  Real k2 =<font color="red"> lossConstant_D_zeta</font>(<font color="blue">if </font>data.zeta2_at_a<font color="blue"> then </font>data.diameter_a<font color="blue"> else </font>data.diameter_b,data.zeta2);
  Real yd0 <font color="darkgreen">&quot;Derivative of dp = f(m_flow) at zero, if data.zetaLaminarKnown&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_turbulent <font color="darkgreen">
    &quot;The turbulent region is: |m_flow| &gt;= m_flow_turbulent&quot;</font>;
<font color="blue">algorithm </font>
<font color="darkgreen">/*
Turbulent region:
   Re = m_flow*(4/pi)/(D_Re*mu)
   dp = 0.5*zeta*rho*v*|v|
      = 0.5*zeta*rho*1/(rho*A)^2 * m_flow * |m_flow|
      = 0.5*zeta/A^2 *1/rho * m_flow * |m_flow|
      = k/rho * m_flow * |m_flow|
   k  = 0.5*zeta/A^2
      = 0.5*zeta/(pi*(D/2)^2)^2
      = 8*zeta/(pi*D^2)^2
   m_flow_turbulent = (pi/4)*D_Re*mu*Re_turbulent
   dp_turbulent     =  k/rho *(D_Re*mu*pi/4)^2 * Re_turbulent^2

   The start of the turbulent region is computed with mean values
   of dynamic viscosity mu and density rho. Otherwise, one has
   to introduce different &quot;delta&quot; values for both flow directions.
   In order to simplify the approach, only one delta is used.

Laminar region:
   dp = 0.5*zeta/(A^2*d) * m_flow * |m_flow|
      = 0.5 * c0/(|m_flow|*(4/pi)/(D_Re*mu)) / ((pi*(D_Re/2)^2)^2*d) * m_flow*|m_flow|
      = 0.5 * c0*(pi/4)*(D_Re*mu) * 16/(pi^2*D_Re^4*d) * m_flow*|m_flow|
      = 2*c0/(pi*D_Re^3) * mu/rho * m_flow
      = k0 * mu/rho * m_flow
   k0 = 2*c0/(pi*D_Re^3)

   In order that the derivative of dp=f(m_flow) is continuous
   at m_flow=0, the mean values of mu and d are used in the
   laminar region: mu/rho = (mu_a + mu_b)/(rho_a + rho_b)
   If data.zetaLaminarKnown = false then mu_a and mu_b are potentially zero
   (because dummy values) and therefore the division is only performed
   if zetaLaminarKnown = true.
*/</font>
  m_flow_turbulent :=(pi/8)*data.D_Re*(mu_a + mu_b)*data.Re_turbulent;
  yd0 :=<font color="blue">if </font>data.zetaLaminarKnown<font color="blue"> then </font>k0*(mu_a + mu_b)/(rho_a + rho_b)<font color="blue"> else </font>0;
  dp :=<font color="red">Utilities.regSquare2</font>(m_flow, m_flow_turbulent, k1/rho_a, k2/rho_b,
                                           data.zetaLaminarKnown, yd0);
<font color="blue">end </font>pressureLoss_m_flow_and_Re;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BaseModel<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.BaseModel</H2>
<B>Generic pressure drop component with constant turbulent loss factor data and without an icon</B><p>
<IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelD.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel">
<P><H3>Information</H3>
<PRE></pre>
<p>
This model computes the pressure loss of a pipe
segment (orifice, bending etc.) with a minimum amount of data
provided via parameter <b>data</b>.
If available, data should be provided for <b>both flow directions</b>,
i.e., flow from port_a to port_b and from port_b to port_a,
as well as for the <b>laminar</b> and the <b>turbulent</b> region.
It is also an option to provide the loss factor <b>only</b> for the
<b>turbulent</b> region for a flow from port_a to port_b.
</p>
<p>
The following equations are used:
</p>
<pre>   &Delta;p = 0.5*&zeta;*&rho;*v*|v|
      = 0.5*&zeta;/A^2 * (1/&rho;) * m_flow*|m_flow|
        Re = |v|*D*&rho;/&mu;
</pre>
<table border=1 cellspacing=0 cellpadding=2>
<tr><td><b>flow type</b></td>
    <td><b>&zeta;</b> = </td>
    <td><b>flow region</b></td></tr>
<tr><td>turbulent</td>
    <td><b>zeta1</b> = const.</td>
    <td>Re &ge;  Re_turbulent, v &ge; 0</td></tr>
<tr><td></td>
    <td><b>zeta2</b> = const.</td>
    <td>Re &ge; Re_turbulent, v &lt; 0</td></tr>
<tr><td>laminar</td>
    <td><b>c0</b>/Re</td>
    <td>both flow directions, Re small; c0 = const.</td></tr>
</table>
<p>
where
</p>
<ul>
<li> &Delta;p is the pressure drop: &Delta;p = port_a.p - port_b.p</li>
<li> v is the mean velocity.</li>
<li> &rho; is the density.</li>
<li> &zeta; is the loss factor that depends on the geometry of
     the pipe. In the turbulent flow regime, it is assumed that
     &zeta; is constant and is given by "zeta1" and
     "zeta2" depending on the flow direction.<br>
     When the Reynolds number Re is below "Re_turbulent", the
     flow is laminar for small flow velocities. For higher
     velocities there is a transition region from
     laminar to turbulent flow. The loss factor for
     laminar flow at small velocities is defined by the often occuring
     approximation c0/Re. If c0 is different for the two
     flow directions, the mean value has to be used
     (c0 = (c0_ab + c0_ba)/2).<li>
<li> The equation "&Delta;p = 0.5*&zeta;*&rho;*v*|v|" is either with
     respect to port_a or to port_b, depending on the definition
     of the particular loss factor &zeta; (in some references loss
     factors are defined with respect to port_a, in other references
     with respect to port_b).</li>

<li> Re = |v|*D_Re*&rho;/&mu; = |m_flow|*D_Re/(A_Re*&mu;)
     is the Reynolds number at the smallest cross
     section area. This is often at port_a or at port_b, but can
     also be between the two ports. In the record, the diameter
     D_Re of this smallest cross section area has to be provided, as
     well, as Re_turbulent, the absolute value of the
     Reynolds number at which
     the turbulent flow starts. If Re_turbulent is different for
     the two flow directions, use the smaller value as Re_turbulent.</li>
<li> D is the diameter of the pipe. If the pipe has not a
     circular cross section, D = 4*A/P, where A is the cross section
     area and P is the wetted perimeter.</li>
<li> A is the cross section area with A = &pi;(D/2)^2.
<li> &mu; is the dynamic viscosity.</li>
</ul>
<p>
The laminar and the transition region is usually of
not much technical interest because the operating point is
mostly in the turbulent regime. For simplification and for
numercial reasons, this whole region is described by two
polynomials of third order, one polynomial for m_flow &ge; 0
and one for m_flow &lt; 0. The polynomials start at
Re = |m_flow|*4/(&pi;*D_Re*&mu;), where D_Re is the
smallest diameter between port_a and port_b.
The common derivative
of the two polynomials at Re = 0 is
computed from the equation "c0/Re". Note, the pressure drop
equation above in the laminar region is always defined
with respect to the smallest diameter D_Re.
</p>
<p>
If no data for c0 is available, the derivative at Re = 0 is computed in such
a way, that the second derivatives of the two polynomials
are identical at Re = 0. The polynomials are constructed, such that
they smoothly touch the characteristic curves in the turbulent
regions. The whole characteristic is therefore <b>continuous</b>
and has a <b>finite</b>, <b>continuous first derivative everywhere</b>.
In some cases, the constructed polynomials would "vibrate". This is
avoided by reducing the derivative at Re=0 in such a way that
the polynomials are guaranteed to be monotonically increasing.
The used sufficient criteria for monotonicity follows from:
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE>
Extends from <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A> (Partial element transporting fluid between two ports without storage of mass or energy), <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow"
>Modelica.Fluid.Interfaces.PartialLumpedFlow</A> (Base class for a lumped momentum balance).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>pathLength</TD><TD>0</TD><TD>Length flow path [m]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Loss factor data</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Dynamics</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>momentumDynamics</TD><TD>Types.Dynamics.SteadyState</TD><TD>Formulation of momentum balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_start</TD><TD>0.01*system.p_start</TD><TD>Guess value of dp = port_a.p - port_b.p [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Guess value of m_flow = port_a.m_flow [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>system.m_flow_small</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>true</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>use_Re</TD><TD>false</TD><TD>= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_small</TD><TD>system.dp_small</TD><TD>Turbulent flow if |dp| &gt;= dp_small [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>true</TD><TD>= true, if temperatures at port_a and port_b are computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_V_flow</TD><TD>true</TD><TD>= true, if volume flow rate at inflowing port is computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_Re</TD><TD>false</TD><TD>= true, if Reynolds number is included for plotting</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> BaseModel <font color="darkgreen">
  &quot;Generic pressure drop component with constant turbulent loss factor data and without an icon&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A>;
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow"
>Modelica.Fluid.Interfaces.PartialLumpedFlow</A>(
    <font color="blue">final </font>pathLength = 0,
    <font color="blue">final </font>momentumDynamics = Types.Dynamics.SteadyState);

  <font color="blue">parameter </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Loss factor data&quot;</font>;

  <font color="darkgreen">// Advanced</font>
  <font color="blue">parameter </font>Boolean from_dp = true <font color="darkgreen">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</font>;
  <font color="blue">parameter </font>Boolean use_Re = false <font color="darkgreen">
    &quot;= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> dp_small = system.dp_small <font color="darkgreen">
    &quot;Turbulent flow if |dp| &gt;= dp_small&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium.MassFlowRate</A> m_flow_small = system.m_flow_small <font color="darkgreen">
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;</font>;

  <font color="darkgreen">// Diagnostics</font>
  <font color="blue">parameter </font>Boolean show_Re = false <font color="darkgreen">
    &quot;= true, if Reynolds number is included for plotting&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re =<font color="red"> Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers.ReynoldsNumber_m_flow</font>(
        m_flow,
        <font color="red">noEvent</font>(<font color="blue">if </font>m_flow&gt;0<font color="blue"> then </font><font color="red">Medium.dynamicViscosity</font>(state_a)<font color="blue"> else </font><font color="red">Medium.dynamicViscosity</font>(state_b)),
        data.D_Re) <font color="blue">if </font>show_Re <font color="darkgreen">&quot;Reynolds number at diameter data.D_Re&quot;</font>;

  <font color="darkgreen">// Variables</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp_fg <font color="darkgreen">&quot;pressure loss due to friction and gravity&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> A_mean = Modelica.Constants.pi/4*(data.diameter_a^2+data.diameter_b^2)/2 <font color="darkgreen">
    &quot;mean cross flow area&quot;</font>;

<font color="blue">equation </font>
  Ib_flow = 0;
  F_p = A_mean*(<font color="red">Medium.pressure</font>(state_b) -<font color="red"> Medium.pressure</font>(state_a));
  F_fg = A_mean*dp_fg;
  <font color="blue">if </font>from_dp<font color="blue"> then</font>
     m_flow = <font color="blue">if </font>use_Re<font color="blue"> then </font>
                 <font color="red">massFlowRate_dp_and_Re</font>(
                    dp_fg,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b),
                    <font color="red">Medium.dynamicViscosity</font>(state_a),
                    <font color="red">Medium.dynamicViscosity</font>(state_b),
                    data)<font color="blue"> else </font>
                 <font color="red">massFlowRate_dp</font>(dp_fg,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b), data, dp_small);
  <font color="blue">else</font>
     dp_fg = <font color="blue">if </font>use_Re<font color="blue"> then </font>
             <font color="red">pressureLoss_m_flow_and_Re</font>(
                 m_flow,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b),
                 <font color="red">Medium.dynamicViscosity</font>(state_a),
                 <font color="red">Medium.dynamicViscosity</font>(state_b),
                 data)<font color="blue"> else </font>
             <font color="red">pressureLoss_m_flow</font>(m_flow,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b), data, m_flow_small);
  <font color="blue">end if</font>;

  <font color="darkgreen">// Isenthalpic state transformation (no storage and no loss of energy)</font>
  port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow);
  port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow);

<font color="blue">end </font>BaseModel;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TestWallFriction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFrictionI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.TestWallFriction</H2>
<B>Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)</B><p>
<IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelD.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.TestWallFriction">
<P><H3>Information</H3>
<PRE></pre>

<pre></PRE>
Extends from <A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel"
>BaseModel</A> (Generic pressure drop component with constant turbulent loss factor data and without an icon).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>LossFactorData.wallFriction(...</TD><TD>Loss factor data</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>length</TD><TD>&nbsp;</TD><TD>Length of pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter</TD><TD>&nbsp;</TD><TD>Inner diameter of pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>roughness</TD><TD>&nbsp;</TD><TD>Absolute roughness of pipe (&gt; 0 required, details see info layer) [m]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_start</TD><TD>0.01*system.p_start</TD><TD>Guess value of dp = port_a.p - port_b.p [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Guess value of m_flow = port_a.m_flow [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>system.m_flow_small</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD>Boolean</TD><TD>from_dp</TD><TD>true</TD><TD>= true, use m_flow = f(dp) else dp = f(m_flow)</TD></TR>
<TR><TD>Boolean</TD><TD>use_Re</TD><TD>false</TD><TD>= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_small</TD><TD>system.dp_small</TD><TD>Turbulent flow if |dp| &gt;= dp_small [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>true</TD><TD>= true, if temperatures at port_a and port_b are computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_V_flow</TD><TD>true</TD><TD>= true, if volume flow rate at inflowing port is computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_Re</TD><TD>false</TD><TD>= true, if Reynolds number is included for plotting</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TestWallFriction <font color="darkgreen">
  &quot;Pressure drop in pipe due to wall friction (only for test purposes; if needed use Pipes.StaticPipe instead)&quot;</font>
        <font color="blue">extends </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModel"
>BaseModel</A>(<font color="blue">final </font>data=
          <font color="red">LossFactorData.wallFriction</font>(
          length,
          diameter,
          roughness));
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> length <font color="darkgreen">&quot;Length of pipe&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>SI.Diameter</A> diameter <font color="darkgreen">&quot;Inner diameter of pipe&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>SI.Length</A> roughness(min=1e-10) <font color="darkgreen">
    &quot;Absolute roughness of pipe (&gt; 0 required, details see info layer)&quot;</font>;
<font color="blue">end </font>TestWallFriction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE BaseModelNonconstantCrossSectionArea<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionAreaI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.BaseModelNonconstantCrossSectionArea</H2>
<B>Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area</B><p>
<IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelD.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.BaseModelNonconstantCrossSectionArea">
<P><H3>Information</H3>
<PRE></pre>
<p>
This model computes the pressure loss of a pipe
segment (orifice, bending etc.) with a minimum amount of data
provided via parameter <b>data</b>.
If available, data should be provided for <b>both flow directions</b>,
i.e., flow from port_a to port_b and from port_b to port_a,
as well as for the <b>laminar</b> and the <b>turbulent</b> region.
It is also an option to provide the loss factor <b>only</b> for the
<b>turbulent</b> region for a flow from port_a to port_b.
</p>
<p>
The following equations are used:
</p>
<pre>   &Delta;p = 0.5*&zeta;*&rho;*v*|v|
      = 0.5*&zeta;/A^2 * (1/&rho;) * m_flow*|m_flow|
        Re = |v|*D*&rho;/&mu;
</pre>
<table border=1 cellspacing=0 cellpadding=2>
<tr><td><b>flow type</b></td>
    <td><b>&zeta;</b> = </td>
    <td><b>flow region</b></td></tr>
<tr><td>turbulent</td>
    <td><b>zeta1</b> = const.</td>
    <td>Re &ge;  Re_turbulent, v &ge; 0</td></tr>
<tr><td></td>
    <td><b>zeta2</b> = const.</td>
    <td>Re &ge; Re_turbulent, v &lt; 0</td></tr>
<tr><td>laminar</td>
    <td><b>c0</b>/Re</td>
    <td>both flow directions, Re small; c0 = const.</td></tr>
</table>
<p>
where
</p>
<ul>
<li> &Delta;p is the pressure drop: &Delta;p = port_a.p - port_b.p</li>
<li> v is the mean velocity.</li>
<li> &rho; is the density.</li>
<li> &zeta; is the loss factor that depends on the geometry of
     the pipe. In the turbulent flow regime, it is assumed that
     &zeta; is constant and is given by "zeta1" and
     "zeta2" depending on the flow direction.<br>
     When the Reynolds number Re is below "Re_turbulent", the
     flow is laminar for small flow velocities. For higher
     velocities there is a transition region from
     laminar to turbulent flow. The loss factor for
     laminar flow at small velocities is defined by the often occuring
     approximation c0/Re. If c0 is different for the two
     flow directions, the mean value has to be used
     (c0 = (c0_ab + c0_ba)/2).<li>
<li> The equation "&Delta;p = 0.5*&zeta;*&rho;*v*|v|" is either with
     respect to port_a or to port_b, depending on the definition
     of the particular loss factor &zeta; (in some references loss
     factors are defined with respect to port_a, in other references
     with respect to port_b).</li>

<li> Re = |v|*D_Re*&rho;/&mu; = |m_flow|*D_Re/(A_Re*&mu;)
     is the Reynolds number at the smallest cross
     section area. This is often at port_a or at port_b, but can
     also be between the two ports. In the record, the diameter
     D_Re of this smallest cross section area has to be provided, as
     well, as Re_turbulent, the absolute value of the
     Reynolds number at which
     the turbulent flow starts. If Re_turbulent is different for
     the two flow directions, use the smaller value as Re_turbulent.</li>
<li> D is the diameter of the pipe. If the pipe has not a
     circular cross section, D = 4*A/P, where A is the cross section
     area and P is the wetted perimeter.</li>
<li> A is the cross section area with A = &pi;(D/2)^2.
<li> &mu; is the dynamic viscosity.</li>
</ul>
<p>
The laminar and the transition region is usually of
not much technical interest because the operating point is
mostly in the turbulent regime. For simplification and for
numercial reasons, this whole region is described by two
polynomials of third order, one polynomial for m_flow &ge; 0
and one for m_flow &lt; 0. The polynomials start at
Re = |m_flow|*4/(&pi;*D_Re*&mu;), where D_Re is the
smallest diameter between port_a and port_b.
The common derivative
of the two polynomials at Re = 0 is
computed from the equation "c0/Re". Note, the pressure drop
equation above in the laminar region is always defined
with respect to the smallest diameter D_Re.
</p>
<p>
If no data for c0 is available, the derivative at Re = 0 is computed in such
a way, that the second derivatives of the two polynomials
are identical at Re = 0. The polynomials are constructed, such that
they smoothly touch the characteristic curves in the turbulent
regions. The whole characteristic is therefore <b>continuous</b>
and has a <b>finite</b>, <b>continuous first derivative everywhere</b>.
In some cases, the constructed polynomials would "vibrate". This is
avoided by reducing the derivative at Re=0 in such a way that
the polynomials are guaranteed to be monotonically increasing.
The used sufficient criteria for monotonicity follows from:
</p>

<dl>
<dt> Fritsch F.N. and Carlson R.E. (1980):</dt>
<dd> <b>Monotone piecewise cubic interpolation</b>.
     SIAM J. Numerc. Anal., Vol. 17, No. 2, April 1980, pp. 238-246</dd>
</dl>
<pre></PRE>
Extends from <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A> (Partial element transporting fluid between two ports without storage of mass or energy), <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow"
>Modelica.Fluid.Interfaces.PartialLumpedFlow</A> (Base class for a lumped momentum balance).
<H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>pathLength</TD><TD>0</TD><TD>Length flow path [m]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Loss factor data</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Dynamics</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>momentumDynamics</TD><TD>Types.Dynamics.SteadyState</TD><TD>Formulation of momentum balance</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_start</TD><TD>0.01*system.p_start</TD><TD>Guess value of dp = port_a.p - port_b.p [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Guess value of m_flow = port_a.m_flow [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>system.m_flow_small</TD><TD>Small mass flow rate for regularization of zero flow [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>dp_small</TD><TD>system.dp_small</TD><TD>Turbulent flow if |dp| &gt;= dp_small [Pa]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Diagnostics</TD></TR>
<TR><TD>Boolean</TD><TD>show_T</TD><TD>true</TD><TD>= true, if temperatures at port_a and port_b are computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_V_flow</TD><TD>true</TD><TD>= true, if volume flow rate at inflowing port is computed</TD></TR>
<TR><TD>Boolean</TD><TD>show_Re</TD><TD>false</TD><TD>= true, if Reynolds number is included for plotting</TD></TR>
<TR><TD>Boolean</TD><TD>show_totalPressures</TD><TD>false</TD><TD>= true, if total pressures are included for plotting</TD></TR>
<TR><TD>Boolean</TD><TD>show_portVelocities</TD><TD>false</TD><TD>= true, if port velocities are included for plotting</TD></TR>
</TABLE>
<H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">partial </font><font color="blue">model</font> BaseModelNonconstantCrossSectionArea <font color="darkgreen">
  &quot;Generic pressure drop component with constant turbulent loss factor data and without an icon, for non-constant cross section area&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialTwoPortTransport"
>Modelica.Fluid.Interfaces.PartialTwoPortTransport</A>;
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.PartialLumpedFlow"
>Modelica.Fluid.Interfaces.PartialLumpedFlow</A>(
    <font color="blue">final </font>pathLength = 0,
    <font color="blue">final </font>momentumDynamics = Types.Dynamics.SteadyState);

  <font color="blue">parameter </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Loss factor data&quot;</font>;

  <font color="darkgreen">// Advanced</font>
  <font color="darkgreen">/// Other settings than the final values are not yet implemented ///</font>
  <font color="blue">final </font><font color="blue">parameter </font>Boolean from_dp = false <font color="darkgreen">
    &quot;= true, use m_flow = f(dp) else dp = f(m_flow)&quot;</font>;
  <font color="blue">final </font><font color="blue">parameter </font>Boolean use_Re = false <font color="darkgreen">
    &quot;= true, if turbulent region is defined by Re, otherwise by dp_small or m_flow_small&quot;</font>;
  <font color="darkgreen">// End not yet implemented /////////////////////////////////////////</font>
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> dp_small = system.dp_small <font color="darkgreen">
    &quot;Turbulent flow if |dp| &gt;= dp_small&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium.MassFlowRate</A> m_flow_small = system.m_flow_small <font color="darkgreen">
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;</font>;

  <font color="darkgreen">// Diagnostics</font>
  <font color="blue">parameter </font>Boolean show_Re = false <font color="darkgreen">
    &quot;= true, if Reynolds number is included for plotting&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.ReynoldsNumber"
>SI.ReynoldsNumber</A> Re =<font color="red"> Modelica.Fluid.Pipes.BaseClasses.CharacteristicNumbers.ReynoldsNumber_m_flow</font>(
        m_flow,
        <font color="red">noEvent</font>(<font color="blue">if </font>m_flow&gt;0<font color="blue"> then </font><font color="red">Medium.dynamicViscosity</font>(state_a)<font color="blue"> else </font><font color="red">Medium.dynamicViscosity</font>(state_b)),
        data.D_Re) <font color="blue">if </font>show_Re <font color="darkgreen">&quot;Reynolds number at diameter data.D_Re&quot;</font>;
  <font color="blue">parameter </font>Boolean show_totalPressures = false <font color="darkgreen">
    &quot;= true, if total pressures are included for plotting&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> p_total_a = port_a.p + 0.5 * m_flow^2 /((Modelica.Constants.pi/4 * data.diameter_a^2)^2 *<font color="red"> noEvent</font>(<font color="blue">if </font>port_a.m_flow &gt; 0<font color="blue"> then </font><font color="red">Medium.density</font>(state_a)<font color="blue"> else </font><font color="red">Medium.density</font>(state_b))) <font color="blue">if </font>
       show_totalPressures <font color="darkgreen">&quot;Total pressure at port_a&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.AbsolutePressure"
>SI.AbsolutePressure</A> p_total_b = port_b.p + 0.5 * m_flow^2 /((Modelica.Constants.pi/4 * data.diameter_b^2)^2 *<font color="red"> noEvent</font>(<font color="blue">if </font>port_b.m_flow &gt; 0<font color="blue"> then </font><font color="red">Medium.density</font>(state_b)<font color="blue"> else </font><font color="red">Medium.density</font>(state_a))) <font color="blue">if </font>
       show_totalPressures <font color="darkgreen">&quot;Total pressure at port_a&quot;</font>;
  <font color="blue">parameter </font>Boolean show_portVelocities = false <font color="darkgreen">
    &quot;= true, if port velocities are included for plotting&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_a = port_a.m_flow /(Modelica.Constants.pi/4 * data.diameter_a^2 *<font color="red"> noEvent</font>(<font color="blue">if </font>port_a.m_flow &gt; 0<font color="blue"> then </font><font color="red">Medium.density</font>(state_a)<font color="blue"> else </font><font color="red">Medium.density</font>(state_b))) <font color="blue">if </font>
       show_portVelocities <font color="darkgreen">&quot;Fluid velocity into port_a&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Velocity"
>SI.Velocity</A> v_b = port_b.m_flow /(Modelica.Constants.pi/4 * data.diameter_b^2 *<font color="red"> noEvent</font>(<font color="blue">if </font>port_b.m_flow &gt; 0<font color="blue"> then </font><font color="red">Medium.density</font>(state_b)<font color="blue"> else </font><font color="red">Medium.density</font>(state_a))) <font color="blue">if </font>
       show_portVelocities <font color="darkgreen">&quot;Fluid velocity into port_b&quot;</font>;

  <font color="darkgreen">// Variables</font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Modelica.SIunits.Pressure</A> dp_fg <font color="darkgreen">&quot;pressure loss due to friction and gravity&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Modelica.SIunits.Area</A> A_mean = Modelica.Constants.pi/4*(data.diameter_a^2+data.diameter_b^2)/2 <font color="darkgreen">
    &quot;mean cross flow area&quot;</font>;

  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> state_b_des <font color="darkgreen">
    &quot;Thermodynamic state at port b for flow a -&gt; b&quot;</font>;
  <A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ThermodynamicState"
>Medium.ThermodynamicState</A> state_a_nondes <font color="darkgreen">
    &quot;Thermodynamic state at port a for flow a &lt;- b&quot;</font>;

<font color="blue">equation </font>
  Ib_flow = 0;
  F_p = A_mean*(<font color="red">Medium.pressure</font>(state_b) -<font color="red"> Medium.pressure</font>(state_a));
  F_fg = A_mean*dp_fg;
  <font color="blue">if </font>from_dp<font color="blue"> then</font>
     m_flow = <font color="blue">if </font>use_Re<font color="blue"> then </font>
                 <font color="red">massFlowRate_dp_and_Re</font>(
                    dp_fg,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b),
                    <font color="red">Medium.dynamicViscosity</font>(state_a),
                    <font color="red">Medium.dynamicViscosity</font>(state_b),
                    data)<font color="blue"> else </font>
                 <font color="red">massFlowRate_dp</font>(dp_fg,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b), data, dp_small);
  <font color="blue">else</font>
     dp_fg = <font color="blue">if </font>use_Re<font color="blue"> then </font>
             <font color="red">pressureLoss_m_flow_and_Re</font>(
                 m_flow,<font color="red"> Medium.density</font>(state_a),<font color="red"> Medium.density</font>(state_b),
                 <font color="red">Medium.dynamicViscosity</font>(state_a),
                 <font color="red">Medium.dynamicViscosity</font>(state_b),
                 data)<font color="blue"> else </font>
             <font color="red">pressureLoss_m_flow_totalPressure</font>(m_flow,
               <font color="red">Medium.density</font>(state_a),
               <font color="red">Medium.density</font>(state_b_des),
               <font color="red">Medium.density</font>(state_b),
               <font color="red">Medium.density</font>(state_a_nondes),
               data, m_flow_small);
  <font color="blue">end if</font>;

  <font color="darkgreen">// Isenthalpic state transformation (no storage and no loss of energy)</font>
  port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow);
  port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow);

  <font color="darkgreen">// medium states for downstream properties, may want to change this neglecting the only difference from state_a, state_b, which is in pressure</font>
  <font color="darkgreen">// This will remove the extra interation variables</font>
  state_b_des =<font color="red"> Medium.setState_phX</font>(port_b.p,<font color="red"> inStream</font>(port_a.h_outflow),<font color="red"> inStream</font>(port_a.Xi_outflow));
  state_a_nondes =<font color="red"> Medium.setState_phX</font>(port_a.p,<font color="red"> inStream</font>(port_b.h_outflow),<font color="red"> inStream</font>(port_b.Xi_outflow));

<font color="blue">end </font>BaseModelNonconstantCrossSectionArea;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE pressureLoss_m_flow_totalPressure<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressureI.png" ALT="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressure" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.pressureLoss_m_flow_totalPressure"></A><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent"
>Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent</A>.pressureLoss_m_flow_totalPressure</H2>
<B>Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))</B><p>
<P><H3>Information</H3>
<PRE></pre>
<p>
Compute pressure drop from constant loss factor and mass flow rate (dp = f(m_flow)).
For small mass flow rates(|m_flow| &lt; m_flow_small), the characteristic is approximated by
a polynomial in order to have a finite derivative at zero mass flow rate.
</p>
<pre></PRE>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A> (Icon for a function).
<H3>Inputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow</TD><TD>&nbsp;</TD><TD>Mass flow rate from port_a to port_b [kg/s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a_des</TD><TD>&nbsp;</TD><TD>Density at port_a, mass flow in design direction a -&gt; b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b_des</TD><TD>&nbsp;</TD><TD>Density at port_b, mass flow in design direction a -&gt; b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_b_nondes</TD><TD>&nbsp;</TD><TD>Density at port_b, mass flow against design direction a &lt;- b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>Density</A></TD><TD>rho_a_nondes</TD><TD>&nbsp;</TD><TD>Density at port_a, mass flow against design direction a &lt;- b [kg/m3]</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A></TD><TD>data</TD><TD>&nbsp;</TD><TD>Constant loss factors for both flow directions</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_small</TD><TD>0.01</TD><TD>Turbulent flow if |m_flow| &gt;= m_flow_small [kg/s]</TD></TR>
</TABLE>
<H3>Outputs</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>Pressure</A></TD><TD>dp</TD><TD>Pressure drop (dp = port_a.p - port_b.p) [Pa]</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">function</font> pressureLoss_m_flow_totalPressure <font color="darkgreen">
  &quot;Return pressure drop from constant loss factor and mass flow rate (dp = f(m_flow))&quot;</font>
        <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Function"
>Modelica.Icons.Function</A>;

  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow <font color="darkgreen">&quot;Mass flow rate from port_a to port_b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a_des <font color="darkgreen">
    &quot;Density at port_a, mass flow in design direction a -&gt; b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b_des <font color="darkgreen">
    &quot;Density at port_b, mass flow in design direction a -&gt; b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_b_nondes <font color="darkgreen">
    &quot;Density at port_b, mass flow against design direction a &lt;- b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Density"
>SI.Density</A> rho_a_nondes <font color="darkgreen">
    &quot;Density at port_a, mass flow against design direction a &lt;- b&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_Fluid_Fittings_BaseClasses_QuadraticTurbulent.html#Modelica.Fluid.Fittings.BaseClasses.QuadraticTurbulent.LossFactorData"
>LossFactorData</A> data <font color="darkgreen">&quot;Constant loss factors for both flow directions&quot;</font>;
  <font color="blue">input </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.MassFlowRate"
>SI.MassFlowRate</A> m_flow_small = 0.01 <font color="darkgreen">
    &quot;Turbulent flow if |m_flow| &gt;= m_flow_small&quot;</font>;
  <font color="blue">output </font><A HREF="Modelica_SIunits.html#Modelica.SIunits.Pressure"
>SI.Pressure</A> dp <font color="darkgreen">&quot;Pressure drop (dp = port_a.p - port_b.p)&quot;</font>;

<font color="blue">protected </font>
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>SI.Area</A> A_a = Modelica.Constants.pi * data.diameter_a^2/4 <font color="darkgreen">
    &quot;Cross section area at port_a&quot;</font>;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>SI.Area</A> A_b = Modelica.Constants.pi * data.diameter_b^2/4 <font color="darkgreen">
    &quot;Cross section area at port_b&quot;</font>;
<font color="blue">algorithm </font>
    dp := 1/2 * m_flow^2 *( <font color="blue">if </font>m_flow &gt; 0<font color="blue"> then </font>
      data.zeta1/(<font color="blue">if </font>data.zeta1_at_a<font color="blue"> then </font>rho_a_des    * A_a^2<font color="blue"> else </font>   rho_b_des * A_b^2) - 1/(rho_a_des    * A_a^2) + 1/(rho_b_des    * A_b^2)<font color="blue"> else </font>
      -data.zeta2/(<font color="blue">if </font>data.zeta2_at_a<font color="blue"> then </font>rho_a_nondes * A_a^2<font color="blue"> else </font>rho_b_nondes * A_b^2) - 1/(rho_a_nondes * A_a^2) + 1/(rho_b_nondes * A_b^2));
<font color="blue">end </font>pressureLoss_m_flow_totalPressure;
</PRE>
<HR>
<address>HTML-documentation generated by <a href="http://www.Dymola.com/">Dymola</a> Mon Sep  7 10:20:12 2009.
</address></BODY>
</HTML>
