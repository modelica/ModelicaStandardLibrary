<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Pipes</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Devices for conveying fluid&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Pipes<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Pipes"></A><A HREF="Modelica_Fluid.html#Modelica.Fluid"
>Modelica.Fluid</A>.Pipes</H2>
<B>Devices for conveying fluid</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>

<pre></PRE><P>
Extends from <A HREF="Modelica_Icons_VariantsPackage.html#Modelica.Icons.VariantsPackage"
>Modelica.Icons.VariantsPackage</A> (Icon for package containing variants).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.StaticPipeS.png" ALT="Modelica.Fluid.Pipes.StaticPipe" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>StaticPipe</A>
</TD><TD>Basic pipe flow model without storage of mass or energy</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.DynamicPipeS.png" ALT="Modelica.Fluid.Pipes.DynamicPipe" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.DynamicPipe"
>DynamicPipe</A>
</TD><TD>Dynamic pipe model with storage of mass and energy</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Pipes.BaseClassesS.png" ALT="Modelica.Fluid.Pipes.BaseClasses" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses"
>BaseClasses</A>
</TD><TD>Base classes used in the Pipes package (only of interest to build new component models)</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StaticPipe<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Pipes.StaticPipeI.png" ALT="Modelica.Fluid.Pipes.StaticPipe" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Pipes.StaticPipe"></A><A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes"
>Modelica.Fluid.Pipes</A>.StaticPipe</H2>
<B>Basic pipe flow model without storage of mass or energy</B><p>
<IMG SRC="Modelica.Fluid.Pipes.StaticPipeD.png" ALT="Modelica.Fluid.Pipes.StaticPipe">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Model of a straight pipe with constant cross section and with steady-state mass, momentum and energy balances, i.e., the model does not store mass or energy.
There exist two thermodynamic states, one at each fluid port. The momentum balance is formulated for the two states, taking into account
momentum flows, friction and gravity. The same result can be obtained by using <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.DynamicPipe"
>DynamicPipe</a> with
steady-state dynamic settings. The intended use is to provide simple connections of vessels or other devices with storage, as it is done in:
<ul>
<li><A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks.EmptyTanks"
>Examples.Tanks.EmptyTanks</a></li>
<li><A HREF="Modelica_Fluid_Examples.html#Modelica.Fluid.Examples.InverseParameterization"
>Examples.InverseParameterization</a></li>
</ul>

<h4>Numerical Issues</h4>
With the stream connectors the thermodynamic states on the ports are generally defined by models with storage or by sources placed upstream and downstream of the static pipe.
Other non storage components in the flow path may yield to state transformation. Note that this generally leads to nonlinear equation systems if multiple static pipes,
or other flow models without storage, are directly connected.
<br><br><br><br>

</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe"
>Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe</A> (Base class for straight pipe models).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Real</TD><TD>nParallel</TD><TD>1</TD><TD>Number of identical parallel pipes</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>length</TD><TD>&nbsp;</TD><TD>Length [m]</TD></TR>
<TR><TD>Boolean</TD><TD>isCircular</TD><TD>true</TD><TD>= true if cross sectional area is circular</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter</TD><TD>&nbsp;</TD><TD>Diameter of circular pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>crossArea</TD><TD>Modelica.Constants.pi*diamet...</TD><TD>Inner cross section area [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>perimeter</TD><TD>Modelica.Constants.pi*diameter</TD><TD>Inner perimeter [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Height"
>Height</A></TD><TD>roughness</TD><TD>2.5e-5</TD><TD>Average height of surface asperities (default: smooth steel pipe) [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Static head</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>height_ab</TD><TD>0</TD><TD>Height(port_b) - Height(port_a) [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Pressure loss</TD></TR>
<TR><TD colspan="2">replaceable model FlowModel</TD><TD><A HREF="Modelica_Fluid_Pipes_BaseClasses_FlowModels.html#Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow"
>DetailedPipeFlow</A></TD><TD>Wall friction, gravity, momentum flow</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_a_start</TD><TD>system.p_start</TD><TD>Start value of pressure at port a [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_b_start</TD><TD>p_a_start</TD><TD>Start value of pressure at port b [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Start value for mass flow rate [kg/s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> StaticPipe <font color="darkgreen">
  &quot;Basic pipe flow model without storage of mass or energy&quot;</font>

  <font color="darkgreen">// extending PartialStraightPipe</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe"
>Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe</A>;

  <font color="darkgreen">// Initialization</font>
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> p_a_start=system.p_start <font color="darkgreen">
    &quot;Start value of pressure at port a&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>Medium.AbsolutePressure</A> p_b_start=p_a_start <font color="darkgreen">
    &quot;Start value of pressure at port b&quot;</font>;
  <font color="blue">parameter </font><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>Medium.MassFlowRate</A> m_flow_start = system.m_flow_start <font color="darkgreen">
    &quot;Start value for mass flow rate&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe.FlowModel"
>FlowModel</A> flowModel(
          <font color="blue">redeclare </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
          <font color="blue">final </font>n=2,
          states={<font color="red">Medium.setState_phX</font>(port_a.p,<font color="red"> inStream</font>(port_a.h_outflow),<font color="red"> inStream</font>(port_a.Xi_outflow)),
                 <font color="red">Medium.setState_phX</font>(port_b.p,<font color="red"> inStream</font>(port_b.h_outflow),<font color="red"> inStream</font>(port_b.Xi_outflow))},
          vs={port_a.m_flow/<font color="red">Medium.density</font>(flowModel.states[1])/flowModel.crossAreas[1],
              -port_b.m_flow/<font color="red">Medium.density</font>(flowModel.states[2])/flowModel.crossAreas[2]}/nParallel,
          <font color="blue">final </font>momentumDynamics=Types.Dynamics.SteadyState,
          <font color="blue">final </font>allowFlowReversal=allowFlowReversal,
          <font color="blue">final </font>p_a_start=p_a_start,
          <font color="blue">final </font>p_b_start=p_b_start,
          <font color="blue">final </font>m_flow_start=m_flow_start,
          <font color="blue">final </font>nParallel=nParallel,
          <font color="blue">final </font>pathLengths={length},
          <font color="blue">final </font>crossAreas={crossArea, crossArea},
          <font color="blue">final </font>dimensions={4*crossArea/perimeter, 4*crossArea/perimeter},
          <font color="blue">final </font>roughnesses={roughness, roughness},
          <font color="blue">final </font>dheights={height_ab},
          <font color="blue">final </font>g=system.g) <font color="darkgreen">&quot;Flow model&quot;</font>;</textblock>
<font color="blue">equation </font>
  <font color="darkgreen">// Mass balance</font>
  port_a.m_flow = flowModel.m_flows[1];
  0 = port_a.m_flow + port_b.m_flow;
  port_a.Xi_outflow =<font color="red"> inStream</font>(port_b.Xi_outflow);
  port_b.Xi_outflow =<font color="red"> inStream</font>(port_a.Xi_outflow);
  port_a.C_outflow =<font color="red"> inStream</font>(port_b.C_outflow);
  port_b.C_outflow =<font color="red"> inStream</font>(port_a.C_outflow);

  <font color="darkgreen">// Energy balance, considering change of potential energy</font>
  <font color="darkgreen">// Wb_flow = v*A*dpdx + v*F_fric</font>
  <font color="darkgreen">//         = m_flow/d/A * (A*dpdx + A*pressureLoss.dp_fg - F_grav)</font>
  <font color="darkgreen">//         = m_flow/d/A * (-A*g*height_ab*d)</font>
  <font color="darkgreen">//         = -m_flow*g*height_ab</font>
  port_b.h_outflow =<font color="red"> inStream</font>(port_a.h_outflow) - system.g*height_ab;
  port_a.h_outflow =<font color="red"> inStream</font>(port_b.h_outflow) + system.g*height_ab;

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StaticPipe;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE DynamicPipe<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Pipes.DynamicPipeI.png" ALT="Modelica.Fluid.Pipes.DynamicPipe" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Pipes.DynamicPipe"></A><A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes"
>Modelica.Fluid.Pipes</A>.DynamicPipe</H2>
<B>Dynamic pipe model with storage of mass and energy</B><p>
<IMG SRC="Modelica.Fluid.Pipes.DynamicPipeD.png" ALT="Modelica.Fluid.Pipes.DynamicPipe">
<P><H3>Information</H3></P>
<PRE></pre>
<p>Model of a straight pipe with distributed mass, energy and momentum balances.
It provides the complete balance equations for one-dimensional fluid flow as formulated in
<A HREF="Modelica_Fluid_UsersGuide_ComponentDefinition.html#Modelica.Fluid.UsersGuide.ComponentDefinition.BalanceEquations"
>UsersGuide.ComponentDefinition.BalanceEquations</a>.
</p>
<p>
The partial differential equations are treated with the finite volume method and a staggered grid scheme for momentum balances.
The pipe is split into nNodes equally spaced segments along the flow path. The default value is nNodes=2.
This results in two lumped mass and energy balances and one lumped momentum balance across the dynamic pipe.
</p>
<p>
Note that this generally leads to high-index DAEs for pressure states if dynamic pipes are directly connected to each other,
or generally to models with storage exposing a thermodynamic state through the port. This may not be valid
if the dynamic pipe is connected to a model with non-differentiable pressure, like a Sources.Boundary_pT with prescribed jumping pressure.
The <b><code>modelStructure</code></b> can be configured as appropriate in such situations,
in order to place a momentum balance between a pressure state of the pipe and a non-differentiable boundary condition.
</p>
<p>
The default <b><code>modelStructure</code></b> is <code>av_vb</code> (see Advanced tab).
The simplest possible alternative symetric configuration, avoiding potential high-index DAEs at the cost of the potential introduction
of nonlinear equation systems, is obtained with the setting <code>nNodes=1, modelStructure=a_v_b</code>.
Depending on the configured model structure, the first and the last pipe segment,
or the flow path length of the first and the last momentum balance, are of half size.
See the documentation of the base class
<A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow"
>Pipes.BaseClasses.PartialTwoPortFlow</a>,
also covering asymmetric configurations.
</p>
<p>
The <b><code>HeatTransfer</code></b> component specifies the source term <code>Qb_flows</code> of the energy balance.
The default component uses a constant coefficient for the heat transfer between the bulk flow and the segment boundaries exposed through the <code>heatPorts</code>.
The <code>HeatTransfer</code> model is replaceable and can be exchanged with any model extended from
<A HREF="Modelica_Fluid_Pipes_BaseClasses_HeatTransfer.html#Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.PartialFlowHeatTransfer"
>BaseClasses.HeatTransfer.PartialFlowHeatTransfer</a>.
</p>
<p>
The intended use is for complex networks of pipes and other flow devices, like valves. See e.g.
<ul>
<li><A HREF="Modelica_Fluid_Examples.html#Modelica.Fluid.Examples.BranchingDynamicPipes"
>Examples.BranchingDynamicPipes</a>, or </li>
<li><A HREF="Modelica_Fluid_Examples.html#Modelica.Fluid.Examples.IncompressibleFluidNetwork"
>Examples.IncompressibleFluidNetwork</a>.</li>
</ul>
</p>
<pre></PRE><P>
Extends from <A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe"
>Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe</A> (Base class for straight pipe models), <A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow"
>BaseClasses.PartialTwoPortFlow</A> (Base class for distributed flow models).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Real</TD><TD>nParallel</TD><TD>1</TD><TD>Number of identical parallel pipes</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>length</TD><TD>&nbsp;</TD><TD>Length [m]</TD></TR>
<TR><TD>Boolean</TD><TD>isCircular</TD><TD>true</TD><TD>= true if cross sectional area is circular</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Diameter"
>Diameter</A></TD><TD>diameter</TD><TD>&nbsp;</TD><TD>Diameter of circular pipe [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>crossArea</TD><TD>Modelica.Constants.pi*diamet...</TD><TD>Inner cross section area [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>perimeter</TD><TD>Modelica.Constants.pi*diameter</TD><TD>Inner perimeter [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Height"
>Height</A></TD><TD>roughness</TD><TD>2.5e-5</TD><TD>Average height of surface asperities (default: smooth steel pipe) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>lengths[n]</TD><TD>if n == 1 then {length} else...</TD><TD>lengths of flow segments [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Area"
>Area</A></TD><TD>crossAreas[n]</TD><TD>fill(crossArea, n)</TD><TD>cross flow areas of flow segments [m2]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dimensions[n]</TD><TD>fill(4*crossArea/perimeter, n)</TD><TD>hydraulic diameters of flow segments [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Height"
>Height</A></TD><TD>roughnesses[n]</TD><TD>fill(roughness, n)</TD><TD>Average heights of surface asperities [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Static head</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>height_ab</TD><TD>0</TD><TD>Height(port_b) - Height(port_a) [m]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Length"
>Length</A></TD><TD>dheights[n]</TD><TD>height_ab*dxs</TD><TD>Differences in heigths of flow segments [m]</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Pressure loss</TD></TR>
<TR><TD colspan="2">replaceable model FlowModel</TD><TD><A HREF="Modelica_Fluid_Pipes_BaseClasses_FlowModels.html#Modelica.Fluid.Pipes.BaseClasses.FlowModels.DetailedPipeFlow"
>DetailedPipeFlow</A></TD><TD>Wall friction, gravity, momentum flow</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Assumptions</B></TD></TR>
<TR><TD>Boolean</TD><TD>allowFlowReversal</TD><TD>system.allowFlowReversal</TD><TD>= true to allow flow reversal, false restricts to design direction (port_a -&gt; port_b)</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Dynamics</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>energyDynamics</TD><TD>system.energyDynamics</TD><TD>Formulation of energy balances</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>massDynamics</TD><TD>system.massDynamics</TD><TD>Formulation of mass balances</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.Dynamics"
>Dynamics</A></TD><TD>momentumDynamics</TD><TD>system.momentumDynamics</TD><TD>Formulation of momentum balances</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Heat transfer</TD></TR>
<TR><TD>Boolean</TD><TD>use_HeatTransfer</TD><TD>false</TD><TD>= true to use the HeatTransfer model</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Initialization</B></TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_a_start</TD><TD>system.p_start</TD><TD>Start value of pressure at port a [Pa]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.AbsolutePressure"
>AbsolutePressure</A></TD><TD>p_b_start</TD><TD>p_a_start</TD><TD>Start value of pressure at port b [Pa]</TD></TR>
<TR><TD>Boolean</TD><TD>use_T_start</TD><TD>true</TD><TD>Use T_start if true, otherwise h_start</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.Temperature"
>Temperature</A></TD><TD>T_start</TD><TD>if use_T_start then system.T...</TD><TD>Start value of temperature [K]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.SpecificEnthalpy"
>SpecificEnthalpy</A></TD><TD>h_start</TD><TD>if use_T_start then Medium.s...</TD><TD>Start value of specific enthalpy [J/kg]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFraction"
>MassFraction</A></TD><TD>X_start[Medium.nX]</TD><TD>Medium.X_default</TD><TD>Start value of mass fractions m_i/m [kg/kg]</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.ExtraProperty"
>ExtraProperty</A></TD><TD>C_start[Medium.nC]</TD><TD>fill(0, Medium.nC)</TD><TD>Start value of trace substances</TD></TR>
<TR><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium.MassFlowRate"
>MassFlowRate</A></TD><TD>m_flow_start</TD><TD>system.m_flow_start</TD><TD>Start value for mass flow rate [kg/s]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Advanced</B></TD></TR>
<TR><TD>Integer</TD><TD>nNodes</TD><TD>2</TD><TD>Number of discrete flow volumes</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.ModelStructure"
>ModelStructure</A></TD><TD>modelStructure</TD><TD>Types.ModelStructure.av_vb</TD><TD>Determines whether flow or volume models are present at the ports</TD></TR>
<TR><TD>Boolean</TD><TD>useLumpedPressure</TD><TD>false</TD><TD>=true to lump pressure states together</TD></TR>
<TR><TD>Boolean</TD><TD>useInnerPortProperties</TD><TD>false</TD><TD>=true to take port properties for flow models from internal control volumes</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_a"
>FluidPort_a</A></TD><TD>port_a</TD><TD>Fluid connector a (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.FluidPort_b"
>FluidPort_b</A></TD><TD>port_b</TD><TD>Fluid connector b (positive design flow direction is from port_a to port_b)</TD></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a"
>HeatPorts_a</A></TD><TD>heatPorts[nNodes]</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> DynamicPipe <font color="darkgreen">
  &quot;Dynamic pipe model with storage of mass and energy&quot;</font>

  <font color="blue">import </font><A HREF="Modelica_Fluid_Types.html#Modelica.Fluid.Types.ModelStructure"
>Modelica.Fluid.Types.ModelStructure</A>;

  <font color="darkgreen">// extending PartialStraightPipe</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe"
>Modelica.Fluid.Pipes.BaseClasses.PartialStraightPipe</A>(
    <font color="blue">final </font>port_a_exposesState = (modelStructure == ModelStructure.av_b)<font color="blue"> or </font>(modelStructure == ModelStructure.av_vb),
    <font color="blue">final </font>port_b_exposesState = (modelStructure == ModelStructure.a_vb)<font color="blue"> or </font>(modelStructure == ModelStructure.av_vb));

  <font color="darkgreen">// extending PartialTwoPortFlow</font>
  <font color="blue">extends </font><A HREF="Modelica_Fluid_Pipes_BaseClasses.html#Modelica.Fluid.Pipes.BaseClasses.PartialTwoPortFlow"
>BaseClasses.PartialTwoPortFlow</A>(
    <font color="blue">final </font>lengths=<font color="blue">if </font>n == 1<font color="blue"> then </font>
                      {length}<font color="blue"> else </font>
                  <font color="blue">if </font>modelStructure == ModelStructure.av_vb<font color="blue"> then </font>
                      <font color="red">cat</font>(1, {length/(n-1)/2},<font color="red"> fill</font>(length/(n-1), n-2), {length/(n-1)/2})<font color="blue"> else </font>
                  <font color="blue">if </font>modelStructure == ModelStructure.av_b<font color="blue"> then </font>
                      <font color="red">cat</font>(1, {length/n/2},<font color="red"> fill</font>(length*(1-1/n/2)/(n-1), n-1))<font color="blue"> else </font>
                  <font color="blue">if </font>modelStructure == ModelStructure.a_vb<font color="blue"> then </font>
                      <font color="red">cat</font>(1,<font color="red"> fill</font>(length*(1-1/n/2)/(n-1), n-1), {length/n/2})<font color="blue"> else </font>
                      <font color="red">fill</font>(length/n, n),
    <font color="blue">final </font>crossAreas=<font color="red">fill</font>(crossArea, n),
    <font color="blue">final </font>dimensions=<font color="red">fill</font>(4*crossArea/perimeter, n),
    <font color="blue">final </font>roughnesses=<font color="red">fill</font>(roughness, n),
    <font color="blue">final </font>dheights=height_ab*dxs);

  <font color="darkgreen">// Wall heat transfer</font>
  <font color="blue">parameter </font>Boolean use_HeatTransfer = false <font color="darkgreen">
    &quot;= true to use the HeatTransfer model&quot;</font>;
  <font color="blue">replaceable </font><font color="blue">model</font> HeatTransfer =
      <A HREF="Modelica_Fluid_Pipes_BaseClasses_HeatTransfer.html#Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.IdealFlowHeatTransfer"
>Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.IdealFlowHeatTransfer</A>
    <font color="blue">constrainedby </font>
    Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.PartialFlowHeatTransfer <font color="darkgreen">
    &quot;Wall heat transfer&quot;</font>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a"
>Interfaces.HeatPorts_a</A>[nNodes] heatPorts <font color="blue">if </font>use_HeatTransfer;</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.DynamicPipe.HeatTransfer"
>HeatTransfer</A> heatTransfer(
    <font color="blue">redeclare </font><font color="blue">each </font><font color="blue">final </font><font color="blue">package</font> Medium = Medium,
    <font color="blue">final </font>n=n,
    <font color="blue">final </font>nParallel=nParallel,
    <font color="blue">final </font>surfaceAreas=perimeter*lengths,
    <font color="blue">final </font>lengths=lengths,
    <font color="blue">final </font>dimensions=dimensions,
    <font color="blue">final </font>roughnesses=roughnesses,
    <font color="blue">final </font>states=mediums.state,
    <font color="blue">final </font>vs = vs,
    <font color="blue">final </font>use_k = use_HeatTransfer) <font color="darkgreen">&quot;Heat transfer model&quot;</font>;</textblock>
  <font color="blue">final </font><font color="blue">parameter </font>Real[n] dxs = lengths/<font color="red">sum</font>(lengths);
<font color="blue">equation </font>
  Qb_flows = heatTransfer.Q_flows;
  <font color="darkgreen">// Wb_flow = v*A*dpdx + v*F_fric</font>
  <font color="darkgreen">//         = v*A*dpdx + v*A*flowModel.dp_fg - v*A*dp_grav</font>
  <font color="blue">if </font>n == 1<font color="blue"> or </font>useLumpedPressure<font color="blue"> then</font>
    Wb_flows = dxs * ((vs*dxs)*(crossAreas*dxs)*((port_b.p - port_a.p) +<font color="red"> sum</font>(flowModel.dps_fg) - system.g*(dheights*mediums.d)))*nParallel;
  <font color="blue">else</font>
    <font color="blue">if </font>modelStructure == ModelStructure.av_vb<font color="blue"> or </font>modelStructure == ModelStructure.av_b<font color="blue"> then</font>
      Wb_flows[2:n-1] = {vs[i]*crossAreas[i]*((mediums[i+1].p - mediums[i-1].p)/2 + (flowModel.dps_fg[i-1]+flowModel.dps_fg[i])/2 - system.g*dheights[i]*mediums[i].d) <font color="blue">for </font>i<font color="blue"> in </font>2:n-1}*nParallel;
    <font color="blue">else</font>
      Wb_flows[2:n-1] = {vs[i]*crossAreas[i]*((mediums[i+1].p - mediums[i-1].p)/2 + (flowModel.dps_fg[i]+flowModel.dps_fg[i+1])/2 - system.g*dheights[i]*mediums[i].d) <font color="blue">for </font>i<font color="blue"> in </font>2:n-1}*nParallel;
    <font color="blue">end if</font>;
    <font color="blue">if </font>modelStructure == ModelStructure.av_vb<font color="blue"> then</font>
      Wb_flows[1] = vs[1]*crossAreas[1]*((mediums[2].p - mediums[1].p)/2 + flowModel.dps_fg[1]/2 - system.g*dheights[1]*mediums[1].d)*nParallel;
      Wb_flows[n] = vs[n]*crossAreas[n]*((mediums[n].p - mediums[n-1].p)/2 + flowModel.dps_fg[n-1]/2 - system.g*dheights[n]*mediums[n].d)*nParallel;
    <font color="blue">elseif </font>modelStructure == ModelStructure.av_b<font color="blue"> then</font>
      Wb_flows[1] = vs[1]*crossAreas[1]*((mediums[2].p - mediums[1].p)/2 + flowModel.dps_fg[1]/2 - system.g*dheights[1]*mediums[1].d)*nParallel;
      Wb_flows[n] = vs[n]*crossAreas[n]*((port_b.p - mediums[n-1].p)/1.5 + flowModel.dps_fg[n-1]/2+flowModel.dps_fg[n] - system.g*dheights[n]*mediums[n].d)*nParallel;
    <font color="blue">elseif </font>modelStructure == ModelStructure.a_vb<font color="blue"> then</font>
      Wb_flows[1] = vs[1]*crossAreas[1]*((mediums[2].p - port_a.p)/1.5 + flowModel.dps_fg[1]+flowModel.dps_fg[2]/2 - system.g*dheights[1]*mediums[1].d)*nParallel;
      Wb_flows[n] = vs[n]*crossAreas[n]*((mediums[n].p - mediums[n-1].p)/2 + flowModel.dps_fg[n]/2 - system.g*dheights[n]*mediums[n].d)*nParallel;
    <font color="blue">elseif </font>modelStructure == ModelStructure.a_v_b<font color="blue"> then</font>
      Wb_flows[1] = vs[1]*crossAreas[1]*((mediums[2].p - port_a.p)/1.5 + flowModel.dps_fg[1]+flowModel.dps_fg[2]/2 - system.g*dheights[1]*mediums[1].d)*nParallel;
      Wb_flows[n] = vs[n]*crossAreas[n]*((port_b.p - mediums[n-1].p)/1.5 + flowModel.dps_fg[n]/2+flowModel.dps_fg[n+1] - system.g*dheights[n]*mediums[n].d)*nParallel;
    <font color="blue">else</font>
      <font color="red">assert</font>(true, &quot;Unknown model structure&quot;);
    <font color="blue">end if</font>;
  <font color="blue">end if</font>;

<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(heatPorts, heatTransfer.heatPorts);</textblock>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>DynamicPipe;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE HeatTransfer<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Pipes.DynamicPipe.HeatTransferI.png" ALT="Modelica.Fluid.Pipes.DynamicPipe.HeatTransfer" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Pipes.DynamicPipe.HeatTransfer"></A><A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.DynamicPipe"
>Modelica.Fluid.Pipes.DynamicPipe</A>.HeatTransfer</H2>
<B>Wall heat transfer</B><p>
<IMG SRC="Modelica.Fluid.Pipes.DynamicPipe.HeatTransferD.png" ALT="Modelica.Fluid.Pipes.DynamicPipe.HeatTransfer">
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Ambient</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.CoefficientOfHeatTransfer"
>CoefficientOfHeatTransfer</A></TD><TD>k</TD><TD>0</TD><TD>Heat transfer coefficient to ambient [W/(m2.K)]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Temperature"
>Temperature</A></TD><TD>T_ambient</TD><TD>system.T_ambient</TD><TD>Ambient temperature [K]</TD></TR>
<TR bgcolor="#c0c0c0"><TD colspan=4><B>Internal Interface</B></TD></TR>
<TR><TD colspan="2">replaceable package Medium</TD><TD><A HREF="Modelica_Media_Interfaces_PartialMedium.html#Modelica.Media.Interfaces.PartialMedium"
>PartialMedium</A></TD><TD>Medium in the component</TD></TR>
<TR><TD>Integer</TD><TD>n</TD><TD>1</TD><TD>Number of heat transfer segments</TD></TR>
<TR><TD>Boolean</TD><TD>use_k</TD><TD>false</TD><TD>= true to use k value for thermal isolation</TD></TR>
<TR bgcolor="#e0e0e0"><TD colspan=4>Geometry</TD></TR>
<TR><TD>Real</TD><TD>nParallel</TD><TD>&nbsp;</TD><TD>number of identical parallel flow devices</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_Fluid_Interfaces.html#Modelica.Fluid.Interfaces.HeatPorts_a"
>HeatPorts_a</A></TD><TD>heatPorts[n]</TD><TD>Heat port to component boundary</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">replaceable </font><font color="blue">model</font> HeatTransfer =
    <A HREF="Modelica_Fluid_Pipes_BaseClasses_HeatTransfer.html#Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.IdealFlowHeatTransfer"
>Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.IdealFlowHeatTransfer</A>
  <font color="blue">constrainedby </font>
  Modelica.Fluid.Pipes.BaseClasses.HeatTransfer.PartialFlowHeatTransfer <font color="darkgreen">
  &quot;Wall heat transfer&quot;</font>;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:31:13 2010.
</address></BODY>
</HTML>
