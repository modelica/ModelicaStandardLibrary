<HTML>
<HEAD>
<TITLE>Modelica.Fluid.Examples.Tanks</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library demonstrating the usage of the tank model&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Tanks<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Fluid.Examples.Tanks"></A><A HREF="Modelica_Fluid_Examples.html#Modelica.Fluid.Examples"
>Modelica.Fluid.Examples</A>.Tanks</H2>
<B>Library demonstrating the usage of the tank model</B>
<P>
<P><H3>Information</H3></P>
Extends from <A HREF="Modelica_Icons_ExamplesPackage.html#Modelica.Icons.ExamplesPackage"
>Modelica.Icons.ExamplesPackage</A> (Icon for packages containing runnable examples).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksS.png" ALT="Modelica.Fluid.Examples.Tanks.ThreeTanks" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks.ThreeTanks"
>ThreeTanks</A>
</TD><TD>Demonstrating the usage of SimpleTank</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksS.png" ALT="Modelica.Fluid.Examples.Tanks.TanksWithOverflow" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks.TanksWithOverflow"
>TanksWithOverflow</A>
</TD><TD>Two tanks connected with pipes at different heights</TD></TR>
<TR><TD><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksS.png" ALT="Modelica.Fluid.Examples.Tanks.EmptyTanks" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks.EmptyTanks"
>EmptyTanks</A>
</TD><TD>Show the treatment of empty tanks</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ThreeTanks<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksI.png" ALT="Modelica.Fluid.Examples.Tanks.ThreeTanks" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Examples.Tanks.ThreeTanks"></A><A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks"
>Modelica.Fluid.Examples.Tanks</A>.ThreeTanks</H2>
<B>Demonstrating the usage of SimpleTank</B><p>
<IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksD.png" ALT="Modelica.Fluid.Examples.Tanks.ThreeTanks">
<P><H3>Information</H3></P>
<PRE></pre>

<img src="../Resources/Images/Fluid/Examples/ThreeTanks.png" border="1">
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> ThreeTanks <font color="darkgreen">&quot;Demonstrating the usage of SimpleTank&quot;</font>
  <font color="blue">import </font><A HREF="Modelica_Fluid.html#Modelica.Fluid"
>Modelica.Fluid</A>;
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  <font color="darkgreen"> // replaceable package Medium = Modelica.Fluid.Media.Water.ConstantPropertyLiquidWater extends</font>
  <font color="darkgreen">// replaceable package Medium = Modelica.Media.Water.StandardWaterOnePhase extends</font>
  <font color="darkgreen">// replaceable package Medium = Modelica.Media.Incompressible.Examples.Glycol47 extends</font>
   <font color="blue">replaceable </font><font color="blue">package</font> Medium =
      <A HREF="Modelica_Media_Water_ConstantPropertyLiquidWater.html#Modelica.Media.Water.ConstantPropertyLiquidWater"
>Modelica.Media.Water.ConstantPropertyLiquidWater</A>                           <font color="blue">constrainedby </font>
    Modelica.Media.Interfaces.PartialMedium <font color="darkgreen">&quot;Medium in the component&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> tank1(
    crossArea=1,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    use_portsData=true,
    height=12,
    level_start=8,
    nPorts=1,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1)});
  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> tank2(
    crossArea=1,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    use_portsData=true,
    height=12,
    level_start=3,
    nPorts=1,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1)});</textblock>

<textblock type="annotcomp" expanded="false">  <font color="blue">inner </font><A HREF="Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</A> system(energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial);
  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> tank3(
    crossArea=1,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Medium,
    use_portsData=true,
    height=12,
    level_start=3,
    nPorts=1,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1)});
  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> pipe1(                    <font color="blue">redeclare </font><font color="blue">package</font>
      Medium =                                                                       Medium,
    allowFlowReversal=true,
    height_ab=2,
    length=2,
    diameter=0.1);
  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> pipe2(                    <font color="blue">redeclare </font><font color="blue">package</font>
      Medium =                                                                       Medium,
    allowFlowReversal=true,
    height_ab=2,
    length=2,
    diameter=0.1);
  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> pipe3(                    <font color="blue">redeclare </font><font color="blue">package</font>
      Medium =                                                                       Medium,
    allowFlowReversal=true,
    height_ab=-1,
    length=2,
    diameter=0.1);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(pipe1.port_a, pipe2.port_a);
  <font color="red">connect</font>(pipe2.port_a, pipe3.port_a);
  <font color="red">connect</font>(pipe3.port_b, tank3.ports[1]);
  <font color="red">connect</font>(pipe1.port_b, tank1.ports[1]);
  <font color="red">connect</font>(pipe2.port_b, tank2.ports[1]);</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ThreeTanks;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TanksWithOverflow<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksI.png" ALT="Modelica.Fluid.Examples.Tanks.TanksWithOverflow" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Examples.Tanks.TanksWithOverflow"></A><A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks"
>Modelica.Fluid.Examples.Tanks</A>.TanksWithOverflow</H2>
<B>Two tanks connected with pipes at different heights</B><p>
<IMG SRC="Modelica.Fluid.Examples.Tanks.TanksWithOverflowD.png" ALT="Modelica.Fluid.Examples.Tanks.TanksWithOverflow">
<P><H3>Information</H3></P>
<PRE></pre>
<p align=justify>The mass flow rate to the upper tank is controlled by the static pressure at its bottom.
The fluid flows through a pipe and forced by different heights from the upper tank to the lower tank.
</p>
<p>
Additional fluid flows through an overflow pipe if the level of the upper tank exceeds 10m.
Initially the overflow enters the lower tank above its fluid level; later on the fluid level exceeds the overflow port.
</p>
<p>
Note that the number of solver intervals has been increased, accounting for the long simulation time horizon.
Otherwise the simulation may fail due to too large steps subject to events. Alternatively the
simulation accuracy could be increased in order to avoid errors.
</p>

<img src="../Resources/Images/Fluid/Examples/TanksWithOverflow.png" border="1">
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> TanksWithOverflow <font color="darkgreen">
  &quot;Two tanks connected with pipes at different heights&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
  <font color="blue">import </font><A HREF="Modelica_Fluid.html#Modelica.Fluid"
>Modelica.Fluid</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> upperTank(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Modelica.Media.Water.StandardWater,
    height=20,
    level_start=2,
    crossArea=0.2,
    nPorts=3,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=0.1),
        <font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=0.1),
        <font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=0.1, height=
         10)});
  <A HREF="Modelica_Fluid_Sources.html#Modelica.Fluid.Sources.MassFlowSource_T"
>Modelica.Fluid.Sources.MassFlowSource_T</A> massFlowRate(nPorts=1,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Modelica.Media.Water.StandardWater,
    m_flow=0.2,
    use_m_flow_in=true);
  <font color="blue">inner </font><A HREF="Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</A> system(energyDynamics=Modelica.Fluid.Types.Dynamics.FixedInitial);
  <A HREF="Modelica_Fluid_Sensors.html#Modelica.Fluid.Sensors.Pressure"
>Modelica.Fluid.Sensors.Pressure</A> pressure(<font color="blue">redeclare </font><font color="blue">package</font> Medium =
        Modelica.Media.Water.StandardWater);
  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> pipe(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Modelica.Media.Water.StandardWater,
    diameter=0.02,
    height_ab=-20,
    length=200);</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> lowerTank(
    height=20,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Modelica.Media.Water.StandardWater,
    level_start=2,
    crossArea=1,
    nPorts=2,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1),<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=0.1,
        height=10)});
  <A HREF="Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Hysteresis"
>Modelica.Blocks.Logical.Hysteresis</A> hysteresis(
    uLow=1.1e5,
    uHigh=2.5e5,
    pre_y_start=true) <font color="darkgreen">&quot;mass flow rate signal by pressure control&quot;</font>;
  <A HREF="Modelica_Blocks_Logical.html#Modelica.Blocks.Logical.Switch"
>Modelica.Blocks.Logical.Switch</A> switch1;
  <A HREF="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> m_flow_off(k=0);
  <A HREF="Modelica_Blocks_Sources.html#Modelica.Blocks.Sources.Constant"
>Modelica.Blocks.Sources.Constant</A> m_flow_on(k=2);
  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> overflow(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium = Modelica.Media.Water.StandardWater,
    diameter=0.02,
    length=200,
    height_ab=-20);</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(massFlowRate.ports[1], upperTank.ports[1]);
  <font color="red">connect</font>(pressure.p, hysteresis.u);
  <font color="red">connect</font>(hysteresis.y, switch1.u2);
  <font color="red">connect</font>(m_flow_off.y, switch1.u1);
  <font color="red">connect</font>(m_flow_on.y, switch1.u3);
  <font color="red">connect</font>(switch1.y, massFlowRate.m_flow_in);
  <font color="red">connect</font>(upperTank.ports[2], pipe.port_a);
  <font color="red">connect</font>(pipe.port_a, pressure.port);
  <font color="red">connect</font>(pipe.port_b, lowerTank.ports[1]);
  <font color="red">connect</font>(upperTank.ports[3], overflow.port_a);
  <font color="red">connect</font>(overflow.port_b, lowerTank.ports[2]);</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TanksWithOverflow;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE EmptyTanks<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Fluid.Examples.Tanks.ThreeTanksI.png" ALT="Modelica.Fluid.Examples.Tanks.EmptyTanks" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Fluid.Examples.Tanks.EmptyTanks"></A><A HREF="Modelica_Fluid_Examples_Tanks.html#Modelica.Fluid.Examples.Tanks"
>Modelica.Fluid.Examples.Tanks</A>.EmptyTanks</H2>
<B>Show the treatment of empty tanks</B><p>
<IMG SRC="Modelica.Fluid.Examples.Tanks.EmptyTanksD.png" ALT="Modelica.Fluid.Examples.Tanks.EmptyTanks">
<P><H3>Information</H3></P>
<PRE></pre>
<img src="../Resources/Images/Fluid/Examples/EmptyTanks.png" border="1">
<pre></PRE><P>
Extends from <A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A> (Icon for runnable examples).
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">model</font> EmptyTanks <font color="darkgreen">&quot;Show the treatment of empty tanks&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Icons.html#Modelica.Icons.Example"
>Modelica.Icons.Example</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> tank1(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Modelica_Media_Water_ConstantPropertyLiquidWater.html#Modelica.Media.Water.ConstantPropertyLiquidWater"
>Modelica.Media.Water.ConstantPropertyLiquidWater</A>,
    nPorts=1,
    crossArea=1,
    level_start=1,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1)},
    height=1.1);</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Pipes.html#Modelica.Fluid.Pipes.StaticPipe"
>Modelica.Fluid.Pipes.StaticPipe</A> pipe(
    <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Modelica_Media_Water_ConstantPropertyLiquidWater.html#Modelica.Media.Water.ConstantPropertyLiquidWater"
>Modelica.Media.Water.ConstantPropertyLiquidWater</A>,
    length=1,
    diameter=0.1,
    height_ab=-1);</textblock>

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Fluid_Vessels.html#Modelica.Fluid.Vessels.OpenTank"
>Modelica.Fluid.Vessels.OpenTank</A> tank2(
    crossArea=1,
    <font color="blue">redeclare </font><font color="blue">package</font> Medium =
        <A HREF="Modelica_Media_Water_ConstantPropertyLiquidWater.html#Modelica.Media.Water.ConstantPropertyLiquidWater"
>Modelica.Media.Water.ConstantPropertyLiquidWater</A>,
    nPorts=1,
    height=1.1,
    portsData={<font color="red">Modelica.Fluid.Vessels.BaseClasses.VesselPortsData</font>(diameter=
        0.1, height=0.5)},
    level_start=0);
  <font color="blue">inner </font><A HREF="Modelica_Fluid.html#Modelica.Fluid.System"
>Modelica.Fluid.System</A> system;</textblock>
<font color="blue">equation </font>
<textblock type="annotconnect" expanded="false">  <font color="red">connect</font>(tank1.ports[1], pipe.port_a);
  <font color="red">connect</font>(pipe.port_b, tank2.ports[1]);</textblock>

<textblock type="annotcomp" expanded="false"><font color="blue">end </font>EmptyTanks;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:30:56 2010.
</address></BODY>
</HTML>
