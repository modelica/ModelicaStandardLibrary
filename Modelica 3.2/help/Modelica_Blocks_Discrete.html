<HTML>
<HEAD>
<TITLE>Modelica.Blocks.Discrete</TITLE>
<META name="HTML-Generator" content="Dymola">
<META name="description" content="&quot;Library of discrete input/output blocks with fixed sample period&quot;">
<style type="text/css">
*       { font-size: 10pt; font-family: Arial,sans-serif; }
pre     { font-size:  9pt; font-family: Courier,monospace;}
h4      { font-size: 10pt; font-weight: bold; color: green; }
h3      { font-size: 11pt; font-weight: bold; color: green; }
h2      { font-size: 13pt; font-weight: bold; color: green; }
address {                  font-weight: normal}
td      { solid #000; vertical-align:top; }
th      { solid #000; vertical-align:top; font-weight: bold; }
table   { solid #000; border-collapse: collapse;}
</style>
</HEAD>
<BODY><P>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Discrete<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><A NAME="Modelica.Blocks.Discrete"></A><A HREF="Modelica_Blocks.html#Modelica.Blocks"
>Modelica.Blocks</A>.Discrete</H2>
<B>Library of discrete input/output blocks with fixed sample period</B>
<P>
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This package contains <b>discrete control blocks</b>
with <b>fixed sample period</b>.
Every component of this package is structured in the following way:
</p>
<ol>
<li> A component has <b>continuous real</b> input and output signals.</li>
<li> The <b>input</b> signals are <b>sampled</b> by the given sample period
     defined via parameter <b>samplePeriod</b>.
     The first sample instant is defined by parameter <b>startTime</b>.
<li> The <b>output</b> signals are computed from the sampled input signals.
</ol>
<p>
A <b>sampled data system</b> may consist of components of package <b>Discrete</b>
and of every other purely <b>algebraic</b> input/output block, such
as the components of packages <b>Modelica.Blocks.Math</b>,
<b>Modelica.Blocks.Nonlinear</b> or <b>Modelica.Blocks.Sources</b>.
</p>

<pre>
</PRE><P>
Extends from <A HREF="Modelica_Icons_Package.html#Modelica.Icons.Package"
>Modelica.Icons.Package</A> (Icon for standard packages).
<P><H3>Package Content</H3><p>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2 >
<TR><TH >Name</TH><TH>Description</TH></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.SamplerS.png" ALT="Modelica.Blocks.Discrete.Sampler" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.Sampler"
>Sampler</A>
</TD><TD>Ideal sampling of continuous signals</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.ZeroOrderHoldS.png" ALT="Modelica.Blocks.Discrete.ZeroOrderHold" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.ZeroOrderHold"
>ZeroOrderHold</A>
</TD><TD>Zero order hold of a sampled-data system</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.FirstOrderHoldS.png" ALT="Modelica.Blocks.Discrete.FirstOrderHold" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.FirstOrderHold"
>FirstOrderHold</A>
</TD><TD>First order hold of a sampled-data system</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.UnitDelayS.png" ALT="Modelica.Blocks.Discrete.UnitDelay" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.UnitDelay"
>UnitDelay</A>
</TD><TD>Unit Delay Block</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.TransferFunctionS.png" ALT="Modelica.Blocks.Discrete.TransferFunction" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.TransferFunction"
>TransferFunction</A>
</TD><TD>Discrete Transfer Function block</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.StateSpaceS.png" ALT="Modelica.Blocks.Discrete.StateSpace" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.StateSpace"
>StateSpace</A>
</TD><TD>Discrete State Space block</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.TriggeredSamplerS.png" ALT="Modelica.Blocks.Discrete.TriggeredSampler" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.TriggeredSampler"
>TriggeredSampler</A>
</TD><TD>Triggered sampling of continuous signals</TD></TR>
<TR><TD><IMG SRC="Modelica.Blocks.Discrete.TriggeredSamplerS.png" ALT="Modelica.Blocks.Discrete.TriggeredMax" WIDTH=20  HEIGHT=20 ALIGN = TOP >&nbsp;<A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete.TriggeredMax"
>TriggeredMax</A>
</TD><TD>Compute maximum, absolute value of continuous signal at trigger instants</TD></TR>
</TABLE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE Sampler<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.SamplerI.png" ALT="Modelica.Blocks.Discrete.Sampler" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.Sampler"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.Sampler</H2>
<B>Ideal sampling of continuous signals</B><p>
<IMG SRC="Modelica.Blocks.Discrete.SamplerD.png" ALT="Modelica.Blocks.Discrete.Sampler">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Samples the continues input signal with a sampling rate defined
via parameter <b>samplePeriod</b>.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A> (Single Input Single Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Continuous input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Continuous output signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> Sampler <font color="darkgreen">&quot;Ideal sampling of continuous signals&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;

<font color="blue">equation </font>
  <font color="blue">when </font>{sampleTrigger,<font color="red"> initial</font>()}<font color="blue"> then</font>
    y = u;
  <font color="blue">end when</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>Sampler;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE ZeroOrderHold<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.ZeroOrderHoldI.png" ALT="Modelica.Blocks.Discrete.ZeroOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.ZeroOrderHold"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.ZeroOrderHold</H2>
<B>Zero order hold of a sampled-data system</B><p>
<IMG SRC="Modelica.Blocks.Discrete.ZeroOrderHoldD.png" ALT="Modelica.Blocks.Discrete.ZeroOrderHold">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The output is identical to the sampled input signal at sample
time instants and holds the output at the value of the last
sample instant during the sample points.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A> (Single Input Single Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Continuous input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Continuous output signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> ZeroOrderHold <font color="darkgreen">&quot;Zero order hold of a sampled-data system&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;
  <font color="blue">output </font>Real ySample(start=0, fixed=true);

<font color="blue">equation </font>
  <font color="blue">when </font>{sampleTrigger,<font color="red"> initial</font>()}<font color="blue"> then</font>
    ySample = u;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Define y=ySample with an infinitesimal delay to break potential
       algebraic loops if both the continuous and the discrete part have
       direct feedthrough
    */</font>
  y =<font color="red"> pre</font>(ySample);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>ZeroOrderHold;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE FirstOrderHold<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.FirstOrderHoldI.png" ALT="Modelica.Blocks.Discrete.FirstOrderHold" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.FirstOrderHold"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.FirstOrderHold</H2>
<B>First order hold of a sampled-data system</B><p>
<IMG SRC="Modelica.Blocks.Discrete.ZeroOrderHoldD.png" ALT="Modelica.Blocks.Discrete.FirstOrderHold">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The output signal is the extrapolation through the
values of the last two sampled input signals.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A> (Single Input Single Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Continuous input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Continuous output signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> FirstOrderHold <font color="darkgreen">&quot;First order hold of a sampled-data system&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;
<font color="blue">protected </font>
  Real ySample;
  <A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Modelica.SIunits.Time</A> tSample;
  Real c;

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    ySample = u;
    tSample = time;
    c = <font color="blue">if </font>firstTrigger<font color="blue"> then </font>0<font color="blue"> else </font>(ySample -<font color="red"> pre</font>(ySample))/samplePeriod;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* Use pre(ySample) and pre(c) to break potential algebraic loops by an
       infinitesimal delay if both the continuous and the discrete part
       have direct feedthrough.
    */</font>
  y =<font color="red"> pre</font>(ySample) +<font color="red"> pre</font>(c)*(time - tSample);
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>FirstOrderHold;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE UnitDelay<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.UnitDelayI.png" ALT="Modelica.Blocks.Discrete.UnitDelay" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.UnitDelay"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.UnitDelay</H2>
<B>Unit Delay Block</B><p>
<IMG SRC="Modelica.Blocks.Discrete.UnitDelayD.png" ALT="Modelica.Blocks.Discrete.UnitDelay">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
This block describes a unit delay:
</p>
<pre>
          1
     y = --- * u
          z
</pre>
<p>
that is, the output signal y is the input signal u of the
previous sample instant. Before the second sample instant,
the output y is identical to parameter yStart.
</p>

<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A> (Single Input Single Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y_start</TD><TD>0</TD><TD>Initial value of output signal</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Continuous input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Continuous output signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> UnitDelay <font color="darkgreen">&quot;Unit Delay Block&quot;</font>
  <font color="blue">parameter </font>Real y_start=0 <font color="darkgreen">&quot;Initial value of output signal&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    y =<font color="red"> pre</font>(u);
  <font color="blue">end when</font>;

<font color="blue">initial </font><font color="blue">equation </font>
    y = y_start;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>UnitDelay;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TransferFunction<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.TransferFunctionI.png" ALT="Modelica.Blocks.Discrete.TransferFunction" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.TransferFunction"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.TransferFunction</H2>
<B>Discrete Transfer Function block</B><p>
<IMG SRC="Modelica.Blocks.Discrete.TransferFunctionD.png" ALT="Modelica.Blocks.Discrete.TransferFunction">
<P><H3>Information</H3></P>
<PRE></pre>
<p>The <b>discrete transfer function</b> block defines the
transfer function between the input signal u and the output
signal y. The numerator has the order nb-1, the denominator
has the order na-1.</p>
<pre>          b(1)*z^(nb-1) + b(2)*z^(nb-2) + ... + b(nb)
   y(z) = -------------------------------------------- * u(z)
          a(1)*z^(na-1) + a(2)*z^(na-2) + ... + a(na)
</pre>
<p>State variables <b>x</b> are defined according to
<b>controller canonical</b> form. Initial values of the
states can be set as start values of <b>x</b>.<p>
<p>Example:</p>
<pre>     Blocks.Discrete.TransferFunction g(b = {2,4}, a = {1,3});
</pre>
<p>results in the following transfer function:</p>
<pre>        2*z + 4
   y = --------- * u
         z + 3
</pre>

<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A> (Single Input Single Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>b[:]</TD><TD>{1}</TD><TD>Numerator coefficients of transfer function.</TD></TR>
<TR><TD>Real</TD><TD>a[:]</TD><TD>&nbsp;</TD><TD>Denominator coefficients of transfer function.</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Continuous input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Continuous output signal</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TransferFunction <font color="darkgreen">&quot;Discrete Transfer Function block&quot;</font>
  <font color="blue">parameter </font>Real b[:]={1} <font color="darkgreen">&quot;Numerator coefficients of transfer function.&quot;</font>;
  <font color="blue">parameter </font>Real a[:] <font color="darkgreen">&quot;Denominator coefficients of transfer function.&quot;</font>;
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteSISO"
>Interfaces.DiscreteSISO</A>;
  <font color="blue">output </font>Real x[<font color="red">size</font>(a, 1) - 1](<font color="blue">each </font>start=0, <font color="blue">each </font>fixed=true) <font color="darkgreen">
    &quot;State of transfer function from controller canonical form&quot;</font>;
<font color="blue">protected </font>
  <font color="blue">parameter </font>Integer nb=<font color="red">size</font>(b, 1) <font color="darkgreen">&quot;Size of Numerator of transfer function&quot;</font>;
  <font color="blue">parameter </font>Integer na=<font color="red">size</font>(a, 1) <font color="darkgreen">&quot;Size of Denominator of transfer function&quot;</font>;
  Real x1;
  Real xext[<font color="red">size</font>(a, 1)];

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    <font color="darkgreen">/* State variables x are defined according to
       controller canonical form. */</font>
    x1 = (u - a[2:<font color="red">size</font>(a, 1)]*<font color="red">pre</font>(x))/a[1];
    xext =<font color="red"> vector</font>([x1;<font color="red"> pre</font>(x)]);
    x = xext[1:<font color="red">size</font>(x, 1)];
    y =<font color="red"> vector</font>([<font color="red">zeros</font>(na - nb, 1); b])*xext;
  <font color="blue">end when</font>;
  <font color="darkgreen">/* This is a non-sampled equation and above there are two separate
       when-clauses. This breaks feeback loops without direct terms,
       since in that case y will be independent of x1 (and only dependent
       on pre(x)).
    */</font>
  <font color="darkgreen">/* Corresponding (simpler) version using when-semantics of Modelica 1.3:
   equation
     when sampleTrigger then
      [x; xn] = [x1; pre(x)];
      [u] = transpose([a])*[x1; pre(x)];
      [y] = transpose([zeros(na - nb, 1); b])*[x1; pre(x)];
     end when;
*/</font>
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TransferFunction;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE StateSpace<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.StateSpaceI.png" ALT="Modelica.Blocks.Discrete.StateSpace" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.StateSpace"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.StateSpace</H2>
<B>Discrete State Space block</B><p>
<IMG SRC="Modelica.Blocks.Discrete.StateSpaceD.png" ALT="Modelica.Blocks.Discrete.StateSpace">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
The <b>discrete state space</b> block defines the relation
between the input u=inPort.signal and the output
y=outPort.signal in state space form:
</p>
<pre>
    x = A * pre(x) + B * u
    y = C * pre(x) + D * u
</pre>
<p>
where pre(x) is the value of the discrete state x at
the previous sample time instant.
The input is a vector of length nu, the output is a vector
of length ny and nx is the number of states. Accordingly
</p>
<pre>
        A has the dimension: A(nx,nx),
        B has the dimension: B(nx,nu),
        C has the dimension: C(ny,nx),
        D has the dimension: D(ny,nu)
</pre>
<p>
Example:
</p>
<pre>
     parameter: A = [0.12, 2;3, 1.5]
     parameter: B = [2, 7;3, 1]
     parameter: C = [0.1, 2]
     parameter: D = zeros(ny,nu)

results in the following equations:
  [x[1]]   [0.12  2.00] [pre(x[1])]   [2.0  7.0] [u[1]]
  [    ] = [          ]*[         ] + [        ]*[    ]
  [x[2]]   [3.00  1.50] [pre(x[2])]   [0.1  2.0] [u[2]]
                             [pre(x[1])]            [u[1]]
       y[1]   = [0.1  2.0] * [         ] + [0  0] * [    ]
                             [pre(x[2])]            [u[2]]
</pre>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteMIMO"
>Interfaces.DiscreteMIMO</A> (Multiple Input Multiple Output discrete control block).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>A[:, size(A, 1)]</TD><TD>&nbsp;</TD><TD>Matrix A of state space model</TD></TR>
<TR><TD>Real</TD><TD>B[size(A, 1), :]</TD><TD>&nbsp;</TD><TD>Matrix B of state space model</TD></TR>
<TR><TD>Real</TD><TD>C[:, size(A, 1)]</TD><TD>&nbsp;</TD><TD>Matrix C of state space model</TD></TR>
<TR><TD>Real</TD><TD>D[size(C, 1), size(B, 2)]</TD><TD>zeros(size(C, 1), size(B, 2))</TD><TD>Matrix D of state space model</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>samplePeriod</TD><TD>&nbsp;</TD><TD>Sample period of component [s]</TD></TR>
<TR><TD><A HREF="Modelica_SIunits.html#Modelica.SIunits.Time"
>Time</A></TD><TD>startTime</TD><TD>0</TD><TD>First sample time instant [s]</TD></TR>
<TR><TD>Integer</TD><TD>nin</TD><TD>size(B, 2)</TD><TD>Number of inputs</TD></TR>
<TR><TD>Integer</TD><TD>nout</TD><TD>size(C, 1)</TD><TD>Number of outputs</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u[nin]</TD><TD>Continuous input signals</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y[nout]</TD><TD>Continuous output signals</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> StateSpace <font color="darkgreen">&quot;Discrete State Space block&quot;</font>
  <font color="blue">parameter </font>Real A[:,<font color="red"> size</font>(A, 1)] <font color="darkgreen">&quot;Matrix A of state space model&quot;</font>;
  <font color="blue">parameter </font>Real B[<font color="red">size</font>(A, 1), :] <font color="darkgreen">&quot;Matrix B of state space model&quot;</font>;
  <font color="blue">parameter </font>Real C[:,<font color="red"> size</font>(A, 1)] <font color="darkgreen">&quot;Matrix C of state space model&quot;</font>;
  <font color="blue">parameter </font>Real D[<font color="red">size</font>(C, 1),<font color="red"> size</font>(B, 2)]=<font color="red">zeros</font>(<font color="red">size</font>(C, 1),<font color="red"> size</font>(B, 2)) <font color="darkgreen">
    &quot;Matrix D of state space model&quot;</font>;

  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteMIMO"
>Interfaces.DiscreteMIMO</A>(<font color="blue">final </font>nin=<font color="red">size</font>(B, 2), <font color="blue">final </font>nout=<font color="red">size</font>(C, 1));
  <font color="blue">output </font>Real x[<font color="red">size</font>(A, 1)] <font color="darkgreen">&quot;State vector&quot;</font>;

<font color="blue">equation </font>
  <font color="blue">when </font>sampleTrigger<font color="blue"> then</font>
    x = A*<font color="red">pre</font>(x) + B*u;
    y = C*<font color="red">pre</font>(x) + D*u;
  <font color="blue">end when</font>;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>StateSpace;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TriggeredSampler<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.TriggeredSamplerI.png" ALT="Modelica.Blocks.Discrete.TriggeredSampler" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.TriggeredSampler"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.TriggeredSampler</H2>
<B>Triggered sampling of continuous signals</B><p>
<IMG SRC="Modelica.Blocks.Discrete.TriggeredSamplerD.png" ALT="Modelica.Blocks.Discrete.TriggeredSampler">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Samples the continuous input signal whenever the trigger input
signal is rising (i.e., trigger changes from <b>false</b> to
<b>true</b>) and provides the sampled input signal as output.
Before the first sampling, the output signal is equal to
the initial value defined via parameter <b>y0</b>.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A> (Graphical layout of discrete block component icon).
<P><H3>Parameters</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Default</TH><TH>Description</TH></TR>
<TR><TD>Real</TD><TD>y_start</TD><TD>0</TD><TD>initial value of output signal</TD></TR>
</TABLE>
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Connector with a Real input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Connector with a Real output signal</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>trigger</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TriggeredSampler <font color="darkgreen">&quot;Triggered sampling of continuous signals&quot;</font>
  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A>;
  <font color="blue">parameter </font>Real y_start=0 <font color="darkgreen">&quot;initial value of output signal&quot;</font>;

<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> u <font color="darkgreen">&quot;Connector with a Real input signal&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> y <font color="darkgreen">&quot;Connector with a Real output signal&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> trigger;</textblock>
<font color="blue">equation </font>
  <font color="blue">when </font>trigger<font color="blue"> then</font>
    y = u;
  <font color="blue">end when</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  y = y_start;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TriggeredSampler;
</PRE>
<HR>
<!--[if supportFields]><span style='mso-element:field-begin'></span>
<span style='mso-spacerun:yes'></span>XE TriggeredMax<![endif]-->
<!--[if supportFields]><span style='mso-element:field-end'></span><![endif]-->
<H2><IMG SRC="Modelica.Blocks.Discrete.TriggeredMaxI.png" ALT="Modelica.Blocks.Discrete.TriggeredMax" ALIGN=RIGHT BORDER=1 WIDTH=80  HEIGHT=80 >
<A NAME="Modelica.Blocks.Discrete.TriggeredMax"></A><A HREF="Modelica_Blocks_Discrete.html#Modelica.Blocks.Discrete"
>Modelica.Blocks.Discrete</A>.TriggeredMax</H2>
<B>Compute maximum, absolute value of continuous signal at trigger instants</B><p>
<IMG SRC="Modelica.Blocks.Discrete.TriggeredSamplerD.png" ALT="Modelica.Blocks.Discrete.TriggeredMax">
<P><H3>Information</H3></P>
<PRE></pre>
<p>
Samples the continuous input signal whenever the trigger input
signal is rising (i.e., trigger changes from <b>false</b> to
<b>true</b>). The maximum, absolute value of the input signal
at the sampling point is provided as output signal.
</p>
<pre>
</PRE><P>
Extends from <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A> (Graphical layout of discrete block component icon).
<P><H3>Connectors</H3><P>
<TABLE BORDER=1 CELLSPACING=0 CELLPADDING=2>
<TR><TH>Type</TH><TH>Name</TH><TH>Description</TH></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>RealInput</A></TD><TD>u</TD><TD>Connector with a Real input signal</TD></TR>
<TR><TD>output <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>RealOutput</A></TD><TD>y</TD><TD>Connector with a Real output signal</TD></TR>
<TR><TD>input <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>BooleanInput</A></TD><TD>trigger</TD><TD>&nbsp;</TD></TR>
</TABLE>
<P><H3>Modelica definition</H3>
<PRE>
<font color="blue">block</font> TriggeredMax <font color="darkgreen">
  &quot;Compute maximum, absolute value of continuous signal at trigger instants&quot;</font>

  <font color="blue">extends </font><A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.DiscreteBlockIcon"
>Interfaces.DiscreteBlockIcon</A>;
<textblock type="annotcomp" expanded="false">  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealInput"
>Modelica.Blocks.Interfaces.RealInput</A> u <font color="darkgreen">&quot;Connector with a Real input signal&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.RealOutput"
>Modelica.Blocks.Interfaces.RealOutput</A> y <font color="darkgreen">&quot;Connector with a Real output signal&quot;</font>;
  <A HREF="Modelica_Blocks_Interfaces.html#Modelica.Blocks.Interfaces.BooleanInput"
>Modelica.Blocks.Interfaces.BooleanInput</A> trigger;</textblock>
<font color="blue">equation </font>
  <font color="blue">when </font>trigger<font color="blue"> then</font>
     y =<font color="red"> max</font>(<font color="red">pre</font>(y),<font color="red"> abs</font>(u));
  <font color="blue">end when</font>;
<font color="blue">initial </font><font color="blue">equation </font>
  y = 0;
<textblock type="annotcomp" expanded="false"><font color="blue">end </font>TriggeredMax;
</PRE>
<HR>
<address><a href="http://www.3ds.com/">Automatically generated</a> Fri Nov 12 16:27:36 2010.
</address></BODY>
</HTML>
